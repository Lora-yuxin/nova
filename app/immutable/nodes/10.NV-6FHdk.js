import{n as O,H as It,i as Dt,s as be,c as me,o as yt,e as K,y as Bt,b as kt,d as Et}from"../chunks/scheduler.nSpB3e7h.js";import{J as Ct,d as c,K as St,S as Se,i as Fe,w as j,g as A,e as y,t as Q,s as D,c as k,a as w,b as P,f as B,u as m,h as p,j as T,v as ge,y as L,E as Ft,x as He,D as Ut,o as ie,A as Ee,n as re,B as we,q as wt,k as Ae,l as Ve,m as Ie,p as De,r as Me,H as Yt,I as Mt}from"../chunks/index.EYyPxix3.js";import{q as Wt,r as Qt,A as Pt,s as Gt,u as Ye,b as Ot,$ as Ue,S as We,C as ve,e as x,v as Pe,w as Ge,j as Rt,x as Ze,P as ke}from"../chunks/apis.rP1ghAGS.js";import{g as Nt}from"../chunks/entry.WOoOEVMW.js";import{p as Tt}from"../chunks/stores.DflsJ3w8.js";import{A as Lt}from"../chunks/ArtistSelector.B512vCz4.js";import{g as Qe}from"../chunks/assets.Kq_R9HF9.js";import{f as fe}from"../chunks/units.XFe2sYSS.js";import{p as jt}from"../chunks/polygonscan.3rzyozVp.js";const At=typeof window<"u";let Jt=At?()=>window.performance.now():()=>Date.now(),Oe=At?a=>requestAnimationFrame(a):O;const pe=new Set;function Vt(a){pe.forEach(e=>{e.c(a)||(pe.delete(e),e.f())}),pe.size!==0&&Oe(Vt)}function Ht(a){let e;return pe.size===0&&Oe(Vt),{promise:new Promise(t=>{pe.add(e={c:a,f:t})}),abort(){pe.delete(e)}}}const Be=new Map;let Ce=0;function Zt(a){let e=5381,t=a.length;for(;t--;)e=(e<<5)-e^a.charCodeAt(t);return e>>>0}function Xt(a,e){const t={stylesheet:St(e),rules:{}};return Be.set(a,t),t}function qt(a,e,t,l,s,r,i,o=0){const n=16.666/l;let u=`{
`;for(let V=0;V<=1;V+=n){const b=e+(t-e)*r(V);u+=V*100+`%{${i(b,1-b)}}
`}const f=u+`100% {${i(t,1-t)}}
}`,d=`__svelte_${Zt(f)}_${o}`,_=Ct(a),{stylesheet:h,rules:v}=Be.get(_)||Xt(_,a);v[d]||(v[d]=!0,h.insertRule(`@keyframes ${d} ${f}`,h.cssRules.length));const g=a.style.animation||"";return a.style.animation=`${g?`${g}, `:""}${d} ${l}ms linear ${s}ms 1 both`,Ce+=1,d}function Kt(a,e){const t=(a.style.animation||"").split(", "),l=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),s=t.length-l.length;s&&(a.style.animation=l.join(", "),Ce-=s,Ce||zt())}function zt(){Oe(()=>{Ce||(Be.forEach(a=>{const{ownerNode:e}=a.stylesheet;e&&c(e)}),Be.clear())})}function Re(a,e,t,l){if(!e)return O;const s=a.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return O;const{delay:r=0,duration:i=300,easing:o=It,start:n=Jt()+r,end:u=n+i,tick:f=O,css:d}=t(a,{from:e,to:s},l);let _=!0,h=!1,v;function g(){d&&(v=qt(a,0,1,i,r,o,d)),r||(h=!0)}function V(){d&&Kt(a,v),_=!1}return Ht(b=>{if(!h&&b>=n&&(h=!0),h&&b>=u&&(f(1,0),V()),!_)return!1;if(h){const E=b-n,I=0+1*o(E/i);f(I,1-I)}return!0}),g(),f(0,1),V}function Ne(a){const e=getComputedStyle(a);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,s=a.getBoundingClientRect();a.style.position="absolute",a.style.width=t,a.style.height=l,$t(a,s)}}function $t(a,e){const t=a.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(a),s=l.transform==="none"?"":l.transform;a.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function xt({params:a}){return a}const is=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"})),el=Wt(Qt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var Xe=function(a,e,t,l){function s(r){return r instanceof t?r:new t(function(i){i(r)})}return new(t||(t=Promise))(function(r,i){function o(f){try{u(l.next(f))}catch(d){i(d)}}function n(f){try{u(l.throw(f))}catch(d){i(d)}}function u(f){f.done?r(f.value):s(f.value).then(o,n)}u((l=l.apply(a,e||[])).next())})},ne=function(a,e,t,l,s){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?a!==e||!s:!e.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?s.call(a,t):s?s.value=t:e.set(a,t),t},te=function(a,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?a!==e||!l:!e.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(a):l?l.value:e.get(a)},de,ce,se;class tl extends Pt{constructor(e){super(),de.set(this,void 0),ce.set(this,void 0),se.set(this,void 0),this.subprovider=e,ne(this,de,[],"f"),ne(this,ce,10,"f"),ne(this,se,null,"f")}get drainInterval(){return te(this,ce,"f")}set drainInterval(e){e<0&&(e=-1),e!==te(this,ce,"f")&&(ne(this,ce,e,"f"),te(this,ce,"f")>=0?(te(this,se,"f")&&(clearTimeout(te(this,se,"f")),ne(this,se,null,"f")),te(this,de,"f").length&&ne(this,se,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f")):te(this,se,"f")&&(clearTimeout(te(this,se,"f")),ne(this,se,null,"f")))}queueCall(e,t){return te(this,se,"f")==null&&te(this,ce,"f")>=0&&ne(this,se,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f"),new Promise((l,s)=>{te(this,de,"f").push({request:{to:e,data:t},resolve:l,reject:s})})}drainCallQueue(){return Xe(this,void 0,void 0,function*(){ne(this,se,null,"f");const e=te(this,de,"f");ne(this,de,[],"f");const t=Gt([el,Ye.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:o})=>[o.to,o.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:o})=>({to:o.to,data:o.data}))});const l=yield this.subprovider.call({data:t}),[s,r]=Ye.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:o},n)=>({to:o.to,data:o.data,status:r[n][0],result:r[n][1]}))});const i=[];for(let o=0;o<e.length;o++){const n=r[o],{resolve:u}=e[o];u({status:n[0],data:n[1]}),i.push({status:n[0],data:n[1]})}return i})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return Xe(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,s=t.data||"0x";Ot(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const r=yield this.queueCall(l,s);if(r.status)return r.data;throw Ye.getBuiltinCallException("call",{to:l,data:s},r.data)}return yield this.subprovider._perform(e)})}}de=new WeakMap,ce=new WeakMap,se=new WeakMap;function ll(a){const e=a-1;return e*e*e+1}function Te(a,{from:e,to:t},l={}){const s=getComputedStyle(a),r=s.transform==="none"?"":s.transform,[i,o]=s.transformOrigin.split(" ").map(parseFloat),n=e.left+e.width*i/t.width-(t.left+i),u=e.top+e.height*o/t.height-(t.top+o),{delay:f=0,duration:d=h=>Math.sqrt(h)*120,easing:_=ll}=l;return{delay:f,duration:Dt(d)?d(Math.sqrt(n*n+u*u)):d,easing:_,css:(h,v)=>{const g=v*n,V=v*u,b=h+v*e.width/t.width,E=h+v*e.height/t.height;return`transform: ${r} translate(${g}px, ${V}px) scale(${b}, ${E});`}}}function sl(a,e,t){const l=a.slice();return l[18]=e[t],l[17]=t,l}function qe(a,e,t){const l=a.slice();l[14]=e[t],l[17]=t;const s=l[3].find(function(...i){return a[10](l[14],...i)});return l[15]=s,l}function il(a){let e,t,l,s=a[4]("gravity.votes.title")+"",r,i,o,n=a[4]("gravity.votes.subtitle")+"",u,f;function d(v,g){return v[2].length?ol:al}let _=d(a),h=_(a);return{c(){e=y("div"),t=y("div"),l=y("b"),r=Q(s),i=D(),o=y("p"),u=Q(n),f=D(),h.c(),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=w(e);t=k(g,"DIV",{class:!0});var V=w(t);l=k(V,"B",{});var b=w(l);r=P(b,s),b.forEach(c),i=B(V),o=k(V,"P",{});var E=w(o);u=P(E,n),E.forEach(c),V.forEach(c),f=B(g),h.l(g),g.forEach(c),this.h()},h(){m(t,"class","header svelte-1tn5l0x"),m(e,"class","votes svelte-1tn5l0x")},m(v,g){A(v,e,g),p(e,t),p(t,l),p(l,r),p(t,i),p(t,o),p(o,u),p(e,f),h.m(e,null)},p(v,g){g&16&&s!==(s=v[4]("gravity.votes.title")+"")&&T(r,s),g&16&&n!==(n=v[4]("gravity.votes.subtitle")+"")&&T(u,n),_===(_=d(v))&&h?h.p(v,g):(h.d(1),h=_(v),h&&(h.c(),h.m(e,null)))},d(v){v&&c(e),h.d()}}}function rl(a){let e,t,l=a[4]("gravity.votes.countdown")+"",s,r,i,o=String(Math.floor(a[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[1]%(60*1e3)/1e3)).padStart(2,"0"),n;return{c(){e=y("div"),t=y("p"),s=Q(l),r=D(),i=y("h3"),n=Q(o),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=w(e);t=k(f,"P",{});var d=w(t);s=P(d,l),d.forEach(c),r=B(f),i=k(f,"H3",{class:!0});var _=w(i);n=P(_,o),_.forEach(c),f.forEach(c),this.h()},h(){m(i,"class","svelte-1tn5l0x"),m(e,"class","countdown svelte-1tn5l0x")},m(u,f){A(u,e,f),p(e,t),p(t,s),p(e,r),p(e,i),p(i,n)},p(u,f){f&16&&l!==(l=u[4]("gravity.votes.countdown")+"")&&T(s,l),f&2&&o!==(o=String(Math.floor(u[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*1e3)/1e3)).padStart(2,"0"))&&T(n,o)},d(u){u&&c(e)}}}function al(a){let e,t=x({length:50}),l=[];for(let s=0;s<t.length;s+=1)l[s]=nl(sl(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p:O,d(s){s&&c(e),ge(l,s)}}}function ol(a){let e=[],t=new Map,l,s=x(a[2]);const r=i=>i[14].id;for(let i=0;i<s.length;i+=1){let o=qe(a,s,i),n=r(o);t.set(n,e[i]=Ke(n,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=j()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);l=j()},m(i,o){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(i,o);A(i,l,o)},p(i,o){if(o&61){s=x(i[2]);for(let n=0;n<e.length;n+=1)e[n].r();e=Pe(e,o,r,1,i,s,t,l.parentNode,Ge,Ke,l,qe);for(let n=0;n<e.length;n+=1)e[n].a()}},d(i){i&&c(l);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function nl(a){let e,t,l,s,r,i,o,n,u,f;return{c(){e=y("div"),t=y("div"),l=D(),s=y("div"),r=D(),i=y("div"),o=y("div"),n=D(),u=y("div"),f=D(),this.h()},l(d){e=k(d,"DIV",{class:!0});var _=w(e);t=k(_,"DIV",{class:!0}),w(t).forEach(c),l=B(_),s=k(_,"DIV",{class:!0}),w(s).forEach(c),r=B(_),i=k(_,"DIV",{class:!0});var h=w(i);o=k(h,"DIV",{class:!0}),w(o).forEach(c),n=B(h),u=k(h,"DIV",{class:!0}),w(u).forEach(c),h.forEach(c),f=B(_),_.forEach(c),this.h()},h(){m(t,"class","placeholder svelte-1tn5l0x"),L(t,"width","110px"),L(t,"margin-right","auto"),m(s,"class","placeholder svelte-1tn5l0x"),L(s,"width","60px"),m(o,"class","placeholder svelte-1tn5l0x"),L(o,"width","40px"),m(u,"class","placeholder svelte-1tn5l0x"),L(u,"width","110px"),m(i,"class","details svelte-1tn5l0x"),m(e,"class","vote svelte-1tn5l0x")},m(d,_){A(d,e,_),p(e,t),p(e,l),p(e,s),p(e,r),p(e,i),p(i,o),p(i,n),p(i,u),p(e,f)},p:O,d(d){d&&c(e)}}}function cl(a){let e,t=a[4]("gravity.votes.unrevealed")+"",l;return{c(){e=y("i"),l=Q(t),this.h()},l(s){e=k(s,"I",{class:!0});var r=w(e);l=P(r,t),r.forEach(c),this.h()},h(){m(e,"class","candidate svelte-1tn5l0x")},m(s,r){A(s,e,r),p(e,l)},p(s,r){r&16&&t!==(t=s[4]("gravity.votes.unrevealed")+"")&&T(l,t)},d(s){s&&c(e)}}}function fl(a){let e,t,l,s,r=(a[0].choices[a[14].candidate].title||ze(a[0],a[14].candidate))+"",i;return{c(){e=y("p"),t=y("img"),s=D(),i=Q(r),this.h()},l(o){e=k(o,"P",{class:!0});var n=w(e);t=k(n,"IMG",{src:!0,alt:!0,class:!0}),s=B(n),i=P(n,r),n.forEach(c),this.h()},h(){K(t.src,l=a[0].choices[a[14].candidate].txImageUrl)||m(t,"src",l),m(t,"alt","Choice"),m(t,"class","svelte-1tn5l0x"),m(e,"class","candidate svelte-1tn5l0x")},m(o,n){A(o,e,n),p(e,t),p(e,s),p(e,i)},p(o,n){n&5&&!K(t.src,l=o[0].choices[o[14].candidate].txImageUrl)&&m(t,"src",l),n&5&&r!==(r=(o[0].choices[o[14].candidate].title||ze(o[0],o[14].candidate))+"")&&T(i,r)},d(o){o&&c(e)}}}function Ke(a,e){var z,N,ee;let t,l,s,r,i,o=(((z=e[15])==null?void 0:z.nickname)||((N=e[15])==null?void 0:N.address.slice(0,6))+"..."+((ee=e[15])==null?void 0:ee.address.slice(-4)))+"",n,u,f,d,_=Number(fe(e[14].amount)).toLocaleString("en-US")+"",h,v,g,V,b,E,I,C=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",U,H,Y,q,S=O;function G(X,R){return X[14].candidate!==null?fl:cl}let M=G(e),W=M(e);return{key:a,first:null,c(){t=y("div"),l=y("a"),s=y("img"),i=D(),n=Q(o),f=D(),d=y("p"),h=Q(_),v=D(),g=y("img"),b=D(),E=y("div"),I=y("span"),U=Q(C),H=D(),W.c(),Y=D(),this.h()},l(X){t=k(X,"DIV",{class:!0});var R=w(t);l=k(R,"A",{href:!0,class:!0});var le=w(l);s=k(le,"IMG",{class:!0,src:!0,alt:!0}),i=B(le),n=P(le,o),le.forEach(c),f=B(R),d=k(R,"P",{});var J=w(d);h=P(J,_),J.forEach(c),v=B(R),g=k(R,"IMG",{src:!0,alt:!0,class:!0}),b=B(R),E=k(R,"DIV",{class:!0});var $=w(E);I=k($,"SPAN",{});var ue=w(I);U=P(ue,C),ue.forEach(c),H=B($),W.l($),$.forEach(c),Y=B(R),R.forEach(c),this.h()},h(){var X,R;m(s,"class","profileImage svelte-1tn5l0x"),K(s.src,r="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||m(s,"src",r),m(s,"alt","User"),m(l,"href",u="/@"+(((X=e[15])==null?void 0:X.nickname)||((R=e[15])==null?void 0:R.address))),m(l,"class","svelte-1tn5l0x"),K(g.src,V=e[5])||m(g,"src",V),m(g,"alt","COMO"),m(g,"class","svelte-1tn5l0x"),m(E,"class","details svelte-1tn5l0x"),m(t,"class","vote svelte-1tn5l0x"),this.first=t},m(X,R){A(X,t,R),p(t,l),p(l,s),p(l,i),p(l,n),p(t,f),p(t,d),p(d,h),p(t,v),p(t,g),p(t,b),p(t,E),p(E,I),p(I,U),p(E,H),W.m(E,null),p(t,Y)},p(X,R){var le,J,$,ue,ae;e=X,R&12&&o!==(o=(((le=e[15])==null?void 0:le.nickname)||((J=e[15])==null?void 0:J.address.slice(0,6))+"..."+(($=e[15])==null?void 0:$.address.slice(-4)))+"")&&T(n,o),R&12&&u!==(u="/@"+(((ue=e[15])==null?void 0:ue.nickname)||((ae=e[15])==null?void 0:ae.address)))&&m(l,"href",u),R&4&&_!==(_=Number(fe(e[14].amount)).toLocaleString("en-US")+"")&&T(h,_),R&4&&C!==(C=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&T(U,C),M===(M=G(e))&&W?W.p(e,R):(W.d(1),W=M(e),W&&(W.c(),W.m(E,null)))},r(){q=t.getBoundingClientRect()},f(){Ne(t),S()},a(){S(),S=Re(t,q,Te,{})},d(X){X&&c(t),W.d()}}}function ul(a){let e;function t(r,i){return r[1]>-1?rl:il}let l=t(a),s=l(a);return{c(){s.c(),e=j()},l(r){s.l(r),e=j()},m(r,i){s.m(r,i),A(r,e,i)},p(r,[i]){l===(l=t(r))&&s?s.p(r,i):(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},i:O,o:O,d(r){r&&c(e),s.d(r)}}}function ze(a,e){const t=a.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((s,r)=>{var i,o;return`${s.name}: ${(o=(i=t.slotChoices)==null?void 0:i.find(n=>n.id===l.slotChoiceIds[r]))==null?void 0:o.alias}`}).join(", ")}return a.choices[e].id}function hl(a,e,t){let l;me(a,Ue,b=>t(4,l=b));let{voteStart:s}=e,{contract:r}=e,{poll:i}=e,{pollId:o}=e,{artist:n}=e,u=-1,f,d,_=[],h=[];const v=Qe(n).como;s>Date.now()?(f=window.setInterval(()=>{s>Date.now()?t(1,u=s-Date.now()):(g(),t(1,u=-1),window.clearInterval(f))},1e3),u=s-Date.now()):g();async function g(){const E=await(await fetch(We.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    query {
                        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${r.toLowerCase()}", poll_eq: "${o}"}) {
                            ${Object.keys(We.Vote).join(`
`)}
                        }
                    }
                `})})).json(),I=E.data.votes.filter(C=>!h.find(U=>U.address===C.from)).map(C=>C.from);if(I.length){const U=await(await fetch(`${ve.URL}/user/v1/by-address/${I.join(",")}`)).json();t(3,h=[...h,...U,...I.filter(H=>!U.find(Y=>Y.address===H)).map(H=>({nickname:"",address:H,profileImageUrl:""}))])}t(2,_=E.data.votes),(!_.length||_.filter(C=>C.candidate===null).length)&&(d=window.setTimeout(g,1e4))}yt(()=>{window.clearInterval(f),window.clearTimeout(d)});const V=(b,E)=>E.address===b.from;return a.$$set=b=>{"voteStart"in b&&t(6,s=b.voteStart),"contract"in b&&t(7,r=b.contract),"poll"in b&&t(0,i=b.poll),"pollId"in b&&t(8,o=b.pollId),"artist"in b&&t(9,n=b.artist)},[i,u,_,h,l,v,s,r,o,n,V]}class _l extends Se{constructor(e){super(),Fe(this,e,hl,ul,be,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function $e(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function xe(a){let e,t=x(a[4]),l=[];for(let s=0;s<t.length;s+=1)l[s]=et($e(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p(s,r){if(r&23){t=x(s[4]);let i;for(i=0;i<t.length;i+=1){const o=$e(s,t,i);l[i]?l[i].p(o,r):(l[i]=et(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&c(e),ge(l,s)}}}function et(a){let e,t,l=`${a[2]?a[10]/Math.max(...a[4])*100:10}%`;return{c(){e=y("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,title:!0}),w(e).forEach(c),this.h()},h(){m(e,"class","bar svelte-11jci92"),m(e,"title",t=a[10].toLocaleString("en-US")+" COMO"),He(e,"active",a[2]&&a[0]/a[1]>a[12]/a[4].length),L(e,"height",l)},m(s,r){A(s,e,r)},p(s,r){r&16&&t!==(t=s[10].toLocaleString("en-US")+" COMO")&&m(e,"title",t),r&23&&He(e,"active",s[2]&&s[0]/s[1]>s[12]/s[4].length),r&20&&l!==(l=`${s[2]?s[10]/Math.max(...s[4])*100:10}%`)&&L(e,"height",l)},d(s){s&&c(e)}}}function dl(a){let e,t,l,s,r,i,o=`${a[0]/a[1]*100}%`,n,u,f,d=a[5]("gravity.totalvotes",{values:{votes:`${a[6](a[0])}/${a[6](a[1])}`}})+"",_,h,v=Math.round(a[0]/a[1]*100)+"",g,V,b=a[4]&&xe(a);return{c(){e=y("div"),t=y("div"),b&&b.c(),s=D(),r=y("div"),i=y("div"),n=D(),u=y("div"),f=y("p"),_=Q(d),h=Q(" ("),g=Q(v),V=Q("%)"),this.h()},l(E){e=k(E,"DIV",{class:!0});var I=w(e);t=k(I,"DIV",{class:!0});var C=w(t);b&&b.l(C),C.forEach(c),s=B(I),r=k(I,"DIV",{class:!0});var U=w(r);i=k(U,"DIV",{class:!0}),w(i).forEach(c),U.forEach(c),n=B(I),u=k(I,"DIV",{class:!0});var H=w(u);f=k(H,"P",{});var Y=w(f);_=P(Y,d),h=P(Y," ("),g=P(Y,v),V=P(Y,"%)"),Y.forEach(c),H.forEach(c),I.forEach(c),this.h()},h(){m(t,"class","bars svelte-11jci92"),Bt(()=>a[9].call(t)),m(i,"class","progress svelte-11jci92"),L(i,"width",o),m(r,"class","progressBar svelte-11jci92"),m(u,"class","text svelte-11jci92"),m(e,"class","graph svelte-11jci92")},m(E,I){A(E,e,I),p(e,t),b&&b.m(t,null),l=Ft(t,a[9].bind(t)),p(e,s),p(e,r),p(r,i),p(e,n),p(e,u),p(u,f),p(f,_),p(f,h),p(f,g),p(f,V)},p(E,[I]){E[4]?b?b.p(E,I):(b=xe(E),b.c(),b.m(t,null)):b&&(b.d(1),b=null),I&3&&o!==(o=`${E[0]/E[1]*100}%`)&&L(i,"width",o),I&99&&d!==(d=E[5]("gravity.totalvotes",{values:{votes:`${E[6](E[0])}/${E[6](E[1])}`}})+"")&&T(_,d),I&3&&v!==(v=Math.round(E[0]/E[1]*100)+"")&&T(g,v)},i:O,o:O,d(E){E&&c(e),b&&b.d(),l()}}}function vl(a,e,t){let l,s;me(a,Ue,h=>t(5,l=h)),me(a,Rt,h=>t(6,s=h));let{contract:r}=e,{poll:i}=e,{revealedVotes:o}=e,{totalVotes:n}=e,u;fetch(We.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(limit: 99999, orderBy: timestamp_ASC, where: {contract_eq: "${r}", poll_eq: "${i}"}) {
                        amount
                    }
                }
            `})}).then(async h=>{const v=await h.json();t(2,u=v.data.votes.map(g=>Number(fe(g.amount))))});let f,d;function _(){f=this.clientWidth,t(3,f)}return a.$$set=h=>{"contract"in h&&t(7,r=h.contract),"poll"in h&&t(8,i=h.poll),"revealedVotes"in h&&t(0,o=h.revealedVotes),"totalVotes"in h&&t(1,n=h.totalVotes)},a.$$.update=()=>{if(a.$$.dirty&12&&f)if(u){let h=[...u],v=[];for(let g=(f-10)/20;g>0;g--)v.push(h.splice(0,Math.ceil(h.length/g)).reduce((V,b)=>V+b,0));t(4,d=v)}else t(4,d=Array(Math.floor((f-10)/20)).fill(0))},[o,n,u,f,d,l,s,r,i,_]}class pl extends Se{constructor(e){super(),Fe(this,e,vl,dl,be,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function ml(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function tt(a,e,t){const l=a.slice();return l[4]=e[t],l}function lt(a,e,t){const l=a.slice();return l[7]=e[t],l}function gl(a){let e;return{c(){e=y("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),w(e).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-1y461sc"),L(e,"Width","80px")},m(t,l){A(t,e,l)},p:O,d(t){t&&c(e)}}}function bl(a){let e,t=a[1]("gravity.history.subtitle",{values:{count:a[0].length}})+"",l;return{c(){e=y("p"),l=Q(t)},l(s){e=k(s,"P",{});var r=w(e);l=P(r,t),r.forEach(c)},m(s,r){A(s,e,r),p(e,l)},p(s,r){r&3&&t!==(t=s[1]("gravity.history.subtitle",{values:{count:s[0].length}})+"")&&T(l,t)},d(s){s&&c(e)}}}function yl(a){let e,t=x({length:5}),l=[];for(let s=0;s<t.length;s+=1)l[s]=El(ml(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p:O,d(s){s&&c(e),ge(l,s)}}}function kl(a){let e,t=x(a[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=rt(tt(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p(s,r){if(r&1){t=x(s[0]);let i;for(i=0;i<t.length;i+=1){const o=tt(s,t,i);l[i]?l[i].p(o,r):(l[i]=rt(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&c(e),ge(l,s)}}}function El(a){let e,t,l,s,r,i;return{c(){e=y("div"),t=y("div"),l=D(),s=y("div"),r=D(),i=y("hr"),this.h()},l(o){e=k(o,"DIV",{class:!0});var n=w(e);t=k(n,"DIV",{class:!0}),w(t).forEach(c),l=B(n),s=k(n,"DIV",{class:!0}),w(s).forEach(c),n.forEach(c),r=B(o),i=k(o,"HR",{}),this.h()},h(){m(t,"class","placeholder imgPlaceholder svelte-1y461sc"),m(s,"class","placeholder svelte-1y461sc"),L(s,"width","calc(100% - 60px)"),m(e,"class","gravity svelte-1y461sc")},m(o,n){A(o,e,n),p(e,t),p(e,l),p(e,s),A(o,r,n),A(o,i,n)},p:O,d(o){o&&(c(e),c(r),c(i))}}}function wl(a){let e,t=a[4].title+"",l,s;return{c(){e=y("a"),l=Q(t),this.h()},l(r){e=k(r,"A",{class:!0,href:!0});var i=w(e);l=P(i,t),i.forEach(c),this.h()},h(){m(e,"class","title svelte-1y461sc"),m(e,"href",s="/gravity/"+a[4].artist+"/"+a[4].id)},m(r,i){A(r,e,i),p(e,l)},p(r,i){i&1&&t!==(t=r[4].title+"")&&T(l,t),i&1&&s!==(s="/gravity/"+r[4].artist+"/"+r[4].id)&&m(e,"href",s)},d(r){r&&c(e)}}}function Al(a){let e,t=a[4].title+"",l;return{c(){e=y("p"),l=Q(t)},l(s){e=k(s,"P",{});var r=w(e);l=P(r,t),r.forEach(c)},m(s,r){A(s,e,r),p(e,l)},p(s,r){r&1&&t!==(t=s[4].title+"")&&T(l,t)},d(s){s&&c(e)}}}function st(a){let e,t=x(a[4].polls.sort(a[3])),l=[];for(let s=0;s<t.length;s+=1)l[s]=it(lt(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p(s,r){if(r&1){t=x(s[4].polls.sort(s[3]));let i;for(i=0;i<t.length;i+=1){const o=lt(s,t,i);l[i]?l[i].p(o,r):(l[i]=it(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&c(e),ge(l,s)}}}function it(a){let e,t,l=a[7].title+"",s,r,i,o,n=new Date(a[7].startDate).toLocaleDateString()+"",u,f;return{c(){e=y("div"),t=y("a"),s=Q(l),i=D(),o=y("p"),u=Q(n),f=D(),this.h()},l(d){e=k(d,"DIV",{class:!0});var _=w(e);t=k(_,"A",{href:!0,class:!0});var h=w(t);s=P(h,l),h.forEach(c),i=B(_),o=k(_,"P",{});var v=w(o);u=P(v,n),v.forEach(c),f=B(_),_.forEach(c),this.h()},h(){m(t,"href",r="/gravity/"+a[4].artist+"/"+a[4].id+"/"+a[7].id),m(t,"class","svelte-1y461sc"),m(e,"class","poll svelte-1y461sc")},m(d,_){A(d,e,_),p(e,t),p(t,s),p(e,i),p(e,o),p(o,u),p(e,f)},p(d,_){_&1&&l!==(l=d[7].title+"")&&T(s,l),_&1&&r!==(r="/gravity/"+d[4].artist+"/"+d[4].id+"/"+d[7].id)&&m(t,"href",r),_&1&&n!==(n=new Date(d[7].startDate).toLocaleDateString()+"")&&T(u,n)},d(d){d&&c(e)}}}function rt(a){let e,t,l,s,r,i,o,n;function u(h,v){return h[4].polls.length>1?Al:wl}let f=u(a),d=f(a),_=a[4].polls.length>1&&st(a);return{c(){e=y("div"),t=y("img"),r=D(),d.c(),i=D(),_&&_.c(),o=D(),n=y("hr"),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=w(e);t=k(v,"IMG",{src:!0,alt:!0,class:!0}),r=B(v),d.l(v),v.forEach(c),i=B(h),_&&_.l(h),o=B(h),n=k(h,"HR",{}),this.h()},h(){K(t.src,l=a[4].bannerImageUrl)||m(t,"src",l),m(t,"alt",s=a[4].title),m(t,"class","svelte-1y461sc"),m(e,"class","gravity svelte-1y461sc")},m(h,v){A(h,e,v),p(e,t),p(e,r),d.m(e,null),A(h,i,v),_&&_.m(h,v),A(h,o,v),A(h,n,v)},p(h,v){v&1&&!K(t.src,l=h[4].bannerImageUrl)&&m(t,"src",l),v&1&&s!==(s=h[4].title)&&m(t,"alt",s),f===(f=u(h))&&d?d.p(h,v):(d.d(1),d=f(h),d&&(d.c(),d.m(e,null))),h[4].polls.length>1?_?_.p(h,v):(_=st(h),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},d(h){h&&(c(e),c(i),c(o),c(n)),d.d(),_&&_.d(h)}}}function Vl(a){let e,t,l,s=a[1]("gravity.history.title")+"",r,i,o;function n(v,g){return v[0]?bl:gl}let u=n(a),f=u(a);function d(v,g){return v[0]?kl:yl}let _=d(a),h=_(a);return{c(){e=y("div"),t=y("div"),l=y("b"),r=Q(s),i=D(),f.c(),o=D(),h.c(),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=w(e);t=k(g,"DIV",{class:!0});var V=w(t);l=k(V,"B",{});var b=w(l);r=P(b,s),b.forEach(c),i=B(V),f.l(V),V.forEach(c),o=B(g),h.l(g),g.forEach(c),this.h()},h(){m(t,"class","header svelte-1y461sc"),m(e,"class","history svelte-1y461sc")},m(v,g){A(v,e,g),p(e,t),p(t,l),p(l,r),p(t,i),f.m(t,null),p(e,o),h.m(e,null)},p(v,[g]){g&2&&s!==(s=v[1]("gravity.history.title")+"")&&T(r,s),u===(u=n(v))&&f?f.p(v,g):(f.d(1),f=u(v),f&&(f.c(),f.m(t,null))),_===(_=d(v))&&h?h.p(v,g):(h.d(1),h=_(v),h&&(h.c(),h.m(e,null)))},i:O,o:O,d(v){v&&c(e),f.d(),h.d()}}}function Il(a,e,t){let l;me(a,Ue,o=>t(1,l=o));let{artist:s}=e,{gravities:r=void 0}=e;r||fetch(`${ve.URL}/gravity/v3/${s.name}`).then(async o=>{const n=await o.json();t(0,r=[...n.upcoming,...n.ongoing,...n.past])});const i=(o,n)=>Date.parse(o.startDate)-Date.parse(n.startDate);return a.$$set=o=>{"artist"in o&&t(2,s=o.artist),"gravities"in o&&t(0,r=o.gravities)},[r,l,s,i]}class Dl extends Se{constructor(e){super(),Fe(this,e,Il,Vl,be,{artist:2,gravities:0})}}function at(a,e,t){const l=a.slice();l[25]=e[t];const s=Math.round(Number(fe(l[11][l[3].choices.indexOf(l[25])]))/l[10]*100);return l[26]=s,l}function ot(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function nt(a,e,t){const l=a.slice();l[25]=e[t];const s=Math.round(l[13](l[24],l[25].id)/l[11].reduce((r,i)=>r+Number(fe(i)),0)*100);return l[26]=s,l}function ct(a){let e=a[2].route,t,l=ft(a);return{c(){l.c(),t=j()},l(s){l.l(s),t=j()},m(s,r){l.m(s,r),A(s,t,r)},p(s,r){r&4&&be(e,e=s[2].route)?(l.d(1),l=ft(s),l.c(),l.m(t.parentNode,t)):l.p(s,r)},d(s){s&&c(t),l.d(s)}}}function ft(a){let e;return document.title=e="Nova | "+a[0].title.replaceAll(`
`," "),{c:O,l:O,m:O,p(t,l){l&1&&e!==(e="Nova | "+t[0].title.replaceAll(`
`," "))&&(document.title=e)},d:O}}function Bl(a){let e;return{c(){e=y("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),w(e).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),L(e,"width","85px")},m(t,l){A(t,e,l)},p:O,i:O,o:O,d(t){t&&c(e)}}}function Cl(a){let e,t,l;function s(i){a[16](i)}let r={};return a[1]!==void 0&&(r.selected=a[1]),e=new Lt({props:r}),kt.push(()=>wt(e,"selected",s)),{c(){Ae(e.$$.fragment)},l(i){Ve(e.$$.fragment,i)},m(i,o){Ie(e,i,o),l=!0},p(i,o){const n={};!t&&o&2&&(t=!0,n.selected=i[1],Et(()=>t=!1)),e.$set(n)},i(i){l||(re(e.$$.fragment,i),l=!0)},o(i){ie(e.$$.fragment,i),l=!1},d(i){De(e,i)}}}function Sl(a){let e,t,l;return{c(){e=y("div"),t=D(),l=y("div"),this.h()},l(s){e=k(s,"DIV",{class:!0}),w(e).forEach(c),t=B(s),l=k(s,"DIV",{class:!0}),w(l).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),L(e,"width","50px"),m(l,"class","placeholder svelte-1ut09yc"),L(l,"margin-left","auto"),L(l,"width","135px")},m(s,r){A(s,e,r),A(s,t,r),A(s,l,r)},p:O,d(s){s&&(c(e),c(t),c(l))}}}function Fl(a){let e,t,l,s,r,i,o,n,u;function f(h,v){if(h[0].type==="event-gravity")return Ml;if(h[0].type==="grand-gravity")return Yl;if(h[0].type==="solo-gravity")return Ul}let d=f(a),_=d&&d(a);return{c(){e=y("div"),_&&_.c(),l=D(),s=y("a"),r=y("img"),o=Q(`
                        PolygonScan`),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=w(e);_&&_.l(v),v.forEach(c),l=B(h),s=k(h,"A",{class:!0,href:!0,title:!0});var g=w(s);r=k(g,"IMG",{src:!0,alt:!0,class:!0}),o=P(g,`
                        PolygonScan`),g.forEach(c),this.h()},h(){m(e,"class",t="gravityType "+a[0].type+" svelte-1ut09yc"),K(r.src,i=jt)||m(r,"src",i),m(r,"alt","PolygonScan"),m(r,"class","svelte-1ut09yc"),m(s,"class","polygonscan svelte-1ut09yc"),m(s,"href",n=a[0].contractOutlink),m(s,"title",u="Poll ID: "+a[6])},m(h,v){A(h,e,v),_&&_.m(e,null),A(h,l,v),A(h,s,v),p(s,r),p(s,o)},p(h,v){d!==(d=f(h))&&(_&&_.d(1),_=d&&d(h),_&&(_.c(),_.m(e,null))),v&1&&t!==(t="gravityType "+h[0].type+" svelte-1ut09yc")&&m(e,"class",t),v&1&&n!==(n=h[0].contractOutlink)&&m(s,"href",n),v&64&&u!==(u="Poll ID: "+h[6])&&m(s,"title",u)},d(h){h&&(c(e),c(l),c(s)),_&&_.d()}}}function Ul(a){let e;return{c(){e=Q("Solo")},l(t){e=P(t,"Solo")},m(t,l){A(t,e,l)},d(t){t&&c(e)}}}function Yl(a){let e;return{c(){e=Q("Grand")},l(t){e=P(t,"Grand")},m(t,l){A(t,e,l)},d(t){t&&c(e)}}}function Ml(a){let e;return{c(){e=Q("Event")},l(t){e=P(t,"Event")},m(t,l){A(t,e,l)},d(t){t&&c(e)}}}function Wl(a){let e,t='<div class="placeholder svelte-1ut09yc"></div> <div class="placeholder svelte-1ut09yc"></div>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){m(e,"class","titlePlaceholder svelte-1ut09yc")},m(l,s){A(l,e,s)},p:O,d(l){l&&c(e)}}}function Ql(a){let e,t,l=a[0].title.replaceAll(`
`,a[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=y("h1"),t=new Yt(!1),this.h()},l(s){e=k(s,"H1",{class:!0});var r=w(e);t=Mt(r,!1),r.forEach(c),this.h()},h(){t.a=null,m(e,"class","svelte-1ut09yc")},m(s,r){A(s,e,r),t.m(l,e)},p(s,r){r&1&&l!==(l=s[0].title.replaceAll(`
`,s[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(s){s&&c(e)}}}function Pl(a){let e,t,l,s,r;return{c(){e=y("div"),t=D(),l=y("div"),s=D(),r=y("div"),this.h()},l(i){e=k(i,"DIV",{class:!0}),w(e).forEach(c),t=B(i),l=k(i,"DIV",{class:!0}),w(l).forEach(c),s=B(i),r=k(i,"DIV",{class:!0}),w(r).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),L(e,"width","50px"),m(l,"class","placeholder svelte-1ut09yc"),L(l,"width","150px"),m(r,"class","placeholder svelte-1ut09yc"),L(r,"margin-left","auto"),L(r,"width","65px")},m(i,o){A(i,e,o),A(i,t,o),A(i,l,o),A(i,s,o),A(i,r,o)},p:O,d(i){i&&(c(e),c(t),c(l),c(s),c(r))}}}function Gl(a){let e,t,l=new Date(a[3].startDate).toLocaleDateString()+"",s,r,i,o=a[0].polls.length>1&&ut(a),n=(a[7]>-1||a[8]<a[9])&&ht();return{c(){o&&o.c(),e=D(),t=y("p"),s=Q(l),r=D(),n&&n.c(),i=j(),this.h()},l(u){o&&o.l(u),e=B(u),t=k(u,"P",{class:!0});var f=w(t);s=P(f,l),f.forEach(c),r=B(u),n&&n.l(u),i=j(),this.h()},h(){m(t,"class","svelte-1ut09yc")},m(u,f){o&&o.m(u,f),A(u,e,f),A(u,t,f),p(t,s),A(u,r,f),n&&n.m(u,f),A(u,i,f)},p(u,f){u[0].polls.length>1?o?o.p(u,f):(o=ut(u),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f&8&&l!==(l=new Date(u[3].startDate).toLocaleDateString()+"")&&T(s,l),u[7]>-1||u[8]<u[9]?n||(n=ht(),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(u){u&&(c(e),c(t),c(r),c(i)),o&&o.d(u),n&&n.d(u)}}}function ut(a){let e,t=a[3].title+"",l;return{c(){e=y("p"),l=Q(t),this.h()},l(s){e=k(s,"P",{class:!0});var r=w(e);l=P(r,t),r.forEach(c),this.h()},h(){m(e,"class","svelte-1ut09yc")},m(s,r){A(s,e,r),p(e,l)},p(s,r){r&8&&t!==(t=s[3].title+"")&&T(l,t)},d(s){s&&c(e)}}}function ht(a){let e,t='<div class="dot"></div>',l,s,r="LIVE";return{c(){e=y("div"),e.innerHTML=t,l=D(),s=y("p"),s.textContent=r,this.h()},l(i){e=k(i,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=B(i),s=k(i,"P",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-1k24nxm"&&(s.textContent=r),this.h()},h(){m(e,"class","liveIndicator svelte-1ut09yc"),m(s,"class","svelte-1ut09yc")},m(i,o){A(i,e,o),A(i,l,o),A(i,s,o)},d(i){i&&(c(e),c(l),c(s))}}}function Ol(a){let e,t,l;return{c(){e=y("div"),t=D(),l=y("div"),this.h()},l(s){e=k(s,"DIV",{class:!0}),w(e).forEach(c),t=B(s),l=k(s,"DIV",{class:!0}),w(l).forEach(c),this.h()},h(){m(e,"class","itemPlaceholder svelte-1ut09yc"),L(e,"height","250px"),m(l,"class","itemPlaceholder svelte-1ut09yc"),L(l,"height","350px")},m(s,r){A(s,e,r),A(s,t,r),A(s,l,r)},p:O,i:O,o:O,d(s){s&&(c(e),c(t),c(l))}}}function Rl(a){let e,t,l,s;const r=[Tl,Nl],i=[];function o(n,u){return n[7]>-1?0:1}return e=o(a),t=i[e]=r[e](a),{c(){t.c(),l=j()},l(n){t.l(n),l=j()},m(n,u){i[e].m(n,u),A(n,l,u),s=!0},p(n,u){let f=e;e=o(n),e===f?i[e].p(n,u):(we(),ie(i[f],1,1,()=>{i[f]=null}),Ee(),t=i[e],t?t.p(n,u):(t=i[e]=r[e](n),t.c()),re(t,1),t.m(l.parentNode,l))},i(n){s||(re(t),s=!0)},o(n){ie(t),s=!1},d(n){n&&c(l),i[e].d(n)}}}function Nl(a){let e,t,l,s;e=new pl({props:{contract:a[5].target.toString().toLowerCase(),poll:a[6],revealedVotes:a[8],totalVotes:a[9]}});function r(n,u){return n[3].pollViewMetadata.slots&&n[3].pollViewMetadata.slotChoices?jl:Ll}let i=r(a),o=i(a);return{c(){Ae(e.$$.fragment),t=D(),l=y("div"),o.c(),this.h()},l(n){Ve(e.$$.fragment,n),t=B(n),l=k(n,"DIV",{class:!0});var u=w(l);o.l(u),u.forEach(c),this.h()},h(){m(l,"class","item polls svelte-1ut09yc")},m(n,u){Ie(e,n,u),A(n,t,u),A(n,l,u),o.m(l,null),s=!0},p(n,u){const f={};u&32&&(f.contract=n[5].target.toString().toLowerCase()),u&64&&(f.poll=n[6]),u&256&&(f.revealedVotes=n[8]),u&512&&(f.totalVotes=n[9]),e.$set(f),i===(i=r(n))&&o?o.p(n,u):(o.d(1),o=i(n),o&&(o.c(),o.m(l,null)))},i(n){s||(re(e.$$.fragment,n),s=!0)},o(n){ie(e.$$.fragment,n),s=!1},d(n){n&&(c(t),c(l)),De(e,n),o.d()}}}function Tl(a){let e,t,l,s=a[12]("gravity.counting_countdown")+"",r,i,o,n=String(Math.floor(a[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[7]%(60*1e3)/1e3)).padStart(2,"0"),u,f=a[0]&&a[0].bannerImageUrl&&gt(a);return{c(){e=y("div"),f&&f.c(),t=D(),l=y("p"),r=Q(s),i=D(),o=y("h3"),u=Q(n),this.h()},l(d){e=k(d,"DIV",{class:!0});var _=w(e);f&&f.l(_),t=B(_),l=k(_,"P",{});var h=w(l);r=P(h,s),h.forEach(c),i=B(_),o=k(_,"H3",{class:!0});var v=w(o);u=P(v,n),v.forEach(c),_.forEach(c),this.h()},h(){m(o,"class","svelte-1ut09yc"),m(e,"class","item countdown svelte-1ut09yc")},m(d,_){A(d,e,_),f&&f.m(e,null),p(e,t),p(e,l),p(l,r),p(e,i),p(e,o),p(o,u)},p(d,_){d[0]&&d[0].bannerImageUrl?f?f.p(d,_):(f=gt(d),f.c(),f.m(e,t)):f&&(f.d(1),f=null),_&4096&&s!==(s=d[12]("gravity.counting_countdown")+"")&&T(r,s),_&128&&n!==(n=String(Math.floor(d[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[7]%(60*1e3)/1e3)).padStart(2,"0"))&&T(u,n)},i:O,o:O,d(d){d&&c(e),f&&f.d()}}}function Ll(a){let e,t=[],l=new Map,s=x([...a[3].choices].sort(a[18]));const r=i=>i[25];for(let i=0;i<s.length;i+=1){let o=at(a,s,i),n=r(o);l.set(n,t[i]=_t(n,o))}return{c(){e=y("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var o=w(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(c),this.h()},h(){m(e,"class","slot svelte-1ut09yc")},m(i,o){A(i,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(i,o){if(o&3080){s=x([...i[3].choices].sort(i[18]));for(let n=0;n<t.length;n+=1)t[n].r();t=Pe(t,o,r,1,i,s,l,e,Ge,_t,null,at);for(let n=0;n<t.length;n+=1)t[n].a()}},d(i){i&&c(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function jl(a){let e,t=x(a[3].pollViewMetadata.slots),l=[];for(let s=0;s<t.length;s+=1)l[s]=mt(ot(a,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=j()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=j()},m(s,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,r);A(s,e,r)},p(s,r){if(r&10248){t=x(s[3].pollViewMetadata.slots);let i;for(i=0;i<t.length;i+=1){const o=ot(s,t,i);l[i]?l[i].p(o,r):(l[i]=mt(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&c(e),ge(l,s)}}}function _t(a,e){let t,l,s,r,i,o,n,u=e[25].title+"",f,d,_,h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"",v,g,V=e[26]+"",b,E,I,C,U,H=`${e[26]}%`,Y,q,S=O;return{key:a,first:null,c(){t=y("div"),l=y("div"),s=y("img"),o=D(),n=y("p"),f=Q(u),d=D(),_=y("p"),v=Q(h),g=Q(" COMO ("),b=Q(V),E=Q("%)"),I=D(),C=y("div"),U=y("div"),Y=D(),this.h()},l(G){t=k(G,"DIV",{class:!0});var M=w(t);l=k(M,"DIV",{class:!0});var W=w(l);s=k(W,"IMG",{src:!0,alt:!0,class:!0}),o=B(W),n=k(W,"P",{class:!0});var z=w(n);f=P(z,u),z.forEach(c),d=B(W),_=k(W,"P",{});var N=w(_);v=P(N,h),g=P(N," COMO ("),b=P(N,V),E=P(N,"%)"),N.forEach(c),W.forEach(c),I=B(M),C=k(M,"DIV",{class:!0});var ee=w(C);U=k(ee,"DIV",{class:!0}),w(U).forEach(c),ee.forEach(c),Y=B(M),M.forEach(c),this.h()},h(){K(s.src,r=e[25].txImageUrl)||m(s,"src",r),m(s,"alt",i=e[25].title),m(s,"class","svelte-1ut09yc"),m(n,"class","name svelte-1ut09yc"),m(l,"class","choiceTitle svelte-1ut09yc"),m(U,"class","progress svelte-1ut09yc"),L(U,"width",H),m(C,"class","choiceBar svelte-1ut09yc"),m(t,"class","choice svelte-1ut09yc"),this.first=t},m(G,M){A(G,t,M),p(t,l),p(l,s),p(l,o),p(l,n),p(n,f),p(l,d),p(l,_),p(_,v),p(_,g),p(_,b),p(_,E),p(t,I),p(t,C),p(C,U),p(t,Y)},p(G,M){e=G,M&2056&&!K(s.src,r=e[25].txImageUrl)&&m(s,"src",r),M&2056&&i!==(i=e[25].title)&&m(s,"alt",i),M&2056&&u!==(u=e[25].title+"")&&T(f,u),M&2056&&h!==(h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&T(v,h),M&3080&&V!==(V=e[26]+"")&&T(b,V),M&3080&&H!==(H=`${e[26]}%`)&&L(U,"width",H)},r(){q=t.getBoundingClientRect()},f(){Ne(t),S()},a(){S(),S=Re(t,q,Te,{})},d(G){G&&c(t)}}}function dt(a){let e,t,l;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=a[25].roundImageUrl)||m(e,"src",t),m(e,"alt",l=a[25].name),m(e,"class","svelte-1ut09yc")},m(s,r){A(s,e,r)},p(s,r){r&8&&!K(e.src,t=s[25].roundImageUrl)&&m(e,"src",t),r&8&&l!==(l=s[25].name)&&m(e,"alt",l)},d(s){s&&c(e)}}}function vt(a,e){let t,l,s,r,i=e[25].name+"",o,n,u,f=e[13](e[24],e[25].id).toLocaleString("en-US")+"",d,_,h=e[26]+"",v,g,V,b,E,I=`${e[26]}%`,C,U,H=O,Y=e[25].roundImageUrl&&dt(e);return{key:a,first:null,c(){t=y("div"),l=y("div"),Y&&Y.c(),s=D(),r=y("p"),o=Q(i),n=D(),u=y("p"),d=Q(f),_=Q(" COMO ("),v=Q(h),g=Q("%)"),V=D(),b=y("div"),E=y("div"),C=D(),this.h()},l(q){t=k(q,"DIV",{class:!0});var S=w(t);l=k(S,"DIV",{class:!0});var G=w(l);Y&&Y.l(G),s=B(G),r=k(G,"P",{class:!0});var M=w(r);o=P(M,i),M.forEach(c),n=B(G),u=k(G,"P",{});var W=w(u);d=P(W,f),_=P(W," COMO ("),v=P(W,h),g=P(W,"%)"),W.forEach(c),G.forEach(c),V=B(S),b=k(S,"DIV",{class:!0});var z=w(b);E=k(z,"DIV",{class:!0}),w(E).forEach(c),z.forEach(c),C=B(S),S.forEach(c),this.h()},h(){m(r,"class","name svelte-1ut09yc"),m(l,"class","choiceTitle svelte-1ut09yc"),m(E,"class","progress svelte-1ut09yc"),L(E,"width",I),m(b,"class","choiceBar svelte-1ut09yc"),m(t,"class","choice svelte-1ut09yc"),this.first=t},m(q,S){A(q,t,S),p(t,l),Y&&Y.m(l,null),p(l,s),p(l,r),p(r,o),p(l,n),p(l,u),p(u,d),p(u,_),p(u,v),p(u,g),p(t,V),p(t,b),p(b,E),p(t,C)},p(q,S){e=q,e[25].roundImageUrl?Y?Y.p(e,S):(Y=dt(e),Y.c(),Y.m(l,s)):Y&&(Y.d(1),Y=null),S&8&&i!==(i=e[25].name+"")&&T(o,i),S&8&&f!==(f=e[13](e[24],e[25].id).toLocaleString("en-US")+"")&&T(d,f),S&2056&&h!==(h=e[26]+"")&&T(v,h),S&2056&&I!==(I=`${e[26]}%`)&&L(E,"width",I)},r(){U=t.getBoundingClientRect()},f(){Ne(t),H()},a(){H(),H=Re(t,U,Te,{})},d(q){q&&c(t),Y&&Y.d()}}}function pt(a){let e;return{c(){e=y("hr")},l(t){e=k(t,"HR",{})},m(t,l){A(t,e,l)},d(t){t&&c(e)}}}function mt(a){let e,t,l,s,r,i,o=a[22].name+"",n,u,f=[],d=new Map,_,h;function v(...E){return a[17](a[24],...E)}let g=x(a[3].pollViewMetadata.slotChoices.sort(v));const V=E=>E[25];for(let E=0;E<g.length;E+=1){let I=nt(a,g,E),C=V(I);d.set(C,f[E]=vt(C,I))}let b=a[24]<a[3].pollViewMetadata.slots.length-1&&pt();return{c(){e=y("div"),t=y("p"),l=y("img"),i=D(),n=Q(o),u=D();for(let E=0;E<f.length;E+=1)f[E].c();_=D(),b&&b.c(),h=j(),this.h()},l(E){e=k(E,"DIV",{class:!0});var I=w(e);t=k(I,"P",{class:!0});var C=w(t);l=k(C,"IMG",{src:!0,alt:!0,class:!0}),i=B(C),n=P(C,o),C.forEach(c),u=B(I);for(let U=0;U<f.length;U+=1)f[U].l(I);I.forEach(c),_=B(E),b&&b.l(E),h=j(),this.h()},h(){K(l.src,s=a[22].backgroundImageUrl)||m(l,"src",s),m(l,"alt",r=a[22].name),m(l,"class","svelte-1ut09yc"),m(t,"class","slotTitle svelte-1ut09yc"),m(e,"class","slot svelte-1ut09yc")},m(E,I){A(E,e,I),p(e,t),p(t,l),p(t,i),p(t,n),p(e,u);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(e,null);A(E,_,I),b&&b.m(E,I),A(E,h,I)},p(E,I){if(a=E,I&8&&!K(l.src,s=a[22].backgroundImageUrl)&&m(l,"src",s),I&8&&r!==(r=a[22].name)&&m(l,"alt",r),I&8&&o!==(o=a[22].name+"")&&T(n,o),I&10248){g=x(a[3].pollViewMetadata.slotChoices.sort(v));for(let C=0;C<f.length;C+=1)f[C].r();f=Pe(f,I,V,1,a,g,d,e,Ge,vt,null,nt);for(let C=0;C<f.length;C+=1)f[C].a()}a[24]<a[3].pollViewMetadata.slots.length-1?b||(b=pt(),b.c(),b.m(h.parentNode,h)):b&&(b.d(1),b=null)},d(E){E&&(c(e),c(_),c(h));for(let I=0;I<f.length;I+=1)f[I].d();b&&b.d(E)}}}function gt(a){let e,t,l;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=a[0].bannerImageUrl)||m(e,"src",t),m(e,"alt",l=a[0].title),m(e,"class","svelte-1ut09yc")},m(s,r){A(s,e,r)},p(s,r){r&1&&!K(e.src,t=s[0].bannerImageUrl)&&m(e,"src",t),r&1&&l!==(l=s[0].title)&&m(e,"alt",l)},d(s){s&&c(e)}}}function Jl(a){let e,t,l,s,r;return{c(){e=y("div"),t=D(),l=y("div"),s=D(),r=y("div"),this.h()},l(i){e=k(i,"DIV",{class:!0}),w(e).forEach(c),t=B(i),l=k(i,"DIV",{class:!0}),w(l).forEach(c),s=B(i),r=k(i,"DIV",{class:!0}),w(r).forEach(c),this.h()},h(){m(e,"class","itemPlaceholder svelte-1ut09yc"),m(l,"class","itemPlaceholder svelte-1ut09yc"),L(l,"flex","2"),m(r,"class","itemPlaceholder svelte-1ut09yc"),L(r,"flex","1")},m(i,o){A(i,e,o),A(i,t,o),A(i,l,o),A(i,s,o),A(i,r,o)},p:O,i:O,o:O,d(i){i&&(c(e),c(t),c(l),c(s),c(r))}}}function Hl(a){let e,t,l=a[12]("gravity.totalcomo")+"",s,r,i,o,n,u,f,d,_=a[10]!==void 0&&bt(a);o=new _l({props:{voteStart:Date.parse(a[3].startDate),contract:a[5].target.toString(),poll:a[3],pollId:a[6],artist:a[1]}});function h(g){a[19](g)}let v={artist:a[1]};return a[4]!==void 0&&(v.gravities=a[4]),u=new Dl({props:v}),kt.push(()=>wt(u,"gravities",h)),{c(){e=y("div"),t=y("b"),s=Q(l),r=D(),_&&_.c(),i=D(),Ae(o.$$.fragment),n=D(),Ae(u.$$.fragment),this.h()},l(g){e=k(g,"DIV",{class:!0});var V=w(e);t=k(V,"B",{class:!0});var b=w(t);s=P(b,l),b.forEach(c),r=B(V),_&&_.l(V),V.forEach(c),i=B(g),Ve(o.$$.fragment,g),n=B(g),Ve(u.$$.fragment,g),this.h()},h(){m(t,"class","svelte-1ut09yc"),m(e,"class","item total svelte-1ut09yc")},m(g,V){A(g,e,V),p(e,t),p(t,s),p(e,r),_&&_.m(e,null),A(g,i,V),Ie(o,g,V),A(g,n,V),Ie(u,g,V),d=!0},p(g,V){(!d||V&4096)&&l!==(l=g[12]("gravity.totalcomo")+"")&&T(s,l),g[10]!==void 0?_?_.p(g,V):(_=bt(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null);const b={};V&8&&(b.voteStart=Date.parse(g[3].startDate)),V&32&&(b.contract=g[5].target.toString()),V&8&&(b.poll=g[3]),V&64&&(b.pollId=g[6]),V&2&&(b.artist=g[1]),o.$set(b);const E={};V&2&&(E.artist=g[1]),!f&&V&16&&(f=!0,E.gravities=g[4],Et(()=>f=!1)),u.$set(E)},i(g){d||(re(o.$$.fragment,g),re(u.$$.fragment,g),d=!0)},o(g){ie(o.$$.fragment,g),ie(u.$$.fragment,g),d=!1},d(g){g&&(c(e),c(i),c(n)),_&&_.d(),De(o,g),De(u,g)}}}function bt(a){let e,t=a[10].toLocaleString("en-US")+"",l,s,r,i;return{c(){e=y("p"),l=Q(t),s=D(),r=y("img"),this.h()},l(o){e=k(o,"P",{});var n=w(e);l=P(n,t),n.forEach(c),s=B(o),r=k(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(r.src,i=Qe(a[1]).como)||m(r,"src",i),m(r,"alt","COMO"),m(r,"class","svelte-1ut09yc")},m(o,n){A(o,e,n),p(e,l),A(o,s,n),A(o,r,n)},p(o,n){n&1024&&t!==(t=o[10].toLocaleString("en-US")+"")&&T(l,t),n&2&&!K(r.src,i=Qe(o[1]).como)&&m(r,"src",i)},d(o){o&&(c(e),c(s),c(r))}}}function Zl(a){let e,t,l,s,r,i,o,n,u,f,d,_,h,v,g,V,b,E,I,C,U=a[0]&&ct(a);const H=[Cl,Bl],Y=[];function q(F,Z){return F[1]?0:1}o=q(a),n=Y[o]=H[o](a);function S(F,Z){return F[0]?Fl:Sl}let G=S(a),M=G(a);function W(F,Z){return F[0]?Ql:Wl}let z=W(a),N=z(a);function ee(F,Z){return F[0]&&F[3]?Gl:Pl}let X=ee(a),R=X(a);const le=[Rl,Ol],J=[];function $(F,Z){return F[3]?0:1}v=$(a),g=J[v]=le[v](a);const ue=[Hl,Jl],ae=[];function Le(F,Z){return F[3]&&F[1]?0:1}return E=Le(a),I=ae[E]=ue[E](a),{c(){U&&U.c(),e=j(),t=D(),l=y("div"),s=y("div"),r=y("div"),i=y("div"),n.c(),u=D(),M.c(),f=D(),N.c(),d=D(),_=y("div"),R.c(),h=D(),g.c(),V=D(),b=y("div"),I.c(),this.h()},l(F){const Z=Ut("svelte-1pdh1or",document.head);U&&U.l(Z),e=j(),Z.forEach(c),t=B(F),l=k(F,"DIV",{class:!0});var he=w(l);s=k(he,"DIV",{class:!0});var _e=w(s);r=k(_e,"DIV",{class:!0});var oe=w(r);i=k(oe,"DIV",{class:!0});var ye=w(i);n.l(ye),u=B(ye),M.l(ye),ye.forEach(c),f=B(oe),N.l(oe),d=B(oe),_=k(oe,"DIV",{class:!0});var je=w(_);R.l(je),je.forEach(c),oe.forEach(c),h=B(_e),g.l(_e),_e.forEach(c),V=B(he),b=k(he,"DIV",{class:!0});var Je=w(b);I.l(Je),Je.forEach(c),he.forEach(c),this.h()},h(){m(i,"class","headerSection svelte-1ut09yc"),m(_,"class","headerSection svelte-1ut09yc"),m(r,"class","header svelte-1ut09yc"),m(s,"class","main svelte-1ut09yc"),m(b,"class","sidebar svelte-1ut09yc"),m(l,"class","layout svelte-1ut09yc")},m(F,Z){U&&U.m(document.head,null),p(document.head,e),A(F,t,Z),A(F,l,Z),p(l,s),p(s,r),p(r,i),Y[o].m(i,null),p(i,u),M.m(i,null),p(r,f),N.m(r,null),p(r,d),p(r,_),R.m(_,null),p(s,h),J[v].m(s,null),p(l,V),p(l,b),ae[E].m(b,null),C=!0},p(F,[Z]){F[0]?U?U.p(F,Z):(U=ct(F),U.c(),U.m(e.parentNode,e)):U&&(U.d(1),U=null);let he=o;o=q(F),o===he?Y[o].p(F,Z):(we(),ie(Y[he],1,1,()=>{Y[he]=null}),Ee(),n=Y[o],n?n.p(F,Z):(n=Y[o]=H[o](F),n.c()),re(n,1),n.m(i,u)),G===(G=S(F))&&M?M.p(F,Z):(M.d(1),M=G(F),M&&(M.c(),M.m(i,null))),z===(z=W(F))&&N?N.p(F,Z):(N.d(1),N=z(F),N&&(N.c(),N.m(r,d))),X===(X=ee(F))&&R?R.p(F,Z):(R.d(1),R=X(F),R&&(R.c(),R.m(_,null)));let _e=v;v=$(F),v===_e?J[v].p(F,Z):(we(),ie(J[_e],1,1,()=>{J[_e]=null}),Ee(),g=J[v],g?g.p(F,Z):(g=J[v]=le[v](F),g.c()),re(g,1),g.m(s,null));let oe=E;E=Le(F),E===oe?ae[E].p(F,Z):(we(),ie(ae[oe],1,1,()=>{ae[oe]=null}),Ee(),I=ae[E],I?I.p(F,Z):(I=ae[E]=ue[E](F),I.c()),re(I,1),I.m(b,null))},i(F){C||(re(n),re(g),re(I),C=!0)},o(F){ie(n),ie(g),ie(I),C=!1},d(F){F&&(c(t),c(l)),U&&U.d(F),c(e),Y[o].d(),M.d(),N.d(),R.d(),J[v].d(),ae[E].d()}}}function Xl(a,e,t){let l,s;me(a,Tt,S=>t(2,l=S)),me(a,Ue,S=>t(12,s=S));let r,i,o,n,u,f,d,_=-1,h,v,g,V,b;async function E(){if(l.params.id)if(n&&n.find(S=>S.id===Number(l.params.id)))t(0,r=n.find(S=>S.id===Number(l.params.id)));else{const S=await fetch(`${ve.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,r=(await S.json()).gravity)}else{const G=await(await fetch(`${ve.URL}/gravity/v3/${l.params.artist||""}`)).json();G.ongoing.length?t(0,r=G.ongoing[0]):G.upcoming.length?t(0,r=G.upcoming.at(-1)):t(0,r=G.past[0]),t(4,n=[...G.upcoming,...G.ongoing,...G.past].filter(M=>M.artist===(r==null?void 0:r.artist)))}t(1,o=(await ve.artists()).find(S=>S.name===(r==null?void 0:r.artist))),I()}async function I(){var le;t(7,_=-1);const S=r==null?void 0:r.polls.sort((J,$)=>Date.parse(J.startDate)-Date.parse($.startDate)),G=l.params.pollId||((le=(r==null?void 0:r.polls.find(J=>!J.finalized))||(S==null?void 0:S.at(-1)))==null?void 0:le.id),W=(await(await fetch(`${ve.URL}/gravity/v3/${r==null?void 0:r.artist}/gravity/${r==null?void 0:r.id}/polls/${G}`)).json()).pollDetail;t(5,u=new Ze(o.contracts.Governor,ke.ABI.Governor,ke.RPC)),t(6,f=W.pollIdOnChain||W.id),(await u.candidates(f)).toString().replaceAll("\b","")!==W.choices.map(J=>J.id).toString().replaceAll("\b","")&&t(6,f-=1);const N=new Ze(o.contracts.Governor,ke.ABI.Governor,new tl(ke.RPC)),[ee,X,R]=await Promise.all([N.polls(f),N.totalVotes(f),N.votesPerCandidates(f)]);t(8,h=Number(ee.revealedVotes)),t(9,v=Number(X)),t(10,g=Number(fe(ee.totalVotedCOMO))),t(11,V=R),(Date.parse(W.endDate)>Date.now()||h<v)&&(window.clearInterval(d),t(7,_=Date.parse(W.endDate)-Date.now()),t(14,d=window.setInterval(async()=>{if(Date.parse(W.endDate)>Date.now()){t(7,_=Date.parse(W.endDate)-Date.now());const[J,$]=await Promise.all([N.polls(f),N.totalVotes(f)]);t(10,g=Number(fe(J.totalVotedCOMO))),t(9,v=Number($))}else if(v===h)window.clearInterval(d);else{t(7,_=-1);const[J,$]=await Promise.all([N.polls(f),N.votesPerCandidates(f)]);Number(J.revealedVotes)>h&&(t(8,h=Number(J.revealedVotes)),t(11,V=$))}},1e3))),t(3,i=W)}function C(S,G){var M;return(M=i==null?void 0:i.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:M.filter(W=>W.slotChoiceIds[S]===G).reduce((W,z)=>{var ee;const N=(ee=i==null?void 0:i.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:ee.indexOf(z);return W+Number(fe(V[N]))},0)}yt(()=>window.clearInterval(d));function U(S){o=S,t(1,o),t(2,l),t(15,b),t(14,d)}const H=(S,G,M)=>C(S,M.id)-C(S,G.id),Y=(S,G)=>Number(V[(i==null?void 0:i.choices.indexOf(G))||0])-Number(V[(i==null?void 0:i.choices.indexOf(S))||0]);function q(S){n=S,t(4,n),t(2,l),t(15,b),t(1,o),t(14,d)}return a.$$.update=()=>{a.$$.dirty&49158&&(l.params!==b&&(!b||l.params.id!==b.id||l.params.artist!==b.artist?(o&&o.name!==l.params.artist&&t(1,o=t(4,n=void 0)),t(0,r=void 0),t(3,i=void 0),window.clearInterval(d),E()):l.params.pollId!==b.pollId&&(t(3,i=void 0),window.clearInterval(d),I())),t(15,b=l.params)),a.$$.dirty&3&&o&&r&&r.artist!==o.name&&Nt(`/gravity/${o.name}`)},[r,o,l,i,n,u,f,_,h,v,g,V,s,C,d,b,U,H,Y,q]}class rs extends Se{constructor(e){super(),Fe(this,e,Xl,Zl,be,{})}}export{rs as component,is as universal};
