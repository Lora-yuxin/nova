import{n as J,H as Wt,i as Yt,s as Ve,c as Ie,o as Bt,e as se,y as Nt,b as Dt,d as Ct}from"../chunks/scheduler.nSpB3e7h.js";import{J as Rt,d,K as Qt,S as Qe,i as Ge,w as ee,g as A,e as b,t as L,s as D,c as w,a as I,b as j,f as C,u as v,h as g,j as z,v as Ae,y as K,E as Gt,x as xe,D as Ot,o as ue,A as Ce,n as de,B as Fe,q as Ft,k as Pe,l as Ue,m as We,p as Ye,r as Le,H as Tt,I as Lt}from"../chunks/index.EYyPxix3.js";import{q as jt,r as qt,A as Jt,s as Ht,u as Te,b as Zt,$ as Oe,S as Me,C as we,e as oe,v as qe,w as Je,j as zt,x as et,P as Be}from"../chunks/apis.rP1ghAGS.js";import{g as Xt}from"../chunks/entry.CyaNftUv.js";import{p as Kt}from"../chunks/stores.A-fmoV-4.js";import{A as $t}from"../chunks/ArtistSelector.B512vCz4.js";import{g as je}from"../chunks/assets.Kq_R9HF9.js";import{f as me}from"../chunks/units.XFe2sYSS.js";import{p as xt}from"../chunks/polygonscan.3rzyozVp.js";const Mt=typeof window<"u";let el=Mt?()=>window.performance.now():()=>Date.now(),He=Mt?i=>requestAnimationFrame(i):J;const ke=new Set;function Pt(i){ke.forEach(e=>{e.c(i)||(ke.delete(e),e.f())}),ke.size!==0&&He(Pt)}function tl(i){let e;return ke.size===0&&He(Pt),{promise:new Promise(t=>{ke.add(e={c:i,f:t})}),abort(){ke.delete(e)}}}const Ne=new Map;let Re=0;function ll(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function rl(i,e){const t={stylesheet:Qt(e),rules:{}};return Ne.set(i,t),t}function il(i,e,t,l,r,s,o,n=0){const a=16.666/l;let h=`{
`;for(let S=0;S<=1;S+=a){const k=e+(t-e)*s(S);h+=S*100+`%{${o(k,1-k)}}
`}const f=h+`100% {${o(t,1-t)}}
}`,p=`__svelte_${ll(f)}_${n}`,u=Rt(i),{stylesheet:c,rules:_}=Ne.get(u)||rl(u,i);_[p]||(_[p]=!0,c.insertRule(`@keyframes ${p} ${f}`,c.cssRules.length));const m=i.style.animation||"";return i.style.animation=`${m?`${m}, `:""}${p} ${l}ms linear ${r}ms 1 both`,Re+=1,p}function sl(i,e){const t=(i.style.animation||"").split(", "),l=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=t.length-l.length;r&&(i.style.animation=l.join(", "),Re-=r,Re||ol())}function ol(){He(()=>{Re||(Ne.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&d(e)}),Ne.clear())})}function Ze(i,e,t,l){if(!e)return J;const r=i.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return J;const{delay:s=0,duration:o=300,easing:n=Wt,start:a=el()+s,end:h=a+o,tick:f=J,css:p}=t(i,{from:e,to:r},l);let u=!0,c=!1,_;function m(){p&&(_=il(i,0,1,o,s,n,p)),s||(c=!0)}function S(){p&&sl(i,_),u=!1}return tl(k=>{if(!c&&k>=a&&(c=!0),c&&k>=h&&(f(1,0),S()),!u)return!1;if(c){const y=k-a,V=0+1*n(y/o);f(V,1-V)}return!0}),m(),f(0,1),S}function ze(i){const e=getComputedStyle(i);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,r=i.getBoundingClientRect();i.style.position="absolute",i.style.width=t,i.style.height=l,nl(i,r)}}function nl(i,e){const t=i.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(i),r=l.transform==="none"?"":l.transform;i.style.transform=`${r} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function al({params:i}){return i}const br=Object.freeze(Object.defineProperty({__proto__:null,load:al},Symbol.toStringTag,{value:"Module"})),cl=jt(qt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var tt=function(i,e,t,l){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function n(f){try{h(l.next(f))}catch(p){o(p)}}function a(f){try{h(l.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):r(f.value).then(n,a)}h((l=l.apply(i,e||[])).next())})},_e=function(i,e,t,l,r){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},ne=function(i,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!l:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(i):l?l.value:e.get(i)},ve,pe,ce;class fl extends Jt{constructor(e){super(),ve.set(this,void 0),pe.set(this,void 0),ce.set(this,void 0),this.subprovider=e,_e(this,ve,[],"f"),_e(this,pe,10,"f"),_e(this,ce,null,"f")}get drainInterval(){return ne(this,pe,"f")}set drainInterval(e){e<0&&(e=-1),e!==ne(this,pe,"f")&&(_e(this,pe,e,"f"),ne(this,pe,"f")>=0?(ne(this,ce,"f")&&(clearTimeout(ne(this,ce,"f")),_e(this,ce,null,"f")),ne(this,ve,"f").length&&_e(this,ce,setTimeout(()=>{this.drainCallQueue()},ne(this,pe,"f")),"f")):ne(this,ce,"f")&&(clearTimeout(ne(this,ce,"f")),_e(this,ce,null,"f")))}queueCall(e,t){return ne(this,ce,"f")==null&&ne(this,pe,"f")>=0&&_e(this,ce,setTimeout(()=>{this.drainCallQueue()},ne(this,pe,"f")),"f"),new Promise((l,r)=>{ne(this,ve,"f").push({request:{to:e,data:t},resolve:l,reject:r})})}drainCallQueue(){return tt(this,void 0,void 0,function*(){_e(this,ce,null,"f");const e=ne(this,ve,"f");_e(this,ve,[],"f");const t=Ht([cl,Te.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:n})=>[n.to,n.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:n})=>({to:n.to,data:n.data}))});const l=yield this.subprovider.call({data:t}),[r,s]=Te.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:n},a)=>({to:n.to,data:n.data,status:s[a][0],result:s[a][1]}))});const o=[];for(let n=0;n<e.length;n++){const a=s[n],{resolve:h}=e[n];h({status:a[0],data:a[1]}),o.push({status:a[0],data:a[1]})}return o})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return tt(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,r=t.data||"0x";Zt(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const s=yield this.queueCall(l,r);if(s.status)return s.data;throw Te.getBuiltinCallException("call",{to:l,data:r},s.data)}return yield this.subprovider._perform(e)})}}ve=new WeakMap,pe=new WeakMap,ce=new WeakMap;function ul(i){const e=i-1;return e*e*e+1}function Xe(i,{from:e,to:t},l={}){const r=getComputedStyle(i),s=r.transform==="none"?"":r.transform,[o,n]=r.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*o/t.width-(t.left+o),h=e.top+e.height*n/t.height-(t.top+n),{delay:f=0,duration:p=c=>Math.sqrt(c)*120,easing:u=ul}=l;return{delay:f,duration:Yt(p)?p(Math.sqrt(a*a+h*h)):p,easing:u,css:(c,_)=>{const m=_*a,S=_*h,k=c+_*e.width/t.width,y=c+_*e.height/t.height;return`transform: ${s} translate(${m}px, ${S}px) scale(${k}, ${y});`}}}function ae(i){return i===null?"null":Array.isArray(i)?"array":typeof i}function ye(i){return ae(i)==="object"}function dl(i){return Array.isArray(i)&&i.length>0&&i.every(e=>"message"in e)}function lt(i,e){return i.length<124?i:e}const hl="graphql-transport-ws";var fe;(function(i){i[i.InternalServerError=4500]="InternalServerError",i[i.InternalClientError=4005]="InternalClientError",i[i.BadRequest=4400]="BadRequest",i[i.BadResponse=4004]="BadResponse",i[i.Unauthorized=4401]="Unauthorized",i[i.Forbidden=4403]="Forbidden",i[i.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",i[i.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",i[i.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",i[i.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",i[i.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(fe||(fe={}));var le;(function(i){i.ConnectionInit="connection_init",i.ConnectionAck="connection_ack",i.Ping="ping",i.Pong="pong",i.Subscribe="subscribe",i.Next="next",i.Error="error",i.Complete="complete"})(le||(le={}));function Ut(i){if(!ye(i))throw new Error(`Message is expected to be an object, but got ${ae(i)}`);if(!i.type)throw new Error("Message is missing the 'type' property");if(typeof i.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${ae(i.type)}`);switch(i.type){case le.ConnectionInit:case le.ConnectionAck:case le.Ping:case le.Pong:{if(i.payload!=null&&!ye(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${i.payload}"`);break}case le.Subscribe:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ae(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!ye(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object, but got ${ae(i.payload)}`);if(typeof i.payload.query!="string")throw new Error(`"${i.type}" message payload expects the 'query' property to be a string, but got ${ae(i.payload.query)}`);if(i.payload.variables!=null&&!ye(i.payload.variables))throw new Error(`"${i.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${ae(i.payload.variables)}`);if(i.payload.operationName!=null&&ae(i.payload.operationName)!=="string")throw new Error(`"${i.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${ae(i.payload.operationName)}`);if(i.payload.extensions!=null&&!ye(i.payload.extensions))throw new Error(`"${i.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${ae(i.payload.extensions)}`);break}case le.Next:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ae(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!ye(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object, but got ${ae(i.payload)}`);break}case le.Error:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ae(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!dl(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(i.payload)}`);break}case le.Complete:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ae(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${i.type}"`)}return i}function _l(i,e){return Ut(typeof i=="string"?JSON.parse(i,e):i)}function Se(i,e){return Ut(i),JSON.stringify(i,e)}var Ee=function(i){return this instanceof Ee?(this.v=i,this):new Ee(i)},pl=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=t.apply(i,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(u){l[u]&&(r[u]=function(c){return new Promise(function(_,m){s.push([u,c,_,m])>1||n(u,c)})})}function n(u,c){try{a(l[u](c))}catch(_){p(s[0][3],_)}}function a(u){u.value instanceof Ee?Promise.resolve(u.value.v).then(h,f):p(s[0][2],u)}function h(u){n("next",u)}function f(u){n("throw",u)}function p(u,c){u(c),s.shift(),s.length&&n(s[0][0],s[0][1])}};function ml(i){const{url:e,connectionParams:t,lazy:l=!0,onNonLazyError:r=console.error,lazyCloseTimeout:s=0,keepAlive:o=0,disablePong:n,connectionAckWaitTimeout:a=0,retryAttempts:h=5,retryWait:f=async function(G){let B=1e3;for(let N=0;N<G;N++)B*=2;await new Promise(N=>setTimeout(N,B+Math.floor(Math.random()*2700+300)))},shouldRetry:p=De,isFatalConnectionProblem:u,on:c,webSocketImpl:_,generateID:m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,G=>{const B=Math.random()*16|0;return(G=="x"?B:B&3|8).toString(16)})},jsonMessageReplacer:S,jsonMessageReviver:k}=i;let y;if(_){if(!vl(_))throw new Error("Invalid WebSocket implementation provided");y=_}else typeof WebSocket<"u"?y=WebSocket:typeof global<"u"?y=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(y=window.WebSocket||window.MozWebSocket);if(!y)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const V=y,E=(()=>{const W=(()=>{const B={};return{on(N,Y){return B[N]=Y,()=>{delete B[N]}},emit(N){var Y;"id"in N&&((Y=B[N.id])===null||Y===void 0||Y.call(B,N))}}})(),G={connecting:c!=null&&c.connecting?[c.connecting]:[],opened:c!=null&&c.opened?[c.opened]:[],connected:c!=null&&c.connected?[c.connected]:[],ping:c!=null&&c.ping?[c.ping]:[],pong:c!=null&&c.pong?[c.pong]:[],message:c!=null&&c.message?[W.emit,c.message]:[W.emit],closed:c!=null&&c.closed?[c.closed]:[],error:c!=null&&c.error?[c.error]:[]};return{onMessage:W.on,on(B,N){const Y=G[B];return Y.push(N),()=>{Y.splice(Y.indexOf(N),1)}},emit(B,...N){for(const Y of[...G[B]])Y(...N)}}})();function U(W){const G=[E.on("error",B=>{G.forEach(N=>N()),W(B)}),E.on("closed",B=>{G.forEach(N=>N()),W(B)})]}let T,M=0,te,F=!1,Q=0,R=!1;async function O(){clearTimeout(te);const[W,G]=await(T??(T=new Promise((Y,Z)=>(async()=>{if(F){if(await f(Q),!M)return T=void 0,Z({code:1e3,reason:"All Subscriptions Gone"});Q++}E.emit("connecting");const q=new V(typeof e=="function"?await e():e,hl);let re,ge;function P(){isFinite(o)&&o>0&&(clearTimeout(ge),ge=setTimeout(()=>{q.readyState===V.OPEN&&(q.send(Se({type:le.Ping})),E.emit("ping",!1,void 0))},o))}U($=>{T=void 0,clearTimeout(re),clearTimeout(ge),Z($),De($)&&$.code===4499&&(q.close(4499,"Terminated"),q.onerror=null,q.onclose=null)}),q.onerror=$=>E.emit("error",$),q.onclose=$=>E.emit("closed",$),q.onopen=async()=>{try{E.emit("opened",q);const $=typeof t=="function"?await t():t;if(q.readyState!==V.OPEN)return;q.send(Se($?{type:le.ConnectionInit,payload:$}:{type:le.ConnectionInit},S)),isFinite(a)&&a>0&&(re=setTimeout(()=>{q.close(fe.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},a)),P()}catch($){E.emit("error",$),q.close(fe.InternalClientError,lt($ instanceof Error?$.message:new Error($).message,"Internal client error"))}};let X=!1;q.onmessage=({data:$})=>{try{const x=_l($,k);if(E.emit("message",x),x.type==="ping"||x.type==="pong"){E.emit(x.type,!0,x.payload),x.type==="pong"?P():n||(q.send(Se(x.payload?{type:le.Pong,payload:x.payload}:{type:le.Pong})),E.emit("pong",!1,x.payload));return}if(X)return;if(x.type!==le.ConnectionAck)throw new Error(`First message cannot be of type ${x.type}`);clearTimeout(re),X=!0,E.emit("connected",q,x.payload),F=!1,Q=0,Y([q,new Promise((he,be)=>U(be))])}catch(x){q.onmessage=null,E.emit("error",x),q.close(fe.BadResponse,lt(x instanceof Error?x.message:new Error(x).message,"Bad response"))}}})())));W.readyState===V.CLOSING&&await G;let B=()=>{};const N=new Promise(Y=>B=Y);return[W,B,Promise.race([N.then(()=>{if(!M){const Y=()=>W.close(1e3,"Normal Closure");isFinite(s)&&s>0?te=setTimeout(()=>{W.readyState===V.OPEN&&Y()},s):Y()}}),G])]}function ie(W){if(De(W)&&(gl(W.code)||[fe.InternalServerError,fe.InternalClientError,fe.BadRequest,fe.BadResponse,fe.Unauthorized,fe.SubprotocolNotAcceptable,fe.SubscriberAlreadyExists,fe.TooManyInitialisationRequests].includes(W.code)))throw W;if(R)return!1;if(De(W)&&W.code===1e3)return M>0;if(!h||Q>=h||!p(W)||u!=null&&u(W))throw W;return F=!0}l||(async()=>{for(M++;;)try{const[,,W]=await O();await W}catch(W){try{if(!ie(W))return}catch(G){return r==null?void 0:r(G)}}})();function H(W,G){const B=m(W);let N=!1,Y=!1,Z=()=>{M--,N=!0};return(async()=>{for(M++;;)try{const[q,re,ge]=await O();if(N)return re();const P=E.onMessage(B,X=>{switch(X.type){case le.Next:{G.next(X.payload);return}case le.Error:{Y=!0,N=!0,G.error(X.payload),Z();return}case le.Complete:{N=!0,Z();return}}});q.send(Se({id:B,type:le.Subscribe,payload:W},S)),Z=()=>{!N&&q.readyState===V.OPEN&&q.send(Se({id:B,type:le.Complete},S)),M--,N=!0,re()},await ge.finally(P);return}catch(q){if(!ie(q))return}})().then(()=>{Y||G.complete()}).catch(q=>{G.error(q)}),()=>{N||Z()}}return{on:E.on,subscribe:H,iterate(W){const G=[],B={done:!1,error:null,resolve:()=>{}},N=H(W,{next(Z){G.push(Z),B.resolve()},error(Z){B.done=!0,B.error=Z,B.resolve()},complete(){B.done=!0,B.resolve()}}),Y=function(){return pl(this,arguments,function*(){for(;;){for(G.length||(yield Ee(new Promise(re=>B.resolve=re)));G.length;)yield yield Ee(G.shift());if(B.error)throw B.error;if(B.done)return yield Ee(void 0)}})}();return Y.throw=async Z=>(B.done||(B.done=!0,B.error=Z,B.resolve()),{done:!0,value:void 0}),Y.return=async()=>(N(),{done:!0,value:void 0}),Y},async dispose(){if(R=!0,T){const[W]=await T;W.close(1e3,"Normal Closure")}},terminate(){T&&E.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function De(i){return ye(i)&&"code"in i&&"reason"in i}function gl(i){return[1e3,1001,1006,1005,1012,1013,1014].includes(i)?!1:i>=1e3&&i<=1999}function vl(i){return typeof i=="function"&&"constructor"in i&&"CLOSED"in i&&"CLOSING"in i&&"CONNECTING"in i&&"OPEN"in i}function yl(i,e,t){const l=i.slice();return l[21]=e[t],l[20]=t,l}function rt(i,e,t){const l=i.slice();l[17]=e[t],l[20]=t;const r=l[3].find(function(...o){return i[10](l[17],...o)});return l[18]=r,l}function bl(i){let e,t,l,r=i[4]("gravity.votes.title")+"",s,o,n,a=i[4]("gravity.votes.subtitle")+"",h,f;function p(_,m){return _[2].length?El:kl}let u=p(i),c=u(i);return{c(){e=b("div"),t=b("div"),l=b("b"),s=L(r),o=D(),n=b("p"),h=L(a),f=D(),c.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var m=I(e);t=w(m,"DIV",{class:!0});var S=I(t);l=w(S,"B",{});var k=I(l);s=j(k,r),k.forEach(d),o=C(S),n=w(S,"P",{});var y=I(n);h=j(y,a),y.forEach(d),S.forEach(d),f=C(m),c.l(m),m.forEach(d),this.h()},h(){v(t,"class","header svelte-1tn5l0x"),v(e,"class","votes svelte-1tn5l0x")},m(_,m){A(_,e,m),g(e,t),g(t,l),g(l,s),g(t,o),g(t,n),g(n,h),g(e,f),c.m(e,null)},p(_,m){m&16&&r!==(r=_[4]("gravity.votes.title")+"")&&z(s,r),m&16&&a!==(a=_[4]("gravity.votes.subtitle")+"")&&z(h,a),u===(u=p(_))&&c?c.p(_,m):(c.d(1),c=u(_),c&&(c.c(),c.m(e,null)))},d(_){_&&d(e),c.d()}}}function wl(i){let e,t,l=i[4]("gravity.votes.countdown")+"",r,s,o,n=String(Math.floor(i[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[1]%(60*1e3)/1e3)).padStart(2,"0"),a;return{c(){e=b("div"),t=b("p"),r=L(l),s=D(),o=b("h3"),a=L(n),this.h()},l(h){e=w(h,"DIV",{class:!0});var f=I(e);t=w(f,"P",{});var p=I(t);r=j(p,l),p.forEach(d),s=C(f),o=w(f,"H3",{class:!0});var u=I(o);a=j(u,n),u.forEach(d),f.forEach(d),this.h()},h(){v(o,"class","svelte-1tn5l0x"),v(e,"class","countdown svelte-1tn5l0x")},m(h,f){A(h,e,f),g(e,t),g(t,r),g(e,s),g(e,o),g(o,a)},p(h,f){f&16&&l!==(l=h[4]("gravity.votes.countdown")+"")&&z(r,l),f&2&&n!==(n=String(Math.floor(h[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(h[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(h[1]%(60*1e3)/1e3)).padStart(2,"0"))&&z(a,n)},d(h){h&&d(e)}}}function kl(i){let e,t=oe({length:50}),l=[];for(let r=0;r<t.length;r+=1)l[r]=Il(yl(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p:J,d(r){r&&d(e),Ae(l,r)}}}function El(i){let e=[],t=new Map,l,r=oe(i[2]);const s=o=>o[17].id;for(let o=0;o<r.length;o+=1){let n=rt(i,r,o),a=s(n);t.set(a,e[o]=it(a,n))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=ee()},l(o){for(let n=0;n<e.length;n+=1)e[n].l(o);l=ee()},m(o,n){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,n);A(o,l,n)},p(o,n){if(n&61){r=oe(o[2]);for(let a=0;a<e.length;a+=1)e[a].r();e=qe(e,n,s,1,o,r,t,l.parentNode,Je,it,l,rt);for(let a=0;a<e.length;a+=1)e[a].a()}},d(o){o&&d(l);for(let n=0;n<e.length;n+=1)e[n].d(o)}}}function Il(i){let e,t,l,r,s,o,n,a,h,f;return{c(){e=b("div"),t=b("div"),l=D(),r=b("div"),s=D(),o=b("div"),n=b("div"),a=D(),h=b("div"),f=D(),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=I(e);t=w(u,"DIV",{class:!0}),I(t).forEach(d),l=C(u),r=w(u,"DIV",{class:!0}),I(r).forEach(d),s=C(u),o=w(u,"DIV",{class:!0});var c=I(o);n=w(c,"DIV",{class:!0}),I(n).forEach(d),a=C(c),h=w(c,"DIV",{class:!0}),I(h).forEach(d),c.forEach(d),f=C(u),u.forEach(d),this.h()},h(){v(t,"class","placeholder svelte-1tn5l0x"),K(t,"width","110px"),K(t,"margin-right","auto"),v(r,"class","placeholder svelte-1tn5l0x"),K(r,"width","60px"),v(n,"class","placeholder svelte-1tn5l0x"),K(n,"width","40px"),v(h,"class","placeholder svelte-1tn5l0x"),K(h,"width","110px"),v(o,"class","details svelte-1tn5l0x"),v(e,"class","vote svelte-1tn5l0x")},m(p,u){A(p,e,u),g(e,t),g(e,l),g(e,r),g(e,s),g(e,o),g(o,n),g(o,a),g(o,h),g(e,f)},p:J,d(p){p&&d(e)}}}function Al(i){let e,t=i[4]("gravity.votes.unrevealed")+"",l;return{c(){e=b("i"),l=L(t),this.h()},l(r){e=w(r,"I",{class:!0});var s=I(e);l=j(s,t),s.forEach(d),this.h()},h(){v(e,"class","candidate svelte-1tn5l0x")},m(r,s){A(r,e,s),g(e,l)},p(r,s){s&16&&t!==(t=r[4]("gravity.votes.unrevealed")+"")&&z(l,t)},d(r){r&&d(e)}}}function Sl(i){let e,t,l,r,s=(i[0].choices[i[17].candidate].title||st(i[0],i[17].candidate))+"",o;return{c(){e=b("p"),t=b("img"),r=D(),o=L(s),this.h()},l(n){e=w(n,"P",{class:!0});var a=I(e);t=w(a,"IMG",{src:!0,alt:!0,class:!0}),r=C(a),o=j(a,s),a.forEach(d),this.h()},h(){se(t.src,l=i[0].choices[i[17].candidate].txImageUrl)||v(t,"src",l),v(t,"alt","Choice"),v(t,"class","svelte-1tn5l0x"),v(e,"class","candidate svelte-1tn5l0x")},m(n,a){A(n,e,a),g(e,t),g(e,r),g(e,o)},p(n,a){a&5&&!se(t.src,l=n[0].choices[n[17].candidate].txImageUrl)&&v(t,"src",l),a&5&&s!==(s=(n[0].choices[n[17].candidate].title||st(n[0],n[17].candidate))+"")&&z(o,s)},d(n){n&&d(e)}}}function it(i,e){var ie,H,W;let t,l,r,s,o,n=(((ie=e[18])==null?void 0:ie.nickname)||((H=e[18])==null?void 0:H.address.slice(0,6))+"..."+((W=e[18])==null?void 0:W.address.slice(-4)))+"",a,h,f,p,u=Number(me(e[17].amount)).toLocaleString("en-US")+"",c,_,m,S,k,y,V,E=new Date(Number(e[17].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",U,T,M,te,F=J;function Q(G,B){return G[17].candidate!==null?Sl:Al}let R=Q(e),O=R(e);return{key:i,first:null,c(){t=b("div"),l=b("a"),r=b("img"),o=D(),a=L(n),f=D(),p=b("p"),c=L(u),_=D(),m=b("img"),k=D(),y=b("div"),V=b("span"),U=L(E),T=D(),O.c(),M=D(),this.h()},l(G){t=w(G,"DIV",{class:!0});var B=I(t);l=w(B,"A",{href:!0,class:!0});var N=I(l);r=w(N,"IMG",{class:!0,src:!0,alt:!0}),o=C(N),a=j(N,n),N.forEach(d),f=C(B),p=w(B,"P",{});var Y=I(p);c=j(Y,u),Y.forEach(d),_=C(B),m=w(B,"IMG",{src:!0,alt:!0,class:!0}),k=C(B),y=w(B,"DIV",{class:!0});var Z=I(y);V=w(Z,"SPAN",{});var q=I(V);U=j(q,E),q.forEach(d),T=C(Z),O.l(Z),Z.forEach(d),M=C(B),B.forEach(d),this.h()},h(){var G,B;v(r,"class","profileImage svelte-1tn5l0x"),se(r.src,s="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||v(r,"src",s),v(r,"alt","User"),v(l,"href",h="/@"+(((G=e[18])==null?void 0:G.nickname)||((B=e[18])==null?void 0:B.address))),v(l,"class","svelte-1tn5l0x"),se(m.src,S=e[5])||v(m,"src",S),v(m,"alt","COMO"),v(m,"class","svelte-1tn5l0x"),v(y,"class","details svelte-1tn5l0x"),v(t,"class","vote svelte-1tn5l0x"),this.first=t},m(G,B){A(G,t,B),g(t,l),g(l,r),g(l,o),g(l,a),g(t,f),g(t,p),g(p,c),g(t,_),g(t,m),g(t,k),g(t,y),g(y,V),g(V,U),g(y,T),O.m(y,null),g(t,M)},p(G,B){var N,Y,Z,q,re;e=G,B&12&&n!==(n=(((N=e[18])==null?void 0:N.nickname)||((Y=e[18])==null?void 0:Y.address.slice(0,6))+"..."+((Z=e[18])==null?void 0:Z.address.slice(-4)))+"")&&z(a,n),B&12&&h!==(h="/@"+(((q=e[18])==null?void 0:q.nickname)||((re=e[18])==null?void 0:re.address)))&&v(l,"href",h),B&4&&u!==(u=Number(me(e[17].amount)).toLocaleString("en-US")+"")&&z(c,u),B&4&&E!==(E=new Date(Number(e[17].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&z(U,E),R===(R=Q(e))&&O?O.p(e,B):(O.d(1),O=R(e),O&&(O.c(),O.m(y,null)))},r(){te=t.getBoundingClientRect()},f(){ze(t),F()},a(){F(),F=Ze(t,te,Xe,{})},d(G){G&&d(t),O.d()}}}function Vl(i){let e;function t(s,o){return s[1]>-1?wl:bl}let l=t(i),r=l(i);return{c(){r.c(),e=ee()},l(s){r.l(s),e=ee()},m(s,o){r.m(s,o),A(s,e,o)},p(s,[o]){l===(l=t(s))&&r?r.p(s,o):(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},i:J,o:J,d(s){s&&d(e),r.d(s)}}}function st(i,e){const t=i.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((r,s)=>{var o,n;return`${r.name}: ${(n=(o=t.slotChoices)==null?void 0:o.find(a=>a.id===l.slotChoiceIds[s]))==null?void 0:n.alias}`}).join(", ")}return i.choices[e].id}function Bl(i,e,t){let l;Ie(i,Oe,E=>t(4,l=E));let{voteStart:r}=e,{contract:s}=e,{poll:o}=e,{pollId:n}=e,{artist:a}=e,h=-1,f;const p=ml({url:Me.WS_URL});let u=()=>{};const c=`
        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${s.toLowerCase()}", poll_eq: "${n}"}) {
            ${Object.keys(Me.Vote).join(`
`)}
        }
    `;let _=[],m=[];const S=je(a).como;r>Date.now()?(f=window.setInterval(()=>{r>Date.now()?t(1,h=r-Date.now()):(k(),t(1,h=-1),window.clearInterval(f))},1e3),h=r-Date.now()):k();async function k(){const U=await(await fetch(Me.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {${c}}`})})).json();await y(U.data.votes),(!_.length||_.filter(T=>T.candidate===null).length)&&(u=p.subscribe({query:`subscription {${c}}`},{next:async T=>{T.data&&(await y(T.data.votes),_.length&&!_.filter(M=>M.candidate===null).length&&(u(),p.dispose()))},error:T=>{console.error("WS error: ",T)},complete:()=>{}}))}async function y(E){const U=E.filter(T=>!m.find(M=>M.address===T.from)).map(T=>T.from);if(U.length){const M=await(await fetch(`${we.URL}/user/v1/by-address/${U.join(",")}`)).json();t(3,m=[...m,...M,...U.filter(te=>!M.find(F=>F.address===te)).map(te=>({nickname:"",address:te,profileImageUrl:""}))])}t(2,_=E)}Bt(()=>{u(),p.dispose(),window.clearInterval(f)});const V=(E,U)=>U.address===E.from;return i.$$set=E=>{"voteStart"in E&&t(6,r=E.voteStart),"contract"in E&&t(7,s=E.contract),"poll"in E&&t(0,o=E.poll),"pollId"in E&&t(8,n=E.pollId),"artist"in E&&t(9,a=E.artist)},[o,h,_,m,l,S,r,s,n,a,V]}class Dl extends Qe{constructor(e){super(),Ge(this,e,Bl,Vl,Ve,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function ot(i,e,t){const l=i.slice();return l[10]=e[t],l[12]=t,l}function nt(i){let e,t=oe(i[4]),l=[];for(let r=0;r<t.length;r+=1)l[r]=at(ot(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p(r,s){if(s&23){t=oe(r[4]);let o;for(o=0;o<t.length;o+=1){const n=ot(r,t,o);l[o]?l[o].p(n,s):(l[o]=at(n),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(r){r&&d(e),Ae(l,r)}}}function at(i){let e,t,l=`${i[2]?i[10]/Math.max(...i[4])*100:10}%`;return{c(){e=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0,title:!0}),I(e).forEach(d),this.h()},h(){v(e,"class","bar svelte-11jci92"),v(e,"title",t=i[10].toLocaleString("en-US")+" COMO"),xe(e,"active",i[2]&&i[0]/i[1]>i[12]/i[4].length),K(e,"height",l)},m(r,s){A(r,e,s)},p(r,s){s&16&&t!==(t=r[10].toLocaleString("en-US")+" COMO")&&v(e,"title",t),s&23&&xe(e,"active",r[2]&&r[0]/r[1]>r[12]/r[4].length),s&20&&l!==(l=`${r[2]?r[10]/Math.max(...r[4])*100:10}%`)&&K(e,"height",l)},d(r){r&&d(e)}}}function Cl(i){let e,t,l,r,s,o,n=`${i[0]/i[1]*100}%`,a,h,f,p=i[5]("gravity.totalvotes",{values:{votes:`${i[6](i[0])}/${i[6](i[1])}`}})+"",u,c,_=Math.round(i[0]/i[1]*100)+"",m,S,k=i[4]&&nt(i);return{c(){e=b("div"),t=b("div"),k&&k.c(),r=D(),s=b("div"),o=b("div"),a=D(),h=b("div"),f=b("p"),u=L(p),c=L(" ("),m=L(_),S=L("%)"),this.h()},l(y){e=w(y,"DIV",{class:!0});var V=I(e);t=w(V,"DIV",{class:!0});var E=I(t);k&&k.l(E),E.forEach(d),r=C(V),s=w(V,"DIV",{class:!0});var U=I(s);o=w(U,"DIV",{class:!0}),I(o).forEach(d),U.forEach(d),a=C(V),h=w(V,"DIV",{class:!0});var T=I(h);f=w(T,"P",{});var M=I(f);u=j(M,p),c=j(M," ("),m=j(M,_),S=j(M,"%)"),M.forEach(d),T.forEach(d),V.forEach(d),this.h()},h(){v(t,"class","bars svelte-11jci92"),Nt(()=>i[9].call(t)),v(o,"class","progress svelte-11jci92"),K(o,"width",n),v(s,"class","progressBar svelte-11jci92"),v(h,"class","text svelte-11jci92"),v(e,"class","graph svelte-11jci92")},m(y,V){A(y,e,V),g(e,t),k&&k.m(t,null),l=Gt(t,i[9].bind(t)),g(e,r),g(e,s),g(s,o),g(e,a),g(e,h),g(h,f),g(f,u),g(f,c),g(f,m),g(f,S)},p(y,[V]){y[4]?k?k.p(y,V):(k=nt(y),k.c(),k.m(t,null)):k&&(k.d(1),k=null),V&3&&n!==(n=`${y[0]/y[1]*100}%`)&&K(o,"width",n),V&99&&p!==(p=y[5]("gravity.totalvotes",{values:{votes:`${y[6](y[0])}/${y[6](y[1])}`}})+"")&&z(u,p),V&3&&_!==(_=Math.round(y[0]/y[1]*100)+"")&&z(m,_)},i:J,o:J,d(y){y&&d(e),k&&k.d(),l()}}}function Fl(i,e,t){let l,r;Ie(i,Oe,c=>t(5,l=c)),Ie(i,zt,c=>t(6,r=c));let{contract:s}=e,{poll:o}=e,{revealedVotes:n}=e,{totalVotes:a}=e,h;fetch(Me.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(limit: 99999, where: {contract_eq: "${s}", poll_eq: "${o}"}) {
                        amount
                    }
                }
            `})}).then(async c=>{const _=await c.json();t(2,h=_.data.votes.map(m=>Number(me(m.amount))))});let f,p;function u(){f=this.clientWidth,t(3,f)}return i.$$set=c=>{"contract"in c&&t(7,s=c.contract),"poll"in c&&t(8,o=c.poll),"revealedVotes"in c&&t(0,n=c.revealedVotes),"totalVotes"in c&&t(1,a=c.totalVotes)},i.$$.update=()=>{if(i.$$.dirty&12&&f)if(h){let c=[...h],_=[];for(let m=(f-10)/20;m>0;m--)_.push(c.splice(0,Math.ceil(c.length/m)).reduce((S,k)=>S+k,0));t(4,p=_)}else t(4,p=Array(Math.floor((f-10)/20)).fill(0))},[n,a,h,f,p,l,r,s,o,u]}class Ml extends Qe{constructor(e){super(),Ge(this,e,Fl,Cl,Ve,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function Pl(i,e,t){const l=i.slice();return l[10]=e[t],l[12]=t,l}function ct(i,e,t){const l=i.slice();return l[4]=e[t],l}function ft(i,e,t){const l=i.slice();return l[7]=e[t],l}function Ul(i){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){v(e,"class","placeholder svelte-1y461sc"),K(e,"Width","80px")},m(t,l){A(t,e,l)},p:J,d(t){t&&d(e)}}}function Wl(i){let e,t=i[1]("gravity.history.subtitle",{values:{count:i[0].length}})+"",l;return{c(){e=b("p"),l=L(t)},l(r){e=w(r,"P",{});var s=I(e);l=j(s,t),s.forEach(d)},m(r,s){A(r,e,s),g(e,l)},p(r,s){s&3&&t!==(t=r[1]("gravity.history.subtitle",{values:{count:r[0].length}})+"")&&z(l,t)},d(r){r&&d(e)}}}function Yl(i){let e,t=oe({length:5}),l=[];for(let r=0;r<t.length;r+=1)l[r]=Rl(Pl(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p:J,d(r){r&&d(e),Ae(l,r)}}}function Nl(i){let e,t=oe(i[0]),l=[];for(let r=0;r<t.length;r+=1)l[r]=ht(ct(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p(r,s){if(s&1){t=oe(r[0]);let o;for(o=0;o<t.length;o+=1){const n=ct(r,t,o);l[o]?l[o].p(n,s):(l[o]=ht(n),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(r){r&&d(e),Ae(l,r)}}}function Rl(i){let e,t,l,r,s,o;return{c(){e=b("div"),t=b("div"),l=D(),r=b("div"),s=D(),o=b("hr"),this.h()},l(n){e=w(n,"DIV",{class:!0});var a=I(e);t=w(a,"DIV",{class:!0}),I(t).forEach(d),l=C(a),r=w(a,"DIV",{class:!0}),I(r).forEach(d),a.forEach(d),s=C(n),o=w(n,"HR",{}),this.h()},h(){v(t,"class","placeholder imgPlaceholder svelte-1y461sc"),v(r,"class","placeholder svelte-1y461sc"),K(r,"width","calc(100% - 60px)"),v(e,"class","gravity svelte-1y461sc")},m(n,a){A(n,e,a),g(e,t),g(e,l),g(e,r),A(n,s,a),A(n,o,a)},p:J,d(n){n&&(d(e),d(s),d(o))}}}function Ql(i){let e,t=i[4].title+"",l,r;return{c(){e=b("a"),l=L(t),this.h()},l(s){e=w(s,"A",{class:!0,href:!0});var o=I(e);l=j(o,t),o.forEach(d),this.h()},h(){v(e,"class","title svelte-1y461sc"),v(e,"href",r="/gravity/"+i[4].artist+"/"+i[4].id)},m(s,o){A(s,e,o),g(e,l)},p(s,o){o&1&&t!==(t=s[4].title+"")&&z(l,t),o&1&&r!==(r="/gravity/"+s[4].artist+"/"+s[4].id)&&v(e,"href",r)},d(s){s&&d(e)}}}function Gl(i){let e,t=i[4].title+"",l;return{c(){e=b("p"),l=L(t)},l(r){e=w(r,"P",{});var s=I(e);l=j(s,t),s.forEach(d)},m(r,s){A(r,e,s),g(e,l)},p(r,s){s&1&&t!==(t=r[4].title+"")&&z(l,t)},d(r){r&&d(e)}}}function ut(i){let e,t=oe(i[4].polls.sort(i[3])),l=[];for(let r=0;r<t.length;r+=1)l[r]=dt(ft(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p(r,s){if(s&1){t=oe(r[4].polls.sort(r[3]));let o;for(o=0;o<t.length;o+=1){const n=ft(r,t,o);l[o]?l[o].p(n,s):(l[o]=dt(n),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(r){r&&d(e),Ae(l,r)}}}function dt(i){let e,t,l=i[7].title+"",r,s,o,n,a=new Date(i[7].startDate).toLocaleDateString()+"",h,f;return{c(){e=b("div"),t=b("a"),r=L(l),o=D(),n=b("p"),h=L(a),f=D(),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=I(e);t=w(u,"A",{href:!0,class:!0});var c=I(t);r=j(c,l),c.forEach(d),o=C(u),n=w(u,"P",{});var _=I(n);h=j(_,a),_.forEach(d),f=C(u),u.forEach(d),this.h()},h(){v(t,"href",s="/gravity/"+i[4].artist+"/"+i[4].id+"/"+i[7].id),v(t,"class","svelte-1y461sc"),v(e,"class","poll svelte-1y461sc")},m(p,u){A(p,e,u),g(e,t),g(t,r),g(e,o),g(e,n),g(n,h),g(e,f)},p(p,u){u&1&&l!==(l=p[7].title+"")&&z(r,l),u&1&&s!==(s="/gravity/"+p[4].artist+"/"+p[4].id+"/"+p[7].id)&&v(t,"href",s),u&1&&a!==(a=new Date(p[7].startDate).toLocaleDateString()+"")&&z(h,a)},d(p){p&&d(e)}}}function ht(i){let e,t,l,r,s,o,n,a;function h(c,_){return c[4].polls.length>1?Gl:Ql}let f=h(i),p=f(i),u=i[4].polls.length>1&&ut(i);return{c(){e=b("div"),t=b("img"),s=D(),p.c(),o=D(),u&&u.c(),n=D(),a=b("hr"),this.h()},l(c){e=w(c,"DIV",{class:!0});var _=I(e);t=w(_,"IMG",{src:!0,alt:!0,class:!0}),s=C(_),p.l(_),_.forEach(d),o=C(c),u&&u.l(c),n=C(c),a=w(c,"HR",{}),this.h()},h(){se(t.src,l=i[4].bannerImageUrl)||v(t,"src",l),v(t,"alt",r=i[4].title),v(t,"class","svelte-1y461sc"),v(e,"class","gravity svelte-1y461sc")},m(c,_){A(c,e,_),g(e,t),g(e,s),p.m(e,null),A(c,o,_),u&&u.m(c,_),A(c,n,_),A(c,a,_)},p(c,_){_&1&&!se(t.src,l=c[4].bannerImageUrl)&&v(t,"src",l),_&1&&r!==(r=c[4].title)&&v(t,"alt",r),f===(f=h(c))&&p?p.p(c,_):(p.d(1),p=f(c),p&&(p.c(),p.m(e,null))),c[4].polls.length>1?u?u.p(c,_):(u=ut(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},d(c){c&&(d(e),d(o),d(n),d(a)),p.d(),u&&u.d(c)}}}function Ol(i){let e,t,l,r=i[1]("gravity.history.title")+"",s,o,n;function a(_,m){return _[0]?Wl:Ul}let h=a(i),f=h(i);function p(_,m){return _[0]?Nl:Yl}let u=p(i),c=u(i);return{c(){e=b("div"),t=b("div"),l=b("b"),s=L(r),o=D(),f.c(),n=D(),c.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var m=I(e);t=w(m,"DIV",{class:!0});var S=I(t);l=w(S,"B",{});var k=I(l);s=j(k,r),k.forEach(d),o=C(S),f.l(S),S.forEach(d),n=C(m),c.l(m),m.forEach(d),this.h()},h(){v(t,"class","header svelte-1y461sc"),v(e,"class","history svelte-1y461sc")},m(_,m){A(_,e,m),g(e,t),g(t,l),g(l,s),g(t,o),f.m(t,null),g(e,n),c.m(e,null)},p(_,[m]){m&2&&r!==(r=_[1]("gravity.history.title")+"")&&z(s,r),h===(h=a(_))&&f?f.p(_,m):(f.d(1),f=h(_),f&&(f.c(),f.m(t,null))),u===(u=p(_))&&c?c.p(_,m):(c.d(1),c=u(_),c&&(c.c(),c.m(e,null)))},i:J,o:J,d(_){_&&d(e),f.d(),c.d()}}}function Tl(i,e,t){let l;Ie(i,Oe,n=>t(1,l=n));let{artist:r}=e,{gravities:s=void 0}=e;s||fetch(`${we.URL}/gravity/v3/${r.name}`).then(async n=>{const a=await n.json();t(0,s=[...a.upcoming,...a.ongoing,...a.past])});const o=(n,a)=>Date.parse(n.startDate)-Date.parse(a.startDate);return i.$$set=n=>{"artist"in n&&t(2,r=n.artist),"gravities"in n&&t(0,s=n.gravities)},[s,l,r,o]}class Ll extends Qe{constructor(e){super(),Ge(this,e,Tl,Ol,Ve,{artist:2,gravities:0})}}function _t(i,e,t){const l=i.slice();l[25]=e[t];const r=Math.round(Number(me(l[11][l[3].choices.indexOf(l[25])]))/l[10]*100);return l[26]=r,l}function pt(i,e,t){const l=i.slice();return l[22]=e[t],l[24]=t,l}function mt(i,e,t){const l=i.slice();l[25]=e[t];const r=Math.round(l[13](l[24],l[25].id)/l[11].reduce((s,o)=>s+Number(me(o)),0)*100);return l[26]=r,l}function gt(i){let e=i[2].route,t,l=vt(i);return{c(){l.c(),t=ee()},l(r){l.l(r),t=ee()},m(r,s){l.m(r,s),A(r,t,s)},p(r,s){s&4&&Ve(e,e=r[2].route)?(l.d(1),l=vt(r),l.c(),l.m(t.parentNode,t)):l.p(r,s)},d(r){r&&d(t),l.d(r)}}}function vt(i){let e;return document.title=e="Nova | "+i[0].title.replaceAll(`
`," "),{c:J,l:J,m:J,p(t,l){l&1&&e!==(e="Nova | "+t[0].title.replaceAll(`
`," "))&&(document.title=e)},d:J}}function jl(i){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){v(e,"class","placeholder svelte-1ut09yc"),K(e,"width","85px")},m(t,l){A(t,e,l)},p:J,i:J,o:J,d(t){t&&d(e)}}}function ql(i){let e,t,l;function r(o){i[16](o)}let s={};return i[1]!==void 0&&(s.selected=i[1]),e=new $t({props:s}),Dt.push(()=>Ft(e,"selected",r)),{c(){Pe(e.$$.fragment)},l(o){Ue(e.$$.fragment,o)},m(o,n){We(e,o,n),l=!0},p(o,n){const a={};!t&&n&2&&(t=!0,a.selected=o[1],Ct(()=>t=!1)),e.$set(a)},i(o){l||(de(e.$$.fragment,o),l=!0)},o(o){ue(e.$$.fragment,o),l=!1},d(o){Ye(e,o)}}}function Jl(i){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0}),I(e).forEach(d),t=C(r),l=w(r,"DIV",{class:!0}),I(l).forEach(d),this.h()},h(){v(e,"class","placeholder svelte-1ut09yc"),K(e,"width","50px"),v(l,"class","placeholder svelte-1ut09yc"),K(l,"margin-left","auto"),K(l,"width","135px")},m(r,s){A(r,e,s),A(r,t,s),A(r,l,s)},p:J,d(r){r&&(d(e),d(t),d(l))}}}function Hl(i){let e,t,l,r,s,o,n,a,h;function f(c,_){if(c[0].type==="event-gravity")return Xl;if(c[0].type==="grand-gravity")return zl;if(c[0].type==="solo-gravity")return Zl}let p=f(i),u=p&&p(i);return{c(){e=b("div"),u&&u.c(),l=D(),r=b("a"),s=b("img"),n=L(`
                        PolygonScan`),this.h()},l(c){e=w(c,"DIV",{class:!0});var _=I(e);u&&u.l(_),_.forEach(d),l=C(c),r=w(c,"A",{class:!0,href:!0,title:!0});var m=I(r);s=w(m,"IMG",{src:!0,alt:!0,class:!0}),n=j(m,`
                        PolygonScan`),m.forEach(d),this.h()},h(){v(e,"class",t="gravityType "+i[0].type+" svelte-1ut09yc"),se(s.src,o=xt)||v(s,"src",o),v(s,"alt","PolygonScan"),v(s,"class","svelte-1ut09yc"),v(r,"class","polygonscan svelte-1ut09yc"),v(r,"href",a=i[0].contractOutlink),v(r,"title",h="Poll ID: "+i[6])},m(c,_){A(c,e,_),u&&u.m(e,null),A(c,l,_),A(c,r,_),g(r,s),g(r,n)},p(c,_){p!==(p=f(c))&&(u&&u.d(1),u=p&&p(c),u&&(u.c(),u.m(e,null))),_&1&&t!==(t="gravityType "+c[0].type+" svelte-1ut09yc")&&v(e,"class",t),_&1&&a!==(a=c[0].contractOutlink)&&v(r,"href",a),_&64&&h!==(h="Poll ID: "+c[6])&&v(r,"title",h)},d(c){c&&(d(e),d(l),d(r)),u&&u.d()}}}function Zl(i){let e;return{c(){e=L("Solo")},l(t){e=j(t,"Solo")},m(t,l){A(t,e,l)},d(t){t&&d(e)}}}function zl(i){let e;return{c(){e=L("Grand")},l(t){e=j(t,"Grand")},m(t,l){A(t,e,l)},d(t){t&&d(e)}}}function Xl(i){let e;return{c(){e=L("Event")},l(t){e=j(t,"Event")},m(t,l){A(t,e,l)},d(t){t&&d(e)}}}function Kl(i){let e,t='<div class="placeholder svelte-1ut09yc"></div> <div class="placeholder svelte-1ut09yc"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){v(e,"class","titlePlaceholder svelte-1ut09yc")},m(l,r){A(l,e,r)},p:J,d(l){l&&d(e)}}}function $l(i){let e,t,l=i[0].title.replaceAll(`
`,i[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=b("h1"),t=new Tt(!1),this.h()},l(r){e=w(r,"H1",{class:!0});var s=I(e);t=Lt(s,!1),s.forEach(d),this.h()},h(){t.a=null,v(e,"class","svelte-1ut09yc")},m(r,s){A(r,e,s),t.m(l,e)},p(r,s){s&1&&l!==(l=r[0].title.replaceAll(`
`,r[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(r){r&&d(e)}}}function xl(i){let e,t,l,r,s;return{c(){e=b("div"),t=D(),l=b("div"),r=D(),s=b("div"),this.h()},l(o){e=w(o,"DIV",{class:!0}),I(e).forEach(d),t=C(o),l=w(o,"DIV",{class:!0}),I(l).forEach(d),r=C(o),s=w(o,"DIV",{class:!0}),I(s).forEach(d),this.h()},h(){v(e,"class","placeholder svelte-1ut09yc"),K(e,"width","50px"),v(l,"class","placeholder svelte-1ut09yc"),K(l,"width","150px"),v(s,"class","placeholder svelte-1ut09yc"),K(s,"margin-left","auto"),K(s,"width","65px")},m(o,n){A(o,e,n),A(o,t,n),A(o,l,n),A(o,r,n),A(o,s,n)},p:J,d(o){o&&(d(e),d(t),d(l),d(r),d(s))}}}function er(i){let e,t,l=new Date(i[3].startDate).toLocaleDateString()+"",r,s,o,n=i[0].polls.length>1&&yt(i),a=(i[7]>-1||i[8]<i[9])&&bt();return{c(){n&&n.c(),e=D(),t=b("p"),r=L(l),s=D(),a&&a.c(),o=ee(),this.h()},l(h){n&&n.l(h),e=C(h),t=w(h,"P",{class:!0});var f=I(t);r=j(f,l),f.forEach(d),s=C(h),a&&a.l(h),o=ee(),this.h()},h(){v(t,"class","svelte-1ut09yc")},m(h,f){n&&n.m(h,f),A(h,e,f),A(h,t,f),g(t,r),A(h,s,f),a&&a.m(h,f),A(h,o,f)},p(h,f){h[0].polls.length>1?n?n.p(h,f):(n=yt(h),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f&8&&l!==(l=new Date(h[3].startDate).toLocaleDateString()+"")&&z(r,l),h[7]>-1||h[8]<h[9]?a||(a=bt(),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(h){h&&(d(e),d(t),d(s),d(o)),n&&n.d(h),a&&a.d(h)}}}function yt(i){let e,t=i[3].title+"",l;return{c(){e=b("p"),l=L(t),this.h()},l(r){e=w(r,"P",{class:!0});var s=I(e);l=j(s,t),s.forEach(d),this.h()},h(){v(e,"class","svelte-1ut09yc")},m(r,s){A(r,e,s),g(e,l)},p(r,s){s&8&&t!==(t=r[3].title+"")&&z(l,t)},d(r){r&&d(e)}}}function bt(i){let e,t='<div class="dot"></div>',l,r,s="LIVE";return{c(){e=b("div"),e.innerHTML=t,l=D(),r=b("p"),r.textContent=s,this.h()},l(o){e=w(o,"DIV",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=C(o),r=w(o,"P",{class:!0,"data-svelte-h":!0}),Le(r)!=="svelte-1k24nxm"&&(r.textContent=s),this.h()},h(){v(e,"class","liveIndicator svelte-1ut09yc"),v(r,"class","svelte-1ut09yc")},m(o,n){A(o,e,n),A(o,l,n),A(o,r,n)},d(o){o&&(d(e),d(l),d(r))}}}function tr(i){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0}),I(e).forEach(d),t=C(r),l=w(r,"DIV",{class:!0}),I(l).forEach(d),this.h()},h(){v(e,"class","itemPlaceholder svelte-1ut09yc"),K(e,"height","250px"),v(l,"class","itemPlaceholder svelte-1ut09yc"),K(l,"height","350px")},m(r,s){A(r,e,s),A(r,t,s),A(r,l,s)},p:J,i:J,o:J,d(r){r&&(d(e),d(t),d(l))}}}function lr(i){let e,t,l,r;const s=[ir,rr],o=[];function n(a,h){return a[7]>-1?0:1}return e=n(i),t=o[e]=s[e](i),{c(){t.c(),l=ee()},l(a){t.l(a),l=ee()},m(a,h){o[e].m(a,h),A(a,l,h),r=!0},p(a,h){let f=e;e=n(a),e===f?o[e].p(a,h):(Fe(),ue(o[f],1,1,()=>{o[f]=null}),Ce(),t=o[e],t?t.p(a,h):(t=o[e]=s[e](a),t.c()),de(t,1),t.m(l.parentNode,l))},i(a){r||(de(t),r=!0)},o(a){ue(t),r=!1},d(a){a&&d(l),o[e].d(a)}}}function rr(i){let e,t,l,r;e=new Ml({props:{contract:i[5].target.toString().toLowerCase(),poll:i[6],revealedVotes:i[8],totalVotes:i[9]}});function s(a,h){return a[3].pollViewMetadata.slots&&a[3].pollViewMetadata.slotChoices?or:sr}let o=s(i),n=o(i);return{c(){Pe(e.$$.fragment),t=D(),l=b("div"),n.c(),this.h()},l(a){Ue(e.$$.fragment,a),t=C(a),l=w(a,"DIV",{class:!0});var h=I(l);n.l(h),h.forEach(d),this.h()},h(){v(l,"class","item polls svelte-1ut09yc")},m(a,h){We(e,a,h),A(a,t,h),A(a,l,h),n.m(l,null),r=!0},p(a,h){const f={};h&32&&(f.contract=a[5].target.toString().toLowerCase()),h&64&&(f.poll=a[6]),h&256&&(f.revealedVotes=a[8]),h&512&&(f.totalVotes=a[9]),e.$set(f),o===(o=s(a))&&n?n.p(a,h):(n.d(1),n=o(a),n&&(n.c(),n.m(l,null)))},i(a){r||(de(e.$$.fragment,a),r=!0)},o(a){ue(e.$$.fragment,a),r=!1},d(a){a&&(d(t),d(l)),Ye(e,a),n.d()}}}function ir(i){let e,t,l,r=i[12]("gravity.counting_countdown")+"",s,o,n,a=String(Math.floor(i[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[7]%(60*1e3)/1e3)).padStart(2,"0"),h,f=i[0]&&i[0].bannerImageUrl&&St(i);return{c(){e=b("div"),f&&f.c(),t=D(),l=b("p"),s=L(r),o=D(),n=b("h3"),h=L(a),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=I(e);f&&f.l(u),t=C(u),l=w(u,"P",{});var c=I(l);s=j(c,r),c.forEach(d),o=C(u),n=w(u,"H3",{class:!0});var _=I(n);h=j(_,a),_.forEach(d),u.forEach(d),this.h()},h(){v(n,"class","svelte-1ut09yc"),v(e,"class","item countdown svelte-1ut09yc")},m(p,u){A(p,e,u),f&&f.m(e,null),g(e,t),g(e,l),g(l,s),g(e,o),g(e,n),g(n,h)},p(p,u){p[0]&&p[0].bannerImageUrl?f?f.p(p,u):(f=St(p),f.c(),f.m(e,t)):f&&(f.d(1),f=null),u&4096&&r!==(r=p[12]("gravity.counting_countdown")+"")&&z(s,r),u&128&&a!==(a=String(Math.floor(p[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(p[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(p[7]%(60*1e3)/1e3)).padStart(2,"0"))&&z(h,a)},i:J,o:J,d(p){p&&d(e),f&&f.d()}}}function sr(i){let e,t=[],l=new Map,r=oe([...i[3].choices].sort(i[18]));const s=o=>o[25];for(let o=0;o<r.length;o+=1){let n=_t(i,r,o),a=s(n);l.set(a,t[o]=wt(a,n))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var n=I(e);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(d),this.h()},h(){v(e,"class","slot svelte-1ut09yc")},m(o,n){A(o,e,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(o,n){if(n&3080){r=oe([...o[3].choices].sort(o[18]));for(let a=0;a<t.length;a+=1)t[a].r();t=qe(t,n,s,1,o,r,l,e,Je,wt,null,_t);for(let a=0;a<t.length;a+=1)t[a].a()}},d(o){o&&d(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function or(i){let e,t=oe(i[3].pollViewMetadata.slots),l=[];for(let r=0;r<t.length;r+=1)l[r]=At(pt(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);e=ee()},m(r,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,s);A(r,e,s)},p(r,s){if(s&10248){t=oe(r[3].pollViewMetadata.slots);let o;for(o=0;o<t.length;o+=1){const n=pt(r,t,o);l[o]?l[o].p(n,s):(l[o]=At(n),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(r){r&&d(e),Ae(l,r)}}}function wt(i,e){let t,l,r,s,o,n,a,h=e[25].title+"",f,p,u,c=Number(me(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"",_,m,S=e[26]+"",k,y,V,E,U,T=`${e[26]}%`,M,te,F=J;return{key:i,first:null,c(){t=b("div"),l=b("div"),r=b("img"),n=D(),a=b("p"),f=L(h),p=D(),u=b("p"),_=L(c),m=L(" COMO ("),k=L(S),y=L("%)"),V=D(),E=b("div"),U=b("div"),M=D(),this.h()},l(Q){t=w(Q,"DIV",{class:!0});var R=I(t);l=w(R,"DIV",{class:!0});var O=I(l);r=w(O,"IMG",{src:!0,alt:!0,class:!0}),n=C(O),a=w(O,"P",{class:!0});var ie=I(a);f=j(ie,h),ie.forEach(d),p=C(O),u=w(O,"P",{});var H=I(u);_=j(H,c),m=j(H," COMO ("),k=j(H,S),y=j(H,"%)"),H.forEach(d),O.forEach(d),V=C(R),E=w(R,"DIV",{class:!0});var W=I(E);U=w(W,"DIV",{class:!0}),I(U).forEach(d),W.forEach(d),M=C(R),R.forEach(d),this.h()},h(){se(r.src,s=e[25].txImageUrl)||v(r,"src",s),v(r,"alt",o=e[25].title),v(r,"class","svelte-1ut09yc"),v(a,"class","name svelte-1ut09yc"),v(l,"class","choiceTitle svelte-1ut09yc"),v(U,"class","progress svelte-1ut09yc"),K(U,"width",T),v(E,"class","choiceBar svelte-1ut09yc"),v(t,"class","choice svelte-1ut09yc"),this.first=t},m(Q,R){A(Q,t,R),g(t,l),g(l,r),g(l,n),g(l,a),g(a,f),g(l,p),g(l,u),g(u,_),g(u,m),g(u,k),g(u,y),g(t,V),g(t,E),g(E,U),g(t,M)},p(Q,R){e=Q,R&2056&&!se(r.src,s=e[25].txImageUrl)&&v(r,"src",s),R&2056&&o!==(o=e[25].title)&&v(r,"alt",o),R&2056&&h!==(h=e[25].title+"")&&z(f,h),R&2056&&c!==(c=Number(me(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&z(_,c),R&3080&&S!==(S=e[26]+"")&&z(k,S),R&3080&&T!==(T=`${e[26]}%`)&&K(U,"width",T)},r(){te=t.getBoundingClientRect()},f(){ze(t),F()},a(){F(),F=Ze(t,te,Xe,{})},d(Q){Q&&d(t)}}}function kt(i){let e,t,l;return{c(){e=b("img"),this.h()},l(r){e=w(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){se(e.src,t=i[25].roundImageUrl)||v(e,"src",t),v(e,"alt",l=i[25].name),v(e,"class","svelte-1ut09yc")},m(r,s){A(r,e,s)},p(r,s){s&8&&!se(e.src,t=r[25].roundImageUrl)&&v(e,"src",t),s&8&&l!==(l=r[25].name)&&v(e,"alt",l)},d(r){r&&d(e)}}}function Et(i,e){let t,l,r,s,o=e[25].name+"",n,a,h,f=e[13](e[24],e[25].id).toLocaleString("en-US")+"",p,u,c=e[26]+"",_,m,S,k,y,V=`${e[26]}%`,E,U,T=J,M=e[25].roundImageUrl&&kt(e);return{key:i,first:null,c(){t=b("div"),l=b("div"),M&&M.c(),r=D(),s=b("p"),n=L(o),a=D(),h=b("p"),p=L(f),u=L(" COMO ("),_=L(c),m=L("%)"),S=D(),k=b("div"),y=b("div"),E=D(),this.h()},l(te){t=w(te,"DIV",{class:!0});var F=I(t);l=w(F,"DIV",{class:!0});var Q=I(l);M&&M.l(Q),r=C(Q),s=w(Q,"P",{class:!0});var R=I(s);n=j(R,o),R.forEach(d),a=C(Q),h=w(Q,"P",{});var O=I(h);p=j(O,f),u=j(O," COMO ("),_=j(O,c),m=j(O,"%)"),O.forEach(d),Q.forEach(d),S=C(F),k=w(F,"DIV",{class:!0});var ie=I(k);y=w(ie,"DIV",{class:!0}),I(y).forEach(d),ie.forEach(d),E=C(F),F.forEach(d),this.h()},h(){v(s,"class","name svelte-1ut09yc"),v(l,"class","choiceTitle svelte-1ut09yc"),v(y,"class","progress svelte-1ut09yc"),K(y,"width",V),v(k,"class","choiceBar svelte-1ut09yc"),v(t,"class","choice svelte-1ut09yc"),this.first=t},m(te,F){A(te,t,F),g(t,l),M&&M.m(l,null),g(l,r),g(l,s),g(s,n),g(l,a),g(l,h),g(h,p),g(h,u),g(h,_),g(h,m),g(t,S),g(t,k),g(k,y),g(t,E)},p(te,F){e=te,e[25].roundImageUrl?M?M.p(e,F):(M=kt(e),M.c(),M.m(l,r)):M&&(M.d(1),M=null),F&8&&o!==(o=e[25].name+"")&&z(n,o),F&8&&f!==(f=e[13](e[24],e[25].id).toLocaleString("en-US")+"")&&z(p,f),F&2056&&c!==(c=e[26]+"")&&z(_,c),F&2056&&V!==(V=`${e[26]}%`)&&K(y,"width",V)},r(){U=t.getBoundingClientRect()},f(){ze(t),T()},a(){T(),T=Ze(t,U,Xe,{})},d(te){te&&d(t),M&&M.d()}}}function It(i){let e;return{c(){e=b("hr")},l(t){e=w(t,"HR",{})},m(t,l){A(t,e,l)},d(t){t&&d(e)}}}function At(i){let e,t,l,r,s,o,n=i[22].name+"",a,h,f=[],p=new Map,u,c;function _(...y){return i[17](i[24],...y)}let m=oe(i[3].pollViewMetadata.slotChoices.sort(_));const S=y=>y[25];for(let y=0;y<m.length;y+=1){let V=mt(i,m,y),E=S(V);p.set(E,f[y]=Et(E,V))}let k=i[24]<i[3].pollViewMetadata.slots.length-1&&It();return{c(){e=b("div"),t=b("p"),l=b("img"),o=D(),a=L(n),h=D();for(let y=0;y<f.length;y+=1)f[y].c();u=D(),k&&k.c(),c=ee(),this.h()},l(y){e=w(y,"DIV",{class:!0});var V=I(e);t=w(V,"P",{class:!0});var E=I(t);l=w(E,"IMG",{src:!0,alt:!0,class:!0}),o=C(E),a=j(E,n),E.forEach(d),h=C(V);for(let U=0;U<f.length;U+=1)f[U].l(V);V.forEach(d),u=C(y),k&&k.l(y),c=ee(),this.h()},h(){se(l.src,r=i[22].backgroundImageUrl)||v(l,"src",r),v(l,"alt",s=i[22].name),v(l,"class","svelte-1ut09yc"),v(t,"class","slotTitle svelte-1ut09yc"),v(e,"class","slot svelte-1ut09yc")},m(y,V){A(y,e,V),g(e,t),g(t,l),g(t,o),g(t,a),g(e,h);for(let E=0;E<f.length;E+=1)f[E]&&f[E].m(e,null);A(y,u,V),k&&k.m(y,V),A(y,c,V)},p(y,V){if(i=y,V&8&&!se(l.src,r=i[22].backgroundImageUrl)&&v(l,"src",r),V&8&&s!==(s=i[22].name)&&v(l,"alt",s),V&8&&n!==(n=i[22].name+"")&&z(a,n),V&10248){m=oe(i[3].pollViewMetadata.slotChoices.sort(_));for(let E=0;E<f.length;E+=1)f[E].r();f=qe(f,V,S,1,i,m,p,e,Je,Et,null,mt);for(let E=0;E<f.length;E+=1)f[E].a()}i[24]<i[3].pollViewMetadata.slots.length-1?k||(k=It(),k.c(),k.m(c.parentNode,c)):k&&(k.d(1),k=null)},d(y){y&&(d(e),d(u),d(c));for(let V=0;V<f.length;V+=1)f[V].d();k&&k.d(y)}}}function St(i){let e,t,l;return{c(){e=b("img"),this.h()},l(r){e=w(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){se(e.src,t=i[0].bannerImageUrl)||v(e,"src",t),v(e,"alt",l=i[0].title),v(e,"class","svelte-1ut09yc")},m(r,s){A(r,e,s)},p(r,s){s&1&&!se(e.src,t=r[0].bannerImageUrl)&&v(e,"src",t),s&1&&l!==(l=r[0].title)&&v(e,"alt",l)},d(r){r&&d(e)}}}function nr(i){let e,t,l,r,s;return{c(){e=b("div"),t=D(),l=b("div"),r=D(),s=b("div"),this.h()},l(o){e=w(o,"DIV",{class:!0}),I(e).forEach(d),t=C(o),l=w(o,"DIV",{class:!0}),I(l).forEach(d),r=C(o),s=w(o,"DIV",{class:!0}),I(s).forEach(d),this.h()},h(){v(e,"class","itemPlaceholder svelte-1ut09yc"),v(l,"class","itemPlaceholder svelte-1ut09yc"),K(l,"flex","2"),v(s,"class","itemPlaceholder svelte-1ut09yc"),K(s,"flex","1")},m(o,n){A(o,e,n),A(o,t,n),A(o,l,n),A(o,r,n),A(o,s,n)},p:J,i:J,o:J,d(o){o&&(d(e),d(t),d(l),d(r),d(s))}}}function ar(i){let e,t,l=i[12]("gravity.totalcomo")+"",r,s,o,n,a,h,f,p,u=i[10]!==void 0&&Vt(i);n=new Dl({props:{voteStart:Date.parse(i[3].startDate),contract:i[5].target.toString(),poll:i[3],pollId:i[6],artist:i[1]}});function c(m){i[19](m)}let _={artist:i[1]};return i[4]!==void 0&&(_.gravities=i[4]),h=new Ll({props:_}),Dt.push(()=>Ft(h,"gravities",c)),{c(){e=b("div"),t=b("b"),r=L(l),s=D(),u&&u.c(),o=D(),Pe(n.$$.fragment),a=D(),Pe(h.$$.fragment),this.h()},l(m){e=w(m,"DIV",{class:!0});var S=I(e);t=w(S,"B",{class:!0});var k=I(t);r=j(k,l),k.forEach(d),s=C(S),u&&u.l(S),S.forEach(d),o=C(m),Ue(n.$$.fragment,m),a=C(m),Ue(h.$$.fragment,m),this.h()},h(){v(t,"class","svelte-1ut09yc"),v(e,"class","item total svelte-1ut09yc")},m(m,S){A(m,e,S),g(e,t),g(t,r),g(e,s),u&&u.m(e,null),A(m,o,S),We(n,m,S),A(m,a,S),We(h,m,S),p=!0},p(m,S){(!p||S&4096)&&l!==(l=m[12]("gravity.totalcomo")+"")&&z(r,l),m[10]!==void 0?u?u.p(m,S):(u=Vt(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const k={};S&8&&(k.voteStart=Date.parse(m[3].startDate)),S&32&&(k.contract=m[5].target.toString()),S&8&&(k.poll=m[3]),S&64&&(k.pollId=m[6]),S&2&&(k.artist=m[1]),n.$set(k);const y={};S&2&&(y.artist=m[1]),!f&&S&16&&(f=!0,y.gravities=m[4],Ct(()=>f=!1)),h.$set(y)},i(m){p||(de(n.$$.fragment,m),de(h.$$.fragment,m),p=!0)},o(m){ue(n.$$.fragment,m),ue(h.$$.fragment,m),p=!1},d(m){m&&(d(e),d(o),d(a)),u&&u.d(),Ye(n,m),Ye(h,m)}}}function Vt(i){let e,t=i[10].toLocaleString("en-US")+"",l,r,s,o;return{c(){e=b("p"),l=L(t),r=D(),s=b("img"),this.h()},l(n){e=w(n,"P",{});var a=I(e);l=j(a,t),a.forEach(d),r=C(n),s=w(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){se(s.src,o=je(i[1]).como)||v(s,"src",o),v(s,"alt","COMO"),v(s,"class","svelte-1ut09yc")},m(n,a){A(n,e,a),g(e,l),A(n,r,a),A(n,s,a)},p(n,a){a&1024&&t!==(t=n[10].toLocaleString("en-US")+"")&&z(l,t),a&2&&!se(s.src,o=je(n[1]).como)&&v(s,"src",o)},d(n){n&&(d(e),d(r),d(s))}}}function cr(i){let e,t,l,r,s,o,n,a,h,f,p,u,c,_,m,S,k,y,V,E,U=i[0]&&gt(i);const T=[ql,jl],M=[];function te(P,X){return P[1]?0:1}n=te(i),a=M[n]=T[n](i);function F(P,X){return P[0]?Hl:Jl}let Q=F(i),R=Q(i);function O(P,X){return P[0]?$l:Kl}let ie=O(i),H=ie(i);function W(P,X){return P[0]&&P[3]?er:xl}let G=W(i),B=G(i);const N=[lr,tr],Y=[];function Z(P,X){return P[3]?0:1}_=Z(i),m=Y[_]=N[_](i);const q=[ar,nr],re=[];function ge(P,X){return P[3]&&P[1]?0:1}return y=ge(i),V=re[y]=q[y](i),{c(){U&&U.c(),e=ee(),t=D(),l=b("div"),r=b("div"),s=b("div"),o=b("div"),a.c(),h=D(),R.c(),f=D(),H.c(),p=D(),u=b("div"),B.c(),c=D(),m.c(),S=D(),k=b("div"),V.c(),this.h()},l(P){const X=Ot("svelte-1pdh1or",document.head);U&&U.l(X),e=ee(),X.forEach(d),t=C(P),l=w(P,"DIV",{class:!0});var $=I(l);r=w($,"DIV",{class:!0});var x=I(r);s=w(x,"DIV",{class:!0});var he=I(s);o=w(he,"DIV",{class:!0});var be=I(o);a.l(be),h=C(be),R.l(be),be.forEach(d),f=C(he),H.l(he),p=C(he),u=w(he,"DIV",{class:!0});var Ke=I(u);B.l(Ke),Ke.forEach(d),he.forEach(d),c=C(x),m.l(x),x.forEach(d),S=C($),k=w($,"DIV",{class:!0});var $e=I(k);V.l($e),$e.forEach(d),$.forEach(d),this.h()},h(){v(o,"class","headerSection svelte-1ut09yc"),v(u,"class","headerSection svelte-1ut09yc"),v(s,"class","header svelte-1ut09yc"),v(r,"class","main svelte-1ut09yc"),v(k,"class","sidebar svelte-1ut09yc"),v(l,"class","layout svelte-1ut09yc")},m(P,X){U&&U.m(document.head,null),g(document.head,e),A(P,t,X),A(P,l,X),g(l,r),g(r,s),g(s,o),M[n].m(o,null),g(o,h),R.m(o,null),g(s,f),H.m(s,null),g(s,p),g(s,u),B.m(u,null),g(r,c),Y[_].m(r,null),g(l,S),g(l,k),re[y].m(k,null),E=!0},p(P,[X]){P[0]?U?U.p(P,X):(U=gt(P),U.c(),U.m(e.parentNode,e)):U&&(U.d(1),U=null);let $=n;n=te(P),n===$?M[n].p(P,X):(Fe(),ue(M[$],1,1,()=>{M[$]=null}),Ce(),a=M[n],a?a.p(P,X):(a=M[n]=T[n](P),a.c()),de(a,1),a.m(o,h)),Q===(Q=F(P))&&R?R.p(P,X):(R.d(1),R=Q(P),R&&(R.c(),R.m(o,null))),ie===(ie=O(P))&&H?H.p(P,X):(H.d(1),H=ie(P),H&&(H.c(),H.m(s,p))),G===(G=W(P))&&B?B.p(P,X):(B.d(1),B=G(P),B&&(B.c(),B.m(u,null)));let x=_;_=Z(P),_===x?Y[_].p(P,X):(Fe(),ue(Y[x],1,1,()=>{Y[x]=null}),Ce(),m=Y[_],m?m.p(P,X):(m=Y[_]=N[_](P),m.c()),de(m,1),m.m(r,null));let he=y;y=ge(P),y===he?re[y].p(P,X):(Fe(),ue(re[he],1,1,()=>{re[he]=null}),Ce(),V=re[y],V?V.p(P,X):(V=re[y]=q[y](P),V.c()),de(V,1),V.m(k,null))},i(P){E||(de(a),de(m),de(V),E=!0)},o(P){ue(a),ue(m),ue(V),E=!1},d(P){P&&(d(t),d(l)),U&&U.d(P),d(e),M[n].d(),R.d(),H.d(),B.d(),Y[_].d(),re[y].d()}}}function fr(i,e,t){let l,r;Ie(i,Kt,F=>t(2,l=F)),Ie(i,Oe,F=>t(12,r=F));let s,o,n,a,h,f,p,u=-1,c,_,m,S,k;async function y(){if(l.params.id)if(a&&a.find(F=>F.id===Number(l.params.id)))t(0,s=a.find(F=>F.id===Number(l.params.id)));else{const F=await fetch(`${we.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,s=(await F.json()).gravity)}else{const Q=await(await fetch(`${we.URL}/gravity/v3/${l.params.artist||""}`)).json();Q.ongoing.length?t(0,s=Q.ongoing[0]):Q.upcoming.length?t(0,s=Q.upcoming.at(-1)):t(0,s=Q.past[0]),t(4,a=[...Q.upcoming,...Q.ongoing,...Q.past].filter(R=>R.artist===(s==null?void 0:s.artist)))}t(1,n=(await we.artists()).find(F=>F.name===(s==null?void 0:s.artist))),V()}async function V(){var N;t(7,u=-1);const F=s==null?void 0:s.polls.sort((Y,Z)=>Date.parse(Y.startDate)-Date.parse(Z.startDate)),Q=l.params.pollId||((N=(s==null?void 0:s.polls.find(Y=>!Y.finalized))||(F==null?void 0:F.at(-1)))==null?void 0:N.id),O=(await(await fetch(`${we.URL}/gravity/v3/${s==null?void 0:s.artist}/gravity/${s==null?void 0:s.id}/polls/${Q}`)).json()).pollDetail;t(5,h=new et(n.contracts.Governor,Be.ABI.Governor,Be.RPC)),t(6,f=O.pollIdOnChain||O.id),(await h.candidates(f)).toString().replaceAll("\b","")!==O.choices.map(Y=>Y.id).toString().replaceAll("\b","")&&t(6,f-=1);const H=new et(n.contracts.Governor,Be.ABI.Governor,new fl(Be.RPC)),[W,G,B]=await Promise.all([H.polls(f),H.totalVotes(f),H.votesPerCandidates(f)]);t(8,c=Number(W.revealedVotes)),t(9,_=Number(G)),t(10,m=Number(me(W.totalVotedCOMO))),t(11,S=B),(Date.parse(O.endDate)>Date.now()||c<_)&&(window.clearInterval(p),t(7,u=Date.parse(O.endDate)-Date.now()),t(14,p=window.setInterval(async()=>{if(Date.parse(O.endDate)>Date.now()){t(7,u=Date.parse(O.endDate)-Date.now());const[Y,Z]=await Promise.all([H.polls(f),H.totalVotes(f)]);t(10,m=Number(me(Y.totalVotedCOMO))),t(9,_=Number(Z))}else if(_===c)window.clearInterval(p);else{t(7,u=-1);const[Y,Z]=await Promise.all([H.polls(f),H.votesPerCandidates(f)]);Number(Y.revealedVotes)>c&&(t(8,c=Number(Y.revealedVotes)),t(11,S=Z))}},1e3))),t(3,o=O)}function E(F,Q){var R;return(R=o==null?void 0:o.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:R.filter(O=>O.slotChoiceIds[F]===Q).reduce((O,ie)=>{var W;const H=(W=o==null?void 0:o.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:W.indexOf(ie);return O+Number(me(S[H]))},0)}Bt(()=>window.clearInterval(p));function U(F){n=F,t(1,n),t(2,l),t(15,k),t(14,p)}const T=(F,Q,R)=>E(F,R.id)-E(F,Q.id),M=(F,Q)=>Number(S[(o==null?void 0:o.choices.indexOf(Q))||0])-Number(S[(o==null?void 0:o.choices.indexOf(F))||0]);function te(F){a=F,t(4,a),t(2,l),t(15,k),t(1,n),t(14,p)}return i.$$.update=()=>{i.$$.dirty&49158&&(l.params!==k&&(!k||l.params.id!==k.id||l.params.artist!==k.artist?(n&&n.name!==l.params.artist&&t(1,n=t(4,a=void 0)),t(0,s=void 0),t(3,o=void 0),window.clearInterval(p),y()):l.params.pollId!==k.pollId&&(t(3,o=void 0),window.clearInterval(p),V())),t(15,k=l.params)),i.$$.dirty&3&&n&&s&&s.artist!==n.name&&Xt(`/gravity/${n.name}`)},[s,n,l,o,a,h,f,u,c,_,m,S,r,E,p,k,U,T,M,te]}class wr extends Qe{constructor(e){super(),Ge(this,e,fr,cr,Ve,{})}}export{wr as component,br as universal};
