import{n as H,w as Dt,x as Ct,s as Ye,d as ke,l as Ft,c as ie,g as Mt,b as kt,e as Et}from"../chunks/scheduler.7ddvVGuS.js";import{J as Pt,f as h,K as Ut,S as Ne,i as Re,e as $,a as S,g as b,m as T,s as D,h as w,j as A,n as j,c as C,k as g,x as m,o as z,A as Ee,l as X,G as Wt,E as ze,t as de,b as Ve,d as he,p as Be,B as It,r as Ce,u as Fe,v as Me,w as Pe,C as Oe,H as Yt,D as Nt}from"../chunks/index.XmLGRVaW.js";import{h as Rt,f as Qt,A as Gt,j as Ot,k as Ge,l as Tt,$ as Qe,S as De,C as ye,e as re,u as je,m as Le,d as jt,n as Xe,P as Ae}from"../chunks/apis.W9dsQ1rZ.js";import{g as Lt}from"../chunks/navigation.DbLLw-XM.js";import{p as qt}from"../chunks/stores.BkYfuQvk.js";import{A as Jt}from"../chunks/ArtistSelector.A8BbJXfd.js";import{g as Te}from"../chunks/assets.UUTeAooi.js";import{f as me}from"../chunks/units.vVRppVb4.js";import{p as Ht}from"../chunks/polygonscan.3rzyozVp.js";const At=typeof window<"u";let Zt=At?()=>window.performance.now():()=>Date.now(),qe=At?r=>requestAnimationFrame(r):H;const be=new Set;function St(r){be.forEach(e=>{e.c(r)||(be.delete(e),e.f())}),be.size!==0&&qe(St)}function zt(r){let e;return be.size===0&&qe(St),{promise:new Promise(t=>{be.add(e={c:r,f:t})}),abort(){be.delete(e)}}}const Ue=new Map;let We=0;function Xt(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Kt(r,e){const t={stylesheet:Ut(e),rules:{}};return Ue.set(r,t),t}function $t(r,e,t,l,i,o,s,n=0){const a=16.666/l;let d=`{
`;for(let E=0;E<=1;E+=a){const y=e+(t-e)*o(E);d+=E*100+`%{${s(y,1-y)}}
`}const f=d+`100% {${s(t,1-t)}}
}`,_=`__svelte_${Xt(f)}_${n}`,u=Pt(r),{stylesheet:c,rules:p}=Ue.get(u)||Kt(u,r);p[_]||(p[_]=!0,c.insertRule(`@keyframes ${_} ${f}`,c.cssRules.length));const v=r.style.animation||"";return r.style.animation=`${v?`${v}, `:""}${_} ${l}ms linear ${i}ms 1 both`,We+=1,_}function xt(r,e){const t=(r.style.animation||"").split(", "),l=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-l.length;i&&(r.style.animation=l.join(", "),We-=i,We||el())}function el(){qe(()=>{We||(Ue.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&h(e)}),Ue.clear())})}function Je(r,e,t,l){if(!e)return H;const i=r.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return H;const{delay:o=0,duration:s=300,easing:n=Dt,start:a=Zt()+o,end:d=a+s,tick:f=H,css:_}=t(r,{from:e,to:i},l);let u=!0,c=!1,p;function v(){_&&(p=$t(r,0,1,s,o,n,_)),o||(c=!0)}function E(){_&&xt(r,p),u=!1}return zt(y=>{if(!c&&y>=a&&(c=!0),c&&y>=d&&(f(1,0),E()),!u)return!1;if(c){const k=y-a,I=0+1*n(k/s);f(I,1-I)}return!0}),v(),f(0,1),E}function He(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=t,r.style.height=l,tl(r,i)}}function tl(r,e){const t=r.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(r),i=l.transform==="none"?"":l.transform;r.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function ll({params:r}){return r}const _i=Object.freeze(Object.defineProperty({__proto__:null,load:ll},Symbol.toStringTag,{value:"Module"})),il=Rt(Qt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var Ke=function(r,e,t,l){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function n(f){try{d(l.next(f))}catch(_){s(_)}}function a(f){try{d(l.throw(f))}catch(_){s(_)}}function d(f){f.done?o(f.value):i(f.value).then(n,a)}d((l=l.apply(r,e||[])).next())})},pe=function(r,e,t,l,i){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ae=function(r,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!l:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(r):l?l.value:e.get(r)},ge,_e,fe;class rl extends Gt{constructor(e){super(),ge.set(this,void 0),_e.set(this,void 0),fe.set(this,void 0),this.subprovider=e,pe(this,ge,[],"f"),pe(this,_e,10,"f"),pe(this,fe,null,"f")}get drainInterval(){return ae(this,_e,"f")}set drainInterval(e){e<0&&(e=-1),e!==ae(this,_e,"f")&&(pe(this,_e,e,"f"),ae(this,_e,"f")>=0?(ae(this,fe,"f")&&(clearTimeout(ae(this,fe,"f")),pe(this,fe,null,"f")),ae(this,ge,"f").length&&pe(this,fe,setTimeout(()=>{this.drainCallQueue()},ae(this,_e,"f")),"f")):ae(this,fe,"f")&&(clearTimeout(ae(this,fe,"f")),pe(this,fe,null,"f")))}queueCall(e,t){return ae(this,fe,"f")==null&&ae(this,_e,"f")>=0&&pe(this,fe,setTimeout(()=>{this.drainCallQueue()},ae(this,_e,"f")),"f"),new Promise((l,i)=>{ae(this,ge,"f").push({request:{to:e,data:t},resolve:l,reject:i})})}drainCallQueue(){return Ke(this,void 0,void 0,function*(){pe(this,fe,null,"f");const e=ae(this,ge,"f");pe(this,ge,[],"f");const t=Ot([il,Ge.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:n})=>[n.to,n.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:n})=>({to:n.to,data:n.data}))});const l=yield this.subprovider.call({data:t}),[i,o]=Ge.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:n},a)=>({to:n.to,data:n.data,status:o[a][0],result:o[a][1]}))});const s=[];for(let n=0;n<e.length;n++){const a=o[n],{resolve:d}=e[n];d({status:a[0],data:a[1]}),s.push({status:a[0],data:a[1]})}return s})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return Ke(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,i=t.data||"0x";Tt(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const o=yield this.queueCall(l,i);if(o.status)return o.data;throw Ge.getBuiltinCallException("call",{to:l,data:i},o.data)}return yield this.subprovider._perform(e)})}}ge=new WeakMap,_e=new WeakMap,fe=new WeakMap;function sl(r){const e=r-1;return e*e*e+1}function Ze(r,{from:e,to:t},l={}){const i=getComputedStyle(r),o=i.transform==="none"?"":i.transform,[s,n]=i.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*s/t.width-(t.left+s),d=e.top+e.height*n/t.height-(t.top+n),{delay:f=0,duration:_=c=>Math.sqrt(c)*120,easing:u=sl}=l;return{delay:f,duration:Ct(_)?_(Math.sqrt(a*a+d*d)):_,easing:u,css:(c,p)=>{const v=p*a,E=p*d,y=c+p*e.width/t.width,k=c+p*e.height/t.height;return`transform: ${o} translate(${v}px, ${E}px) scale(${y}, ${k});`}}}function ce(r){return r===null?"null":Array.isArray(r)?"array":typeof r}function ve(r){return ce(r)==="object"}function ol(r){return Array.isArray(r)&&r.length>0&&r.every(e=>"message"in e)}function $e(r,e){return r.length<124?r:e}const nl="graphql-transport-ws";var ue;(function(r){r[r.InternalServerError=4500]="InternalServerError",r[r.InternalClientError=4005]="InternalClientError",r[r.BadRequest=4400]="BadRequest",r[r.BadResponse=4004]="BadResponse",r[r.Unauthorized=4401]="Unauthorized",r[r.Forbidden=4403]="Forbidden",r[r.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",r[r.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",r[r.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",r[r.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",r[r.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(ue||(ue={}));var x;(function(r){r.ConnectionInit="connection_init",r.ConnectionAck="connection_ack",r.Ping="ping",r.Pong="pong",r.Subscribe="subscribe",r.Next="next",r.Error="error",r.Complete="complete"})(x||(x={}));function Vt(r){if(!ve(r))throw new Error(`Message is expected to be an object, but got ${ce(r)}`);if(!r.type)throw new Error("Message is missing the 'type' property");if(typeof r.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${ce(r.type)}`);switch(r.type){case x.ConnectionInit:case x.ConnectionAck:case x.Ping:case x.Pong:{if(r.payload!=null&&!ve(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${r.payload}"`);break}case x.Subscribe:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${ce(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!ve(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object, but got ${ce(r.payload)}`);if(typeof r.payload.query!="string")throw new Error(`"${r.type}" message payload expects the 'query' property to be a string, but got ${ce(r.payload.query)}`);if(r.payload.variables!=null&&!ve(r.payload.variables))throw new Error(`"${r.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${ce(r.payload.variables)}`);if(r.payload.operationName!=null&&ce(r.payload.operationName)!=="string")throw new Error(`"${r.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${ce(r.payload.operationName)}`);if(r.payload.extensions!=null&&!ve(r.payload.extensions))throw new Error(`"${r.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${ce(r.payload.extensions)}`);break}case x.Next:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${ce(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!ve(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object, but got ${ce(r.payload)}`);break}case x.Error:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${ce(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!ol(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(r.payload)}`);break}case x.Complete:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${ce(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${r.type}"`)}return r}function al(r,e){return Vt(typeof r=="string"?JSON.parse(r,e):r)}function Ie(r,e){return Vt(r),JSON.stringify(r,e)}var we=function(r){return this instanceof we?(this.v=r,this):new we(r)},cl=function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(u){l[u]&&(i[u]=function(c){return new Promise(function(p,v){o.push([u,c,p,v])>1||n(u,c)})})}function n(u,c){try{a(l[u](c))}catch(p){_(o[0][3],p)}}function a(u){u.value instanceof we?Promise.resolve(u.value.v).then(d,f):_(o[0][2],u)}function d(u){n("next",u)}function f(u){n("throw",u)}function _(u,c){u(c),o.shift(),o.length&&n(o[0][0],o[0][1])}};function fl(r){const{url:e,connectionParams:t,lazy:l=!0,onNonLazyError:i=console.error,lazyCloseTimeout:o=0,keepAlive:s=0,disablePong:n,connectionAckWaitTimeout:a=0,retryAttempts:d=5,retryWait:f=async function(L){let P=1e3;for(let W=0;W<L;W++)P*=2;await new Promise(W=>setTimeout(W,P+Math.floor(Math.random()*2700+300)))},shouldRetry:_=Se,isFatalConnectionProblem:u,on:c,webSocketImpl:p,generateID:v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,L=>{const P=Math.random()*16|0;return(L=="x"?P:P&3|8).toString(16)})},jsonMessageReplacer:E,jsonMessageReviver:y}=r;let k;if(p){if(!dl(p))throw new Error("Invalid WebSocket implementation provided");k=p}else typeof WebSocket<"u"?k=WebSocket:typeof global<"u"?k=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(k=window.WebSocket||window.MozWebSocket);if(!k)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const I=k,V=(()=>{const M=(()=>{const P={};return{on(W,O){return P[W]=O,()=>{delete P[W]}},emit(W){var O;"id"in W&&((O=P[W.id])===null||O===void 0||O.call(P,W))}}})(),L={connecting:c?.connecting?[c.connecting]:[],opened:c?.opened?[c.opened]:[],connected:c?.connected?[c.connected]:[],ping:c?.ping?[c.ping]:[],pong:c?.pong?[c.pong]:[],message:c?.message?[M.emit,c.message]:[M.emit],closed:c?.closed?[c.closed]:[],error:c?.error?[c.error]:[]};return{onMessage:M.on,on(P,W){const O=L[P];return O.push(W),()=>{O.splice(O.indexOf(W),1)}},emit(P,...W){for(const O of[...L[P]])O(...W)}}})();function Q(M){const L=[V.on("error",P=>{L.forEach(W=>W()),M(P)}),V.on("closed",P=>{L.forEach(W=>W()),M(P)})]}let q,U=0,J,F=!1,R=0,N=!1;async function G(){clearTimeout(J);const[M,L]=await(q??(q=new Promise((O,le)=>(async()=>{if(F){if(await f(R),!U)return q=void 0,le({code:1e3,reason:"All Subscriptions Gone"});R++}V.emit("connecting");const B=new I(typeof e=="function"?await e():e,nl);let Z,ne;function se(){isFinite(s)&&s>0&&(clearTimeout(ne),ne=setTimeout(()=>{B.readyState===I.OPEN&&(B.send(Ie({type:x.Ping})),V.emit("ping",!1,void 0))},s))}Q(ee=>{q=void 0,clearTimeout(Z),clearTimeout(ne),le(ee),Se(ee)&&ee.code===4499&&(B.close(4499,"Terminated"),B.onerror=null,B.onclose=null)}),B.onerror=ee=>V.emit("error",ee),B.onclose=ee=>V.emit("closed",ee),B.onopen=async()=>{try{V.emit("opened",B);const ee=typeof t=="function"?await t():t;if(B.readyState!==I.OPEN)return;B.send(Ie(ee?{type:x.ConnectionInit,payload:ee}:{type:x.ConnectionInit},E)),isFinite(a)&&a>0&&(Z=setTimeout(()=>{B.close(ue.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},a)),se()}catch(ee){V.emit("error",ee),B.close(ue.InternalClientError,$e(ee instanceof Error?ee.message:new Error(ee).message,"Internal client error"))}};let oe=!1;B.onmessage=({data:ee})=>{try{const te=al(ee,y);if(V.emit("message",te),te.type==="ping"||te.type==="pong"){V.emit(te.type,!0,te.payload),te.type==="pong"?se():n||(B.send(Ie(te.payload?{type:x.Pong,payload:te.payload}:{type:x.Pong})),V.emit("pong",!1,te.payload));return}if(oe)return;if(te.type!==x.ConnectionAck)throw new Error(`First message cannot be of type ${te.type}`);clearTimeout(Z),oe=!0,V.emit("connected",B,te.payload),F=!1,R=0,O([B,new Promise((si,Bt)=>Q(Bt))])}catch(te){B.onmessage=null,V.emit("error",te),B.close(ue.BadResponse,$e(te instanceof Error?te.message:new Error(te).message,"Bad response"))}}})())));M.readyState===I.CLOSING&&await L;let P=()=>{};const W=new Promise(O=>P=O);return[M,P,Promise.race([W.then(()=>{if(!U){const O=()=>M.close(1e3,"Normal Closure");isFinite(o)&&o>0?J=setTimeout(()=>{M.readyState===I.OPEN&&O()},o):O()}}),L])]}function K(M){if(Se(M)&&(ul(M.code)||[ue.InternalServerError,ue.InternalClientError,ue.BadRequest,ue.BadResponse,ue.Unauthorized,ue.SubprotocolNotAcceptable,ue.SubscriberAlreadyExists,ue.TooManyInitialisationRequests].includes(M.code)))throw M;if(N)return!1;if(Se(M)&&M.code===1e3)return U>0;if(!d||R>=d||!_(M)||u?.(M))throw M;return F=!0}l||(async()=>{for(U++;;)try{const[,,M]=await G();await M}catch(M){try{if(!K(M))return}catch(L){return i?.(L)}}})();function Y(M,L){const P=v(M);let W=!1,O=!1,le=()=>{U--,W=!0};return(async()=>{for(U++;;)try{const[B,Z,ne]=await G();if(W)return Z();const se=V.onMessage(P,oe=>{switch(oe.type){case x.Next:{L.next(oe.payload);return}case x.Error:{O=!0,W=!0,L.error(oe.payload),le();return}case x.Complete:{W=!0,le();return}}});B.send(Ie({id:P,type:x.Subscribe,payload:M},E)),le=()=>{!W&&B.readyState===I.OPEN&&B.send(Ie({id:P,type:x.Complete},E)),U--,W=!0,Z()},await ne.finally(se);return}catch(B){if(!K(B))return}})().then(()=>{O||L.complete()}).catch(B=>{L.error(B)}),()=>{W||le()}}return{on:V.on,subscribe:Y,iterate(M){const L=[],P={done:!1,error:null,resolve:()=>{}},W=Y(M,{next(le){L.push(le),P.resolve()},error(le){P.done=!0,P.error=le,P.resolve()},complete(){P.done=!0,P.resolve()}}),O=function(){return cl(this,arguments,function*(){for(;;){for(L.length||(yield we(new Promise(Z=>P.resolve=Z)));L.length;)yield yield we(L.shift());if(P.error)throw P.error;if(P.done)return yield we(void 0)}})}();return O.throw=async le=>(P.done||(P.done=!0,P.error=le,P.resolve()),{done:!0,value:void 0}),O.return=async()=>(W(),{done:!0,value:void 0}),O},async dispose(){if(N=!0,q){const[M]=await q;M.close(1e3,"Normal Closure")}},terminate(){q&&V.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function Se(r){return ve(r)&&"code"in r&&"reason"in r}function ul(r){return[1e3,1001,1006,1005,1012,1013,1014].includes(r)?!1:r>=1e3&&r<=1999}function dl(r){return typeof r=="function"&&"constructor"in r&&"CLOSED"in r&&"CLOSING"in r&&"CONNECTING"in r&&"OPEN"in r}function hl(r,e,t){const l=r.slice();return l[20]=e[t],l[19]=t,l}function xe(r,e,t){const l=r.slice();l[16]=e[t],l[19]=t;const i=l[3].find(function(...s){return r[10](l[16],...s)});return l[17]=i,l}function pl(r){let e,t,l,i=r[4]("gravity.votes.title")+"",o,s,n,a=r[4]("gravity.votes.subtitle")+"",d,f;function _(p,v){return p[2].length?gl:ml}let u=_(r),c=u(r);return{c(){e=b("div"),t=b("div"),l=b("b"),o=T(i),s=D(),n=b("p"),d=T(a),f=D(),c.c(),this.h()},l(p){e=w(p,"DIV",{class:!0});var v=A(e);t=w(v,"DIV",{class:!0});var E=A(t);l=w(E,"B",{});var y=A(l);o=j(y,i),y.forEach(h),s=C(E),n=w(E,"P",{});var k=A(n);d=j(k,a),k.forEach(h),E.forEach(h),f=C(v),c.l(v),v.forEach(h),this.h()},h(){g(t,"class","header svelte-rkwmij"),g(e,"class","votes svelte-rkwmij")},m(p,v){S(p,e,v),m(e,t),m(t,l),m(l,o),m(t,s),m(t,n),m(n,d),m(e,f),c.m(e,null)},p(p,v){v&16&&i!==(i=p[4]("gravity.votes.title")+"")&&z(o,i),v&16&&a!==(a=p[4]("gravity.votes.subtitle")+"")&&z(d,a),u===(u=_(p))&&c?c.p(p,v):(c.d(1),c=u(p),c&&(c.c(),c.m(e,null)))},d(p){p&&h(e),c.d()}}}function _l(r){let e,t,l=r[4]("gravity.votes.countdown")+"",i,o,s,n=String(Math.floor(r[1]%(24*60*60*1e3)/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[1]%(60*1e3)/1e3)).padStart(2,"0"),a;return{c(){e=b("div"),t=b("p"),i=T(l),o=D(),s=b("h3"),a=T(n),this.h()},l(d){e=w(d,"DIV",{class:!0});var f=A(e);t=w(f,"P",{});var _=A(t);i=j(_,l),_.forEach(h),o=C(f),s=w(f,"H3",{class:!0});var u=A(s);a=j(u,n),u.forEach(h),f.forEach(h),this.h()},h(){g(s,"class","svelte-rkwmij"),g(e,"class","countdown svelte-rkwmij")},m(d,f){S(d,e,f),m(e,t),m(t,i),m(e,o),m(e,s),m(s,a)},p(d,f){f&16&&l!==(l=d[4]("gravity.votes.countdown")+"")&&z(i,l),f&2&&n!==(n=String(Math.floor(d[1]%(24*60*60*1e3)/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[1]%(60*1e3)/1e3)).padStart(2,"0"))&&z(a,n)},d(d){d&&h(e)}}}function ml(r){let e,t=re({length:50}),l=[];for(let i=0;i<t.length;i+=1)l[i]=vl(hl(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p:H,d(i){i&&h(e),Ee(l,i)}}}function gl(r){let e=[],t=new Map,l,i=re(r[2]);const o=s=>s[16].id;for(let s=0;s<i.length;s+=1){let n=xe(r,i,s),a=o(n);t.set(a,e[s]=et(a,n))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=$()},l(s){for(let n=0;n<e.length;n+=1)e[n].l(s);l=$()},m(s,n){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,n);S(s,l,n)},p(s,n){if(n&61){i=re(s[2]);for(let a=0;a<e.length;a+=1)e[a].r();e=je(e,n,o,1,s,i,t,l.parentNode,Le,et,l,xe);for(let a=0;a<e.length;a+=1)e[a].a()}},d(s){s&&h(l);for(let n=0;n<e.length;n+=1)e[n].d(s)}}}function vl(r){let e,t,l,i,o,s,n,a,d,f;return{c(){e=b("div"),t=b("div"),l=D(),i=b("div"),o=D(),s=b("div"),n=b("div"),a=D(),d=b("div"),f=D(),this.h()},l(_){e=w(_,"DIV",{class:!0});var u=A(e);t=w(u,"DIV",{class:!0}),A(t).forEach(h),l=C(u),i=w(u,"DIV",{class:!0}),A(i).forEach(h),o=C(u),s=w(u,"DIV",{class:!0});var c=A(s);n=w(c,"DIV",{class:!0}),A(n).forEach(h),a=C(c),d=w(c,"DIV",{class:!0}),A(d).forEach(h),c.forEach(h),f=C(u),u.forEach(h),this.h()},h(){g(t,"class","placeholder svelte-rkwmij"),X(t,"width","110px"),X(t,"margin-right","auto"),g(i,"class","placeholder svelte-rkwmij"),X(i,"width","60px"),g(n,"class","placeholder svelte-rkwmij"),X(n,"width","40px"),g(d,"class","placeholder svelte-rkwmij"),X(d,"width","110px"),g(s,"class","details svelte-rkwmij"),g(e,"class","vote svelte-rkwmij")},m(_,u){S(_,e,u),m(e,t),m(e,l),m(e,i),m(e,o),m(e,s),m(s,n),m(s,a),m(s,d),m(e,f)},p:H,d(_){_&&h(e)}}}function yl(r){let e,t=r[4]("gravity.votes.unrevealed")+"",l;return{c(){e=b("i"),l=T(t)},l(i){e=w(i,"I",{});var o=A(e);l=j(o,t),o.forEach(h)},m(i,o){S(i,e,o),m(e,l)},p(i,o){o&16&&t!==(t=i[4]("gravity.votes.unrevealed")+"")&&z(l,t)},d(i){i&&h(e)}}}function bl(r){let e,t,l,i,o=(r[0].choices[r[16].candidate].title||tt(r[0],r[16].candidate))+"",s;return{c(){e=b("p"),t=b("img"),i=D(),s=T(o),this.h()},l(n){e=w(n,"P",{class:!0});var a=A(e);t=w(a,"IMG",{src:!0,alt:!0,class:!0}),i=C(a),s=j(a,o),a.forEach(h),this.h()},h(){ie(t.src,l=r[0].choices[r[16].candidate].txImageUrl)||g(t,"src",l),g(t,"alt","Choice"),g(t,"class","svelte-rkwmij"),g(e,"class","candidate svelte-rkwmij")},m(n,a){S(n,e,a),m(e,t),m(e,i),m(e,s)},p(n,a){a&5&&!ie(t.src,l=n[0].choices[n[16].candidate].txImageUrl)&&g(t,"src",l),a&5&&o!==(o=(n[0].choices[n[16].candidate].title||tt(n[0],n[16].candidate))+"")&&z(s,o)},d(n){n&&h(e)}}}function et(r,e){let t,l,i,o,s,n=(e[17]?.nickname||e[17]?.address.slice(0,6)+"..."+e[17]?.address.slice(-4))+"",a,d,f,_,u=Number(me(e[16].amount)).toLocaleString("en-US")+"",c,p,v,E,y,k,I,V=new Date(Number(e[16].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",Q,q,U,J,F=H;function R(K,Y){return K[16].candidate!==null?bl:yl}let N=R(e),G=N(e);return{key:r,first:null,c(){t=b("div"),l=b("a"),i=b("img"),s=D(),a=T(n),f=D(),_=b("p"),c=T(u),p=D(),v=b("img"),y=D(),k=b("div"),I=b("span"),Q=T(V),q=D(),G.c(),U=D(),this.h()},l(K){t=w(K,"DIV",{class:!0});var Y=A(t);l=w(Y,"A",{href:!0,class:!0});var M=A(l);i=w(M,"IMG",{class:!0,src:!0,alt:!0}),s=C(M),a=j(M,n),M.forEach(h),f=C(Y),_=w(Y,"P",{});var L=A(_);c=j(L,u),L.forEach(h),p=C(Y),v=w(Y,"IMG",{src:!0,alt:!0,class:!0}),y=C(Y),k=w(Y,"DIV",{class:!0});var P=A(k);I=w(P,"SPAN",{});var W=A(I);Q=j(W,V),W.forEach(h),q=C(P),G.l(P),P.forEach(h),U=C(Y),Y.forEach(h),this.h()},h(){g(i,"class","profileImage svelte-rkwmij"),ie(i.src,o="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||g(i,"src",o),g(i,"alt","User"),g(l,"href",d="/@"+(e[17]?.nickname||e[17]?.address)),g(l,"class","svelte-rkwmij"),ie(v.src,E=e[5])||g(v,"src",E),g(v,"alt","COMO"),g(v,"class","svelte-rkwmij"),g(k,"class","details svelte-rkwmij"),g(t,"class","vote svelte-rkwmij"),this.first=t},m(K,Y){S(K,t,Y),m(t,l),m(l,i),m(l,s),m(l,a),m(t,f),m(t,_),m(_,c),m(t,p),m(t,v),m(t,y),m(t,k),m(k,I),m(I,Q),m(k,q),G.m(k,null),m(t,U)},p(K,Y){e=K,Y&12&&n!==(n=(e[17]?.nickname||e[17]?.address.slice(0,6)+"..."+e[17]?.address.slice(-4))+"")&&z(a,n),Y&12&&d!==(d="/@"+(e[17]?.nickname||e[17]?.address))&&g(l,"href",d),Y&4&&u!==(u=Number(me(e[16].amount)).toLocaleString("en-US")+"")&&z(c,u),Y&4&&V!==(V=new Date(Number(e[16].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&z(Q,V),N===(N=R(e))&&G?G.p(e,Y):(G.d(1),G=N(e),G&&(G.c(),G.m(k,null)))},r(){J=t.getBoundingClientRect()},f(){He(t),F()},a(){F(),F=Je(t,J,Ze,{})},d(K){K&&h(t),G.d()}}}function wl(r){let e;function t(o,s){return o[1]>-1?_l:pl}let l=t(r),i=l(r);return{c(){i.c(),e=$()},l(o){i.l(o),e=$()},m(o,s){i.m(o,s),S(o,e,s)},p(o,[s]){l===(l=t(o))&&i?i.p(o,s):(i.d(1),i=l(o),i&&(i.c(),i.m(e.parentNode,e)))},i:H,o:H,d(o){o&&h(e),i.d(o)}}}function tt(r,e){const t=r.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((i,o)=>`${i.name}: ${t.slotChoices?.find(s=>s.id===l.slotChoiceIds[o])?.alias}`).join(", ")}return r.choices[e].id}function kl(r,e,t){let l;ke(r,Qe,I=>t(4,l=I));let{voteStart:i}=e,{contract:o}=e,{poll:s}=e,{pollId:n}=e,{artist:a}=e,d=-1,f;const _=fl({url:De.WS_URL}),u=`
        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${o.toLowerCase()}", poll_eq: "${n}"})  {
            ${Object.keys(De.Vote).join(`
`)}
        }
    `;let c=[],p=[];const v=Te(a).como;i>Date.now()?(f=window.setInterval(()=>{i>Date.now()?t(1,d=i-Date.now()):(E(),t(1,d=-1),window.clearInterval(f))},1e3),d=i-Date.now()):E();async function E(){const V=await(await fetch(De.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {${u}}`})})).json();await y(V.data.votes),(!c.length||c.filter(Q=>Q.candidate===null).length)&&_.subscribe({query:`subscrioption {${u}}`},{next:async Q=>{Q.data&&(await y(Q.data.votes),c.length&&!c.filter(q=>q.candidate===null).length&&_.dispose())},error:Q=>{console.error("WS error: ",Q)},complete:()=>{}})}async function y(I){const V=I.filter(Q=>!p.find(q=>q.address===Q.from)).map(Q=>Q.from);if(V.length){const q=await(await fetch(`${ye.URL}/user/v1/by-address/${V.join(",")}`)).json();t(3,p=[...p,...q,...V.filter(U=>!q.find(J=>J.address===U)).map(U=>({nickname:"",address:U,profileImageUrl:""}))])}t(2,c=I)}Ft(()=>{_.dispose(),window.clearInterval(f)});const k=(I,V)=>V.address===I.from;return r.$$set=I=>{"voteStart"in I&&t(6,i=I.voteStart),"contract"in I&&t(7,o=I.contract),"poll"in I&&t(0,s=I.poll),"pollId"in I&&t(8,n=I.pollId),"artist"in I&&t(9,a=I.artist)},[s,d,c,p,l,v,i,o,n,a,k]}class El extends Ne{constructor(e){super(),Re(this,e,kl,wl,Ye,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function lt(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function it(r){let e,t=re(r[4]),l=[];for(let i=0;i<t.length;i+=1)l[i]=rt(lt(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p(i,o){if(o&23){t=re(i[4]);let s;for(s=0;s<t.length;s+=1){const n=lt(i,t,s);l[s]?l[s].p(n,o):(l[s]=rt(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&h(e),Ee(l,i)}}}function rt(r){let e,t,l=`${r[2]?r[10]/Math.max(...r[4])*100:10}%`;return{c(){e=b("div"),this.h()},l(i){e=w(i,"DIV",{class:!0,title:!0}),A(e).forEach(h),this.h()},h(){g(e,"class","bar svelte-wua4q2"),g(e,"title",t=r[10].toLocaleString("en-US")+" COMO"),ze(e,"active",r[2]&&r[0]/r[1]>=r[12]/r[4].length),X(e,"height",l)},m(i,o){S(i,e,o)},p(i,o){o&16&&t!==(t=i[10].toLocaleString("en-US")+" COMO")&&g(e,"title",t),o&23&&ze(e,"active",i[2]&&i[0]/i[1]>=i[12]/i[4].length),o&20&&l!==(l=`${i[2]?i[10]/Math.max(...i[4])*100:10}%`)&&X(e,"height",l)},d(i){i&&h(e)}}}function Il(r){let e,t,l,i,o,s,n=`${r[0]/r[1]*100}%`,a,d,f,_=r[5]("gravity.totalvotes",{values:{votes:`${r[6](r[0])}/${r[6](r[1])}`}})+"",u,c,p=Math.round(r[0]/r[1]*100)+"",v,E,y=r[4]&&it(r);return{c(){e=b("div"),t=b("div"),y&&y.c(),i=D(),o=b("div"),s=b("div"),a=D(),d=b("div"),f=b("p"),u=T(_),c=T(" ("),v=T(p),E=T("%)"),this.h()},l(k){e=w(k,"DIV",{class:!0});var I=A(e);t=w(I,"DIV",{class:!0});var V=A(t);y&&y.l(V),V.forEach(h),i=C(I),o=w(I,"DIV",{class:!0});var Q=A(o);s=w(Q,"DIV",{class:!0}),A(s).forEach(h),Q.forEach(h),a=C(I),d=w(I,"DIV",{class:!0});var q=A(d);f=w(q,"P",{});var U=A(f);u=j(U,_),c=j(U," ("),v=j(U,p),E=j(U,"%)"),U.forEach(h),q.forEach(h),I.forEach(h),this.h()},h(){g(t,"class","bars svelte-wua4q2"),Mt(()=>r[9].call(t)),g(s,"class","progress svelte-wua4q2"),X(s,"width",n),g(o,"class","progressBar svelte-wua4q2"),g(d,"class","text svelte-wua4q2"),g(e,"class","graph svelte-wua4q2")},m(k,I){S(k,e,I),m(e,t),y&&y.m(t,null),l=Wt(t,r[9].bind(t)),m(e,i),m(e,o),m(o,s),m(e,a),m(e,d),m(d,f),m(f,u),m(f,c),m(f,v),m(f,E)},p(k,[I]){k[4]?y?y.p(k,I):(y=it(k),y.c(),y.m(t,null)):y&&(y.d(1),y=null),I&3&&n!==(n=`${k[0]/k[1]*100}%`)&&X(s,"width",n),I&99&&_!==(_=k[5]("gravity.totalvotes",{values:{votes:`${k[6](k[0])}/${k[6](k[1])}`}})+"")&&z(u,_),I&3&&p!==(p=Math.round(k[0]/k[1]*100)+"")&&z(v,p)},i:H,o:H,d(k){k&&h(e),y&&y.d(),l()}}}function Al(r,e,t){let l,i;ke(r,Qe,c=>t(5,l=c)),ke(r,jt,c=>t(6,i=c));let{contract:o}=e,{poll:s}=e,{revealedVotes:n}=e,{totalVotes:a}=e,d;fetch(De.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(where: {contract_eq: "${o}", poll_eq: "${s}"}) {
                        amount
                    }
                }
            `})}).then(async c=>{const p=await c.json();t(2,d=p.data.votes.map(v=>Number(me(v.amount))))});let f,_;function u(){f=this.clientWidth,t(3,f)}return r.$$set=c=>{"contract"in c&&t(7,o=c.contract),"poll"in c&&t(8,s=c.poll),"revealedVotes"in c&&t(0,n=c.revealedVotes),"totalVotes"in c&&t(1,a=c.totalVotes)},r.$$.update=()=>{if(r.$$.dirty&12&&f)if(d){let c=[...d],p=[];for(let v=(f-10)/20;v>0;v--)p.push(c.splice(0,Math.ceil(c.length/v)).reduce((E,y)=>E+y,0));t(4,_=p)}else t(4,_=Array(Math.floor((f-10)/20)).fill(0))},[n,a,d,f,_,l,i,o,s,u]}class Sl extends Ne{constructor(e){super(),Re(this,e,Al,Il,Ye,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function Vl(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function st(r,e,t){const l=r.slice();return l[4]=e[t],l}function ot(r,e,t){const l=r.slice();return l[7]=e[t],l}function Bl(r){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),A(e).forEach(h),this.h()},h(){g(e,"class","placeholder svelte-yh8t4e"),X(e,"Width","80px")},m(t,l){S(t,e,l)},p:H,d(t){t&&h(e)}}}function Dl(r){let e,t=r[1]("gravity.history.subtitle",{values:{count:r[0].length}})+"",l;return{c(){e=b("p"),l=T(t)},l(i){e=w(i,"P",{});var o=A(e);l=j(o,t),o.forEach(h)},m(i,o){S(i,e,o),m(e,l)},p(i,o){o&3&&t!==(t=i[1]("gravity.history.subtitle",{values:{count:i[0].length}})+"")&&z(l,t)},d(i){i&&h(e)}}}function Cl(r){let e,t=re({length:5}),l=[];for(let i=0;i<t.length;i+=1)l[i]=Ml(Vl(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p:H,d(i){i&&h(e),Ee(l,i)}}}function Fl(r){let e,t=re(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ct(st(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p(i,o){if(o&1){t=re(i[0]);let s;for(s=0;s<t.length;s+=1){const n=st(i,t,s);l[s]?l[s].p(n,o):(l[s]=ct(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&h(e),Ee(l,i)}}}function Ml(r){let e,t,l,i,o,s;return{c(){e=b("div"),t=b("div"),l=D(),i=b("div"),o=D(),s=b("hr"),this.h()},l(n){e=w(n,"DIV",{class:!0});var a=A(e);t=w(a,"DIV",{class:!0}),A(t).forEach(h),l=C(a),i=w(a,"DIV",{class:!0}),A(i).forEach(h),a.forEach(h),o=C(n),s=w(n,"HR",{}),this.h()},h(){g(t,"class","placeholder imgPlaceholder svelte-yh8t4e"),g(i,"class","placeholder svelte-yh8t4e"),X(i,"width","calc(100% - 60px)"),g(e,"class","gravity svelte-yh8t4e")},m(n,a){S(n,e,a),m(e,t),m(e,l),m(e,i),S(n,o,a),S(n,s,a)},p:H,d(n){n&&(h(e),h(o),h(s))}}}function Pl(r){let e,t=r[4].title+"",l,i;return{c(){e=b("a"),l=T(t),this.h()},l(o){e=w(o,"A",{class:!0,href:!0});var s=A(e);l=j(s,t),s.forEach(h),this.h()},h(){g(e,"class","title svelte-yh8t4e"),g(e,"href",i="/gravity/"+r[4].artist+"/"+r[4].id)},m(o,s){S(o,e,s),m(e,l)},p(o,s){s&1&&t!==(t=o[4].title+"")&&z(l,t),s&1&&i!==(i="/gravity/"+o[4].artist+"/"+o[4].id)&&g(e,"href",i)},d(o){o&&h(e)}}}function Ul(r){let e,t=r[4].title+"",l;return{c(){e=b("p"),l=T(t)},l(i){e=w(i,"P",{});var o=A(e);l=j(o,t),o.forEach(h)},m(i,o){S(i,e,o),m(e,l)},p(i,o){o&1&&t!==(t=i[4].title+"")&&z(l,t)},d(i){i&&h(e)}}}function nt(r){let e,t=re(r[4].polls.sort(r[3])),l=[];for(let i=0;i<t.length;i+=1)l[i]=at(ot(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p(i,o){if(o&1){t=re(i[4].polls.sort(i[3]));let s;for(s=0;s<t.length;s+=1){const n=ot(i,t,s);l[s]?l[s].p(n,o):(l[s]=at(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&h(e),Ee(l,i)}}}function at(r){let e,t,l=r[7].title+"",i,o,s,n,a=new Date(r[7].startDate).toLocaleDateString()+"",d,f;return{c(){e=b("div"),t=b("a"),i=T(l),s=D(),n=b("p"),d=T(a),f=D(),this.h()},l(_){e=w(_,"DIV",{class:!0});var u=A(e);t=w(u,"A",{href:!0,class:!0});var c=A(t);i=j(c,l),c.forEach(h),s=C(u),n=w(u,"P",{});var p=A(n);d=j(p,a),p.forEach(h),f=C(u),u.forEach(h),this.h()},h(){g(t,"href",o="/gravity/"+r[4].artist+"/"+r[4].id+"/"+r[7].id),g(t,"class","svelte-yh8t4e"),g(e,"class","poll svelte-yh8t4e")},m(_,u){S(_,e,u),m(e,t),m(t,i),m(e,s),m(e,n),m(n,d),m(e,f)},p(_,u){u&1&&l!==(l=_[7].title+"")&&z(i,l),u&1&&o!==(o="/gravity/"+_[4].artist+"/"+_[4].id+"/"+_[7].id)&&g(t,"href",o),u&1&&a!==(a=new Date(_[7].startDate).toLocaleDateString()+"")&&z(d,a)},d(_){_&&h(e)}}}function ct(r){let e,t,l,i,o,s,n,a;function d(c,p){return c[4].polls.length>1?Ul:Pl}let f=d(r),_=f(r),u=r[4].polls.length>1&&nt(r);return{c(){e=b("div"),t=b("img"),o=D(),_.c(),s=D(),u&&u.c(),n=D(),a=b("hr"),this.h()},l(c){e=w(c,"DIV",{class:!0});var p=A(e);t=w(p,"IMG",{src:!0,alt:!0,class:!0}),o=C(p),_.l(p),p.forEach(h),s=C(c),u&&u.l(c),n=C(c),a=w(c,"HR",{}),this.h()},h(){ie(t.src,l=r[4].bannerImageUrl)||g(t,"src",l),g(t,"alt",i=r[4].title),g(t,"class","svelte-yh8t4e"),g(e,"class","gravity svelte-yh8t4e")},m(c,p){S(c,e,p),m(e,t),m(e,o),_.m(e,null),S(c,s,p),u&&u.m(c,p),S(c,n,p),S(c,a,p)},p(c,p){p&1&&!ie(t.src,l=c[4].bannerImageUrl)&&g(t,"src",l),p&1&&i!==(i=c[4].title)&&g(t,"alt",i),f===(f=d(c))&&_?_.p(c,p):(_.d(1),_=f(c),_&&(_.c(),_.m(e,null))),c[4].polls.length>1?u?u.p(c,p):(u=nt(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},d(c){c&&(h(e),h(s),h(n),h(a)),_.d(),u&&u.d(c)}}}function Wl(r){let e,t,l,i=r[1]("gravity.history.title")+"",o,s,n;function a(p,v){return p[0]?Dl:Bl}let d=a(r),f=d(r);function _(p,v){return p[0]?Fl:Cl}let u=_(r),c=u(r);return{c(){e=b("div"),t=b("div"),l=b("b"),o=T(i),s=D(),f.c(),n=D(),c.c(),this.h()},l(p){e=w(p,"DIV",{class:!0});var v=A(e);t=w(v,"DIV",{class:!0});var E=A(t);l=w(E,"B",{});var y=A(l);o=j(y,i),y.forEach(h),s=C(E),f.l(E),E.forEach(h),n=C(v),c.l(v),v.forEach(h),this.h()},h(){g(t,"class","header svelte-yh8t4e"),g(e,"class","history svelte-yh8t4e")},m(p,v){S(p,e,v),m(e,t),m(t,l),m(l,o),m(t,s),f.m(t,null),m(e,n),c.m(e,null)},p(p,[v]){v&2&&i!==(i=p[1]("gravity.history.title")+"")&&z(o,i),d===(d=a(p))&&f?f.p(p,v):(f.d(1),f=d(p),f&&(f.c(),f.m(t,null))),u===(u=_(p))&&c?c.p(p,v):(c.d(1),c=u(p),c&&(c.c(),c.m(e,null)))},i:H,o:H,d(p){p&&h(e),f.d(),c.d()}}}function Yl(r,e,t){let l;ke(r,Qe,n=>t(1,l=n));let{artist:i}=e,{gravities:o=void 0}=e;o||fetch(`${ye.URL}/gravity/v3/${i.name}`).then(async n=>{const a=await n.json();t(0,o=[...a.upcoming,...a.ongoing,...a.past])});const s=(n,a)=>Date.parse(n.startDate)-Date.parse(a.startDate);return r.$$set=n=>{"artist"in n&&t(2,i=n.artist),"gravities"in n&&t(0,o=n.gravities)},[o,l,i,s]}class Nl extends Ne{constructor(e){super(),Re(this,e,Yl,Wl,Ye,{artist:2,gravities:0})}}function ft(r,e,t){const l=r.slice();l[25]=e[t];const i=Math.round(Number(me(l[10][l[2].choices.indexOf(l[25])]))/l[9]*100);return l[26]=i,l}function ut(r,e,t){const l=r.slice();return l[22]=e[t],l[24]=t,l}function dt(r,e,t){const l=r.slice();l[25]=e[t];const i=Math.round(l[12](l[24],l[25].id)/l[10].reduce((o,s)=>o+Number(me(s)),0)*100);return l[26]=i,l}function Rl(r){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),A(e).forEach(h),this.h()},h(){g(e,"class","placeholder svelte-1i6y7e6"),X(e,"width","85px")},m(t,l){S(t,e,l)},p:H,i:H,o:H,d(t){t&&h(e)}}}function Ql(r){let e,t,l;function i(s){r[15](s)}let o={};return r[1]!==void 0&&(o.selected=r[1]),e=new Jt({props:o}),kt.push(()=>It(e,"selected",i)),{c(){Ce(e.$$.fragment)},l(s){Fe(e.$$.fragment,s)},m(s,n){Me(e,s,n),l=!0},p(s,n){const a={};!t&&n&2&&(t=!0,a.selected=s[1],Et(()=>t=!1)),e.$set(a)},i(s){l||(he(e.$$.fragment,s),l=!0)},o(s){de(e.$$.fragment,s),l=!1},d(s){Pe(e,s)}}}function Gl(r){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(i){e=w(i,"DIV",{class:!0}),A(e).forEach(h),t=C(i),l=w(i,"DIV",{class:!0}),A(l).forEach(h),this.h()},h(){g(e,"class","placeholder svelte-1i6y7e6"),X(e,"width","50px"),g(l,"class","placeholder svelte-1i6y7e6"),X(l,"margin-left","auto"),X(l,"width","135px")},m(i,o){S(i,e,o),S(i,t,o),S(i,l,o)},p:H,d(i){i&&(h(e),h(t),h(l))}}}function Ol(r){let e,t,l,i,o,s,n,a,d;function f(c,p){if(c[0].type==="event-gravity")return Ll;if(c[0].type==="grand-gravity")return jl;if(c[0].type==="solo-gravity")return Tl}let _=f(r),u=_&&_(r);return{c(){e=b("div"),u&&u.c(),l=D(),i=b("a"),o=b("img"),n=T(`
                        PolygonScan`),this.h()},l(c){e=w(c,"DIV",{class:!0});var p=A(e);u&&u.l(p),p.forEach(h),l=C(c),i=w(c,"A",{class:!0,href:!0,title:!0});var v=A(i);o=w(v,"IMG",{src:!0,alt:!0,class:!0}),n=j(v,`
                        PolygonScan`),v.forEach(h),this.h()},h(){g(e,"class",t="gravityType "+r[0].type+" svelte-1i6y7e6"),ie(o.src,s=Ht)||g(o,"src",s),g(o,"alt","PolygonScan"),g(o,"class","svelte-1i6y7e6"),g(i,"class","polygonscan svelte-1i6y7e6"),g(i,"href",a=r[0].contractOutlink),g(i,"title",d="Poll ID: "+r[5])},m(c,p){S(c,e,p),u&&u.m(e,null),S(c,l,p),S(c,i,p),m(i,o),m(i,n)},p(c,p){_!==(_=f(c))&&(u&&u.d(1),u=_&&_(c),u&&(u.c(),u.m(e,null))),p&1&&t!==(t="gravityType "+c[0].type+" svelte-1i6y7e6")&&g(e,"class",t),p&1&&a!==(a=c[0].contractOutlink)&&g(i,"href",a),p&32&&d!==(d="Poll ID: "+c[5])&&g(i,"title",d)},d(c){c&&(h(e),h(l),h(i)),u&&u.d()}}}function Tl(r){let e;return{c(){e=T("Solo")},l(t){e=j(t,"Solo")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function jl(r){let e;return{c(){e=T("Grand")},l(t){e=j(t,"Grand")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function Ll(r){let e;return{c(){e=T("Event")},l(t){e=j(t,"Event")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function ql(r){let e,t='<div class="placeholder svelte-1i6y7e6"></div> <div class="placeholder svelte-1i6y7e6"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){g(e,"class","titlePlaceholder svelte-1i6y7e6")},m(l,i){S(l,e,i)},p:H,d(l){l&&h(e)}}}function Jl(r){let e,t,l=r[0].title.replaceAll(`
`,r[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=b("h1"),t=new Yt(!1),this.h()},l(i){e=w(i,"H1",{class:!0});var o=A(e);t=Nt(o,!1),o.forEach(h),this.h()},h(){t.a=null,g(e,"class","svelte-1i6y7e6")},m(i,o){S(i,e,o),t.m(l,e)},p(i,o){o&1&&l!==(l=i[0].title.replaceAll(`
`,i[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(i){i&&h(e)}}}function Hl(r){let e,t,l,i,o;return{c(){e=b("div"),t=D(),l=b("div"),i=D(),o=b("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),A(e).forEach(h),t=C(s),l=w(s,"DIV",{class:!0}),A(l).forEach(h),i=C(s),o=w(s,"DIV",{class:!0}),A(o).forEach(h),this.h()},h(){g(e,"class","placeholder svelte-1i6y7e6"),X(e,"width","50px"),g(l,"class","placeholder svelte-1i6y7e6"),X(l,"width","150px"),g(o,"class","placeholder svelte-1i6y7e6"),X(o,"margin-left","auto"),X(o,"width","65px")},m(s,n){S(s,e,n),S(s,t,n),S(s,l,n),S(s,i,n),S(s,o,n)},p:H,d(s){s&&(h(e),h(t),h(l),h(i),h(o))}}}function Zl(r){let e,t,l=new Date(r[2].startDate).toLocaleDateString()+"",i,o,s,n=r[0].polls.length>1&&ht(r),a=(r[6]>-1||r[7]<r[8])&&pt();return{c(){n&&n.c(),e=D(),t=b("p"),i=T(l),o=D(),a&&a.c(),s=$(),this.h()},l(d){n&&n.l(d),e=C(d),t=w(d,"P",{class:!0});var f=A(t);i=j(f,l),f.forEach(h),o=C(d),a&&a.l(d),s=$(),this.h()},h(){g(t,"class","svelte-1i6y7e6")},m(d,f){n&&n.m(d,f),S(d,e,f),S(d,t,f),m(t,i),S(d,o,f),a&&a.m(d,f),S(d,s,f)},p(d,f){d[0].polls.length>1?n?n.p(d,f):(n=ht(d),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f&4&&l!==(l=new Date(d[2].startDate).toLocaleDateString()+"")&&z(i,l),d[6]>-1||d[7]<d[8]?a||(a=pt(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(d){d&&(h(e),h(t),h(o),h(s)),n&&n.d(d),a&&a.d(d)}}}function ht(r){let e,t=r[2].title+"",l;return{c(){e=b("p"),l=T(t),this.h()},l(i){e=w(i,"P",{class:!0});var o=A(e);l=j(o,t),o.forEach(h),this.h()},h(){g(e,"class","svelte-1i6y7e6")},m(i,o){S(i,e,o),m(e,l)},p(i,o){o&4&&t!==(t=i[2].title+"")&&z(l,t)},d(i){i&&h(e)}}}function pt(r){let e,t='<div class="dot"></div>',l,i,o="LIVE";return{c(){e=b("div"),e.innerHTML=t,l=D(),i=b("p"),i.textContent=o,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=C(s),i=w(s,"P",{class:!0,"data-svelte-h":!0}),Oe(i)!=="svelte-1k24nxm"&&(i.textContent=o),this.h()},h(){g(e,"class","liveIndicator svelte-1i6y7e6"),g(i,"class","svelte-1i6y7e6")},m(s,n){S(s,e,n),S(s,l,n),S(s,i,n)},d(s){s&&(h(e),h(l),h(i))}}}function zl(r){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(i){e=w(i,"DIV",{class:!0}),A(e).forEach(h),t=C(i),l=w(i,"DIV",{class:!0}),A(l).forEach(h),this.h()},h(){g(e,"class","itemPlaceholder svelte-1i6y7e6"),X(e,"height","250px"),g(l,"class","itemPlaceholder svelte-1i6y7e6"),X(l,"height","350px")},m(i,o){S(i,e,o),S(i,t,o),S(i,l,o)},p:H,i:H,o:H,d(i){i&&(h(e),h(t),h(l))}}}function Xl(r){let e,t,l,i;const o=[$l,Kl],s=[];function n(a,d){return a[6]>-1?0:1}return e=n(r),t=s[e]=o[e](r),{c(){t.c(),l=$()},l(a){t.l(a),l=$()},m(a,d){s[e].m(a,d),S(a,l,d),i=!0},p(a,d){let f=e;e=n(a),e===f?s[e].p(a,d):(Be(),de(s[f],1,1,()=>{s[f]=null}),Ve(),t=s[e],t?t.p(a,d):(t=s[e]=o[e](a),t.c()),he(t,1),t.m(l.parentNode,l))},i(a){i||(he(t),i=!0)},o(a){de(t),i=!1},d(a){a&&h(l),s[e].d(a)}}}function Kl(r){let e,t,l,i;e=new Sl({props:{contract:r[4].target.toString().toLowerCase(),poll:r[5],revealedVotes:r[7],totalVotes:r[8]}});function o(a,d){return a[2].pollViewMetadata.slots&&a[2].pollViewMetadata.slotChoices?ei:xl}let s=o(r),n=s(r);return{c(){Ce(e.$$.fragment),t=D(),l=b("div"),n.c(),this.h()},l(a){Fe(e.$$.fragment,a),t=C(a),l=w(a,"DIV",{class:!0});var d=A(l);n.l(d),d.forEach(h),this.h()},h(){g(l,"class","item polls svelte-1i6y7e6")},m(a,d){Me(e,a,d),S(a,t,d),S(a,l,d),n.m(l,null),i=!0},p(a,d){const f={};d&16&&(f.contract=a[4].target.toString().toLowerCase()),d&32&&(f.poll=a[5]),d&128&&(f.revealedVotes=a[7]),d&256&&(f.totalVotes=a[8]),e.$set(f),s===(s=o(a))&&n?n.p(a,d):(n.d(1),n=s(a),n&&(n.c(),n.m(l,null)))},i(a){i||(he(e.$$.fragment,a),i=!0)},o(a){de(e.$$.fragment,a),i=!1},d(a){a&&(h(t),h(l)),Pe(e,a),n.d()}}}function $l(r){let e,t,l,i=r[11]("gravity.counting_countdown")+"",o,s,n,a=String(Math.floor(r[6]%(24*60*60*1e3)/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[6]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[6]%(60*1e3)/1e3)).padStart(2,"0"),d,f=r[0]&&r[0].bannerImageUrl&&bt(r);return{c(){e=b("div"),f&&f.c(),t=D(),l=b("p"),o=T(i),s=D(),n=b("h3"),d=T(a),this.h()},l(_){e=w(_,"DIV",{class:!0});var u=A(e);f&&f.l(u),t=C(u),l=w(u,"P",{});var c=A(l);o=j(c,i),c.forEach(h),s=C(u),n=w(u,"H3",{class:!0});var p=A(n);d=j(p,a),p.forEach(h),u.forEach(h),this.h()},h(){g(n,"class","svelte-1i6y7e6"),g(e,"class","item countdown svelte-1i6y7e6")},m(_,u){S(_,e,u),f&&f.m(e,null),m(e,t),m(e,l),m(l,o),m(e,s),m(e,n),m(n,d)},p(_,u){_[0]&&_[0].bannerImageUrl?f?f.p(_,u):(f=bt(_),f.c(),f.m(e,t)):f&&(f.d(1),f=null),u&2048&&i!==(i=_[11]("gravity.counting_countdown")+"")&&z(o,i),u&64&&a!==(a=String(Math.floor(_[6]%(24*60*60*1e3)/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(_[6]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(_[6]%(60*1e3)/1e3)).padStart(2,"0"))&&z(d,a)},i:H,o:H,d(_){_&&h(e),f&&f.d()}}}function xl(r){let e,t=[],l=new Map,i=re([...r[2].choices].sort(r[17]));const o=s=>s[25];for(let s=0;s<i.length;s+=1){let n=ft(r,i,s),a=o(n);l.set(a,t[s]=_t(a,n))}return{c(){e=b("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0});var n=A(e);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(h),this.h()},h(){g(e,"class","slot svelte-1i6y7e6")},m(s,n){S(s,e,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(s,n){if(n&1540){i=re([...s[2].choices].sort(s[17]));for(let a=0;a<t.length;a+=1)t[a].r();t=je(t,n,o,1,s,i,l,e,Le,_t,null,ft);for(let a=0;a<t.length;a+=1)t[a].a()}},d(s){s&&h(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function ei(r){let e,t=re(r[2].pollViewMetadata.slots),l=[];for(let i=0;i<t.length;i+=1)l[i]=yt(ut(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=$()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=$()},m(i,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,o);S(i,e,o)},p(i,o){if(o&5124){t=re(i[2].pollViewMetadata.slots);let s;for(s=0;s<t.length;s+=1){const n=ut(i,t,s);l[s]?l[s].p(n,o):(l[s]=yt(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&h(e),Ee(l,i)}}}function _t(r,e){let t,l,i,o,s,n,a,d=e[25].title+"",f,_,u,c=Number(me(e[10][e[2].choices.indexOf(e[25])])).toLocaleString("en-US")+"",p,v,E=e[26]+"",y,k,I,V,Q,q=`${e[26]}%`,U,J,F=H;return{key:r,first:null,c(){t=b("div"),l=b("div"),i=b("img"),n=D(),a=b("p"),f=T(d),_=D(),u=b("p"),p=T(c),v=T(" COMO ("),y=T(E),k=T("%)"),I=D(),V=b("div"),Q=b("div"),U=D(),this.h()},l(R){t=w(R,"DIV",{class:!0});var N=A(t);l=w(N,"DIV",{class:!0});var G=A(l);i=w(G,"IMG",{src:!0,alt:!0,class:!0}),n=C(G),a=w(G,"P",{class:!0});var K=A(a);f=j(K,d),K.forEach(h),_=C(G),u=w(G,"P",{});var Y=A(u);p=j(Y,c),v=j(Y," COMO ("),y=j(Y,E),k=j(Y,"%)"),Y.forEach(h),G.forEach(h),I=C(N),V=w(N,"DIV",{class:!0});var M=A(V);Q=w(M,"DIV",{class:!0}),A(Q).forEach(h),M.forEach(h),U=C(N),N.forEach(h),this.h()},h(){ie(i.src,o=e[25].txImageUrl)||g(i,"src",o),g(i,"alt",s=e[25].title),g(i,"class","svelte-1i6y7e6"),g(a,"class","name svelte-1i6y7e6"),g(l,"class","choiceTitle svelte-1i6y7e6"),g(Q,"class","progress svelte-1i6y7e6"),X(Q,"width",q),g(V,"class","choiceBar svelte-1i6y7e6"),g(t,"class","choice svelte-1i6y7e6"),this.first=t},m(R,N){S(R,t,N),m(t,l),m(l,i),m(l,n),m(l,a),m(a,f),m(l,_),m(l,u),m(u,p),m(u,v),m(u,y),m(u,k),m(t,I),m(t,V),m(V,Q),m(t,U)},p(R,N){e=R,N&1028&&!ie(i.src,o=e[25].txImageUrl)&&g(i,"src",o),N&1028&&s!==(s=e[25].title)&&g(i,"alt",s),N&1028&&d!==(d=e[25].title+"")&&z(f,d),N&1028&&c!==(c=Number(me(e[10][e[2].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&z(p,c),N&1540&&E!==(E=e[26]+"")&&z(y,E),N&1540&&q!==(q=`${e[26]}%`)&&X(Q,"width",q)},r(){J=t.getBoundingClientRect()},f(){He(t),F()},a(){F(),F=Je(t,J,Ze,{})},d(R){R&&h(t)}}}function mt(r){let e,t,l;return{c(){e=b("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ie(e.src,t=r[25].roundImageUrl)||g(e,"src",t),g(e,"alt",l=r[25].name),g(e,"class","svelte-1i6y7e6")},m(i,o){S(i,e,o)},p(i,o){o&4&&!ie(e.src,t=i[25].roundImageUrl)&&g(e,"src",t),o&4&&l!==(l=i[25].name)&&g(e,"alt",l)},d(i){i&&h(e)}}}function gt(r,e){let t,l,i,o,s=e[25].name+"",n,a,d,f=e[12](e[24],e[25].id).toLocaleString("en-US")+"",_,u,c=e[26]+"",p,v,E,y,k,I=`${e[26]}%`,V,Q,q=H,U=e[25].roundImageUrl&&mt(e);return{key:r,first:null,c(){t=b("div"),l=b("div"),U&&U.c(),i=D(),o=b("p"),n=T(s),a=D(),d=b("p"),_=T(f),u=T(" COMO ("),p=T(c),v=T("%)"),E=D(),y=b("div"),k=b("div"),V=D(),this.h()},l(J){t=w(J,"DIV",{class:!0});var F=A(t);l=w(F,"DIV",{class:!0});var R=A(l);U&&U.l(R),i=C(R),o=w(R,"P",{class:!0});var N=A(o);n=j(N,s),N.forEach(h),a=C(R),d=w(R,"P",{});var G=A(d);_=j(G,f),u=j(G," COMO ("),p=j(G,c),v=j(G,"%)"),G.forEach(h),R.forEach(h),E=C(F),y=w(F,"DIV",{class:!0});var K=A(y);k=w(K,"DIV",{class:!0}),A(k).forEach(h),K.forEach(h),V=C(F),F.forEach(h),this.h()},h(){g(o,"class","name svelte-1i6y7e6"),g(l,"class","choiceTitle svelte-1i6y7e6"),g(k,"class","progress svelte-1i6y7e6"),X(k,"width",I),g(y,"class","choiceBar svelte-1i6y7e6"),g(t,"class","choice svelte-1i6y7e6"),this.first=t},m(J,F){S(J,t,F),m(t,l),U&&U.m(l,null),m(l,i),m(l,o),m(o,n),m(l,a),m(l,d),m(d,_),m(d,u),m(d,p),m(d,v),m(t,E),m(t,y),m(y,k),m(t,V)},p(J,F){e=J,e[25].roundImageUrl?U?U.p(e,F):(U=mt(e),U.c(),U.m(l,i)):U&&(U.d(1),U=null),F&4&&s!==(s=e[25].name+"")&&z(n,s),F&4&&f!==(f=e[12](e[24],e[25].id).toLocaleString("en-US")+"")&&z(_,f),F&1028&&c!==(c=e[26]+"")&&z(p,c),F&1028&&I!==(I=`${e[26]}%`)&&X(k,"width",I)},r(){Q=t.getBoundingClientRect()},f(){He(t),q()},a(){q(),q=Je(t,Q,Ze,{})},d(J){J&&h(t),U&&U.d()}}}function vt(r){let e;return{c(){e=b("hr")},l(t){e=w(t,"HR",{})},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function yt(r){let e,t,l,i,o,s,n=r[22].name+"",a,d,f=[],_=new Map,u,c;function p(...k){return r[16](r[24],...k)}let v=re(r[2].pollViewMetadata.slotChoices.sort(p));const E=k=>k[25];for(let k=0;k<v.length;k+=1){let I=dt(r,v,k),V=E(I);_.set(V,f[k]=gt(V,I))}let y=r[24]<r[2].pollViewMetadata.slots.length-1&&vt();return{c(){e=b("div"),t=b("p"),l=b("img"),s=D(),a=T(n),d=D();for(let k=0;k<f.length;k+=1)f[k].c();u=D(),y&&y.c(),c=$(),this.h()},l(k){e=w(k,"DIV",{class:!0});var I=A(e);t=w(I,"P",{class:!0});var V=A(t);l=w(V,"IMG",{src:!0,alt:!0,class:!0}),s=C(V),a=j(V,n),V.forEach(h),d=C(I);for(let Q=0;Q<f.length;Q+=1)f[Q].l(I);I.forEach(h),u=C(k),y&&y.l(k),c=$(),this.h()},h(){ie(l.src,i=r[22].backgroundImageUrl)||g(l,"src",i),g(l,"alt",o=r[22].name),g(l,"class","svelte-1i6y7e6"),g(t,"class","slotTitle svelte-1i6y7e6"),g(e,"class","slot svelte-1i6y7e6")},m(k,I){S(k,e,I),m(e,t),m(t,l),m(t,s),m(t,a),m(e,d);for(let V=0;V<f.length;V+=1)f[V]&&f[V].m(e,null);S(k,u,I),y&&y.m(k,I),S(k,c,I)},p(k,I){if(r=k,I&4&&!ie(l.src,i=r[22].backgroundImageUrl)&&g(l,"src",i),I&4&&o!==(o=r[22].name)&&g(l,"alt",o),I&4&&n!==(n=r[22].name+"")&&z(a,n),I&5124){v=re(r[2].pollViewMetadata.slotChoices.sort(p));for(let V=0;V<f.length;V+=1)f[V].r();f=je(f,I,E,1,r,v,_,e,Le,gt,null,dt);for(let V=0;V<f.length;V+=1)f[V].a()}r[24]<r[2].pollViewMetadata.slots.length-1?y||(y=vt(),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null)},d(k){k&&(h(e),h(u),h(c));for(let I=0;I<f.length;I+=1)f[I].d();y&&y.d(k)}}}function bt(r){let e,t,l;return{c(){e=b("img"),this.h()},l(i){e=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ie(e.src,t=r[0].bannerImageUrl)||g(e,"src",t),g(e,"alt",l=r[0].title),g(e,"class","svelte-1i6y7e6")},m(i,o){S(i,e,o)},p(i,o){o&1&&!ie(e.src,t=i[0].bannerImageUrl)&&g(e,"src",t),o&1&&l!==(l=i[0].title)&&g(e,"alt",l)},d(i){i&&h(e)}}}function ti(r){let e,t,l,i,o;return{c(){e=b("div"),t=D(),l=b("div"),i=D(),o=b("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),A(e).forEach(h),t=C(s),l=w(s,"DIV",{class:!0}),A(l).forEach(h),i=C(s),o=w(s,"DIV",{class:!0}),A(o).forEach(h),this.h()},h(){g(e,"class","itemPlaceholder svelte-1i6y7e6"),g(l,"class","itemPlaceholder svelte-1i6y7e6"),X(l,"flex","2"),g(o,"class","itemPlaceholder svelte-1i6y7e6"),X(o,"flex","1")},m(s,n){S(s,e,n),S(s,t,n),S(s,l,n),S(s,i,n),S(s,o,n)},p:H,i:H,o:H,d(s){s&&(h(e),h(t),h(l),h(i),h(o))}}}function li(r){let e,t,l=r[11]("gravity.totalcomo")+"",i,o,s,n,a,d,f,_,u=r[9]!==void 0&&wt(r);n=new El({props:{voteStart:Date.parse(r[2].startDate),contract:r[4].target.toString(),poll:r[2],pollId:r[5],artist:r[1]}});function c(v){r[18](v)}let p={artist:r[1]};return r[3]!==void 0&&(p.gravities=r[3]),d=new Nl({props:p}),kt.push(()=>It(d,"gravities",c)),{c(){e=b("div"),t=b("b"),i=T(l),o=D(),u&&u.c(),s=D(),Ce(n.$$.fragment),a=D(),Ce(d.$$.fragment),this.h()},l(v){e=w(v,"DIV",{class:!0});var E=A(e);t=w(E,"B",{class:!0});var y=A(t);i=j(y,l),y.forEach(h),o=C(E),u&&u.l(E),E.forEach(h),s=C(v),Fe(n.$$.fragment,v),a=C(v),Fe(d.$$.fragment,v),this.h()},h(){g(t,"class","svelte-1i6y7e6"),g(e,"class","item total svelte-1i6y7e6")},m(v,E){S(v,e,E),m(e,t),m(t,i),m(e,o),u&&u.m(e,null),S(v,s,E),Me(n,v,E),S(v,a,E),Me(d,v,E),_=!0},p(v,E){(!_||E&2048)&&l!==(l=v[11]("gravity.totalcomo")+"")&&z(i,l),v[9]!==void 0?u?u.p(v,E):(u=wt(v),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const y={};E&4&&(y.voteStart=Date.parse(v[2].startDate)),E&16&&(y.contract=v[4].target.toString()),E&4&&(y.poll=v[2]),E&32&&(y.pollId=v[5]),E&2&&(y.artist=v[1]),n.$set(y);const k={};E&2&&(k.artist=v[1]),!f&&E&8&&(f=!0,k.gravities=v[3],Et(()=>f=!1)),d.$set(k)},i(v){_||(he(n.$$.fragment,v),he(d.$$.fragment,v),_=!0)},o(v){de(n.$$.fragment,v),de(d.$$.fragment,v),_=!1},d(v){v&&(h(e),h(s),h(a)),u&&u.d(),Pe(n,v),Pe(d,v)}}}function wt(r){let e,t=r[9].toLocaleString("en-US")+"",l,i,o,s;return{c(){e=b("p"),l=T(t),i=D(),o=b("img"),this.h()},l(n){e=w(n,"P",{});var a=A(e);l=j(a,t),a.forEach(h),i=C(n),o=w(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ie(o.src,s=Te(r[1]).como)||g(o,"src",s),g(o,"alt","COMO"),g(o,"class","svelte-1i6y7e6")},m(n,a){S(n,e,a),m(e,l),S(n,i,a),S(n,o,a)},p(n,a){a&512&&t!==(t=n[9].toLocaleString("en-US")+"")&&z(l,t),a&2&&!ie(o.src,s=Te(n[1]).como)&&g(o,"src",s)},d(n){n&&(h(e),h(i),h(o))}}}function ii(r){let e,t,l,i,o,s,n,a,d,f,_,u,c,p,v,E,y,k;const I=[Ql,Rl],V=[];function Q(B,Z){return B[1]?0:1}o=Q(r),s=V[o]=I[o](r);function q(B,Z){return B[0]?Ol:Gl}let U=q(r),J=U(r);function F(B,Z){return B[0]?Jl:ql}let R=F(r),N=R(r);function G(B,Z){return B[0]&&B[2]?Zl:Hl}let K=G(r),Y=K(r);const M=[Xl,zl],L=[];function P(B,Z){return B[2]?0:1}u=P(r),c=L[u]=M[u](r);const W=[li,ti],O=[];function le(B,Z){return B[2]&&B[1]?0:1}return E=le(r),y=O[E]=W[E](r),{c(){e=b("div"),t=b("div"),l=b("div"),i=b("div"),s.c(),n=D(),J.c(),a=D(),N.c(),d=D(),f=b("div"),Y.c(),_=D(),c.c(),p=D(),v=b("div"),y.c(),this.h()},l(B){e=w(B,"DIV",{class:!0});var Z=A(e);t=w(Z,"DIV",{class:!0});var ne=A(t);l=w(ne,"DIV",{class:!0});var se=A(l);i=w(se,"DIV",{class:!0});var oe=A(i);s.l(oe),n=C(oe),J.l(oe),oe.forEach(h),a=C(se),N.l(se),d=C(se),f=w(se,"DIV",{class:!0});var ee=A(f);Y.l(ee),ee.forEach(h),se.forEach(h),_=C(ne),c.l(ne),ne.forEach(h),p=C(Z),v=w(Z,"DIV",{class:!0});var te=A(v);y.l(te),te.forEach(h),Z.forEach(h),this.h()},h(){g(i,"class","headerSection svelte-1i6y7e6"),g(f,"class","headerSection svelte-1i6y7e6"),g(l,"class","header svelte-1i6y7e6"),g(t,"class","main svelte-1i6y7e6"),g(v,"class","sidebar svelte-1i6y7e6"),g(e,"class","layout svelte-1i6y7e6")},m(B,Z){S(B,e,Z),m(e,t),m(t,l),m(l,i),V[o].m(i,null),m(i,n),J.m(i,null),m(l,a),N.m(l,null),m(l,d),m(l,f),Y.m(f,null),m(t,_),L[u].m(t,null),m(e,p),m(e,v),O[E].m(v,null),k=!0},p(B,[Z]){let ne=o;o=Q(B),o===ne?V[o].p(B,Z):(Be(),de(V[ne],1,1,()=>{V[ne]=null}),Ve(),s=V[o],s?s.p(B,Z):(s=V[o]=I[o](B),s.c()),he(s,1),s.m(i,n)),U===(U=q(B))&&J?J.p(B,Z):(J.d(1),J=U(B),J&&(J.c(),J.m(i,null))),R===(R=F(B))&&N?N.p(B,Z):(N.d(1),N=R(B),N&&(N.c(),N.m(l,d))),K===(K=G(B))&&Y?Y.p(B,Z):(Y.d(1),Y=K(B),Y&&(Y.c(),Y.m(f,null)));let se=u;u=P(B),u===se?L[u].p(B,Z):(Be(),de(L[se],1,1,()=>{L[se]=null}),Ve(),c=L[u],c?c.p(B,Z):(c=L[u]=M[u](B),c.c()),he(c,1),c.m(t,null));let oe=E;E=le(B),E===oe?O[E].p(B,Z):(Be(),de(O[oe],1,1,()=>{O[oe]=null}),Ve(),y=O[E],y?y.p(B,Z):(y=O[E]=W[E](B),y.c()),he(y,1),y.m(v,null))},i(B){k||(he(s),he(c),he(y),k=!0)},o(B){de(s),de(c),de(y),k=!1},d(B){B&&h(e),V[o].d(),J.d(),N.d(),Y.d(),L[u].d(),O[E].d()}}}function ri(r,e,t){let l,i;ke(r,qt,F=>t(14,l=F)),ke(r,Qe,F=>t(11,i=F));let o,s,n,a,d,f,_,u=-1,c,p,v,E,y;async function k(){if(l.params.id)if(a&&a.find(F=>F.id===Number(l.params.id)))t(0,o=a.find(F=>F.id===Number(l.params.id)));else{const F=await fetch(`${ye.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,o=(await F.json()).gravity)}else{const R=await(await fetch(`${ye.URL}/gravity/v3/${l.params.artist||""}`)).json();R.ongoing.length?t(0,o=R.ongoing[0]):R.upcoming.length?t(0,o=R.upcoming.at(-1)):t(0,o=R.past[0]),t(3,a=[...R.upcoming,...R.ongoing,...R.past].filter(N=>N.artist===o?.artist))}t(1,n=(await ye.artists()).find(F=>F.name===o?.artist)),I()}async function I(){t(6,u=-1),window.clearInterval(_);const F=o?.polls.sort((W,O)=>Date.parse(W.startDate)-Date.parse(O.startDate));console.log(F);const R=l.params.pollId||(o?.polls.find(W=>!W.finalized)||F?.at(-1))?.id,G=(await(await fetch(`${ye.URL}/gravity/v3/${o?.artist}/gravity/${o?.id}/polls/${R}`)).json()).pollDetail;t(4,d=new Xe(n.contracts.Governor,Ae.ABI.Governor,Ae.RPC)),t(5,f=G.pollIdOnChain||G.id),(await d.candidates(f)).toString().replaceAll("\b","")!==G.choices.map(W=>W.id).toString().replaceAll("\b","")&&t(5,f-=1);const Y=new Xe(n.contracts.Governor,Ae.ABI.Governor,new rl(Ae.RPC)),[M,L,P]=await Promise.all([Y.polls(f),Y.totalVotes(f),Y.votesPerCandidates(f)]);t(7,c=Number(M.revealedVotes)),t(8,p=Number(L)),t(9,v=Number(me(M.totalVotedCOMO))),t(10,E=P),(Date.parse(G.endDate)>Date.now()||c<p)&&(_=window.setInterval(async()=>{if(Date.parse(G.endDate)>Date.now()){t(6,u=Date.parse(G.endDate)-Date.now());const[W,O]=await Promise.all([Y.polls(f),Y.totalVotes(f)]);t(9,v=Number(me(W.totalVotedCOMO))),t(8,p=Number(O))}else if(p===c)window.clearInterval(_);else{t(6,u=-1);const[W,O]=await Promise.all([Y.polls(f),Y.votesPerCandidates(f)]);t(7,c=Number(W.revealedVotes)),t(10,E=O)}},1e3)),t(2,s=G)}function V(F,R){return s?.pollViewMetadata.choiceIdToSlotChoicesMapTable?.filter(N=>N.slotChoiceIds[F]===R).reduce((N,G)=>{const K=s?.pollViewMetadata.choiceIdToSlotChoicesMapTable?.indexOf(G);return N+Number(me(E[K]))},0)}function Q(F){n=F,t(1,n),t(14,l),t(13,y)}const q=(F,R,N)=>V(F,N.id)-V(F,R.id),U=(F,R)=>Number(E[s?.choices.indexOf(R)||0])-Number(E[s?.choices.indexOf(F)||0]);function J(F){a=F,t(3,a),t(14,l),t(13,y),t(1,n)}return r.$$.update=()=>{r.$$.dirty&24578&&(l.params!==y&&(!y||l.params.id!==y.id||l.params.artist!==y.artist?(n&&n.name!==l.params.artist&&t(1,n=t(3,a=void 0)),t(0,o=void 0),t(2,s=void 0),k()):l.params.pollId!==y.pollId&&(t(2,s=void 0),I())),t(13,y=l.params)),r.$$.dirty&3&&n&&o&&o.artist!==n.name&&Lt(`/gravity/${n.name}`)},[o,n,s,a,d,f,u,c,p,v,E,i,V,y,l,Q,q,U,J]}class mi extends Ne{constructor(e){super(),Re(this,e,ri,ii,Ye,{})}}export{mi as component,_i as universal};
