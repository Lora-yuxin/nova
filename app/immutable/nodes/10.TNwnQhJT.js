import{n as H,w as Ct,x as Ft,s as Ye,d as ke,l as kt,c as re,g as Mt,b as Et,e as It}from"../chunks/scheduler.7ddvVGuS.js";import{J as Pt,f as h,K as Ut,S as Ne,i as Re,e as $,a as S,g as b,m as T,s as D,h as w,j as A,n as L,c as C,k as m,x as g,o as z,A as Ee,l as X,G as Wt,E as ze,t as de,b as Ve,d as he,p as Be,B as At,r as Ce,u as Fe,v as Me,w as Pe,C as Oe,H as Yt,D as Nt}from"../chunks/index.XmLGRVaW.js";import{h as Rt,f as Qt,A as Gt,j as Ot,k as Ge,l as Tt,$ as Qe,S as De,C as ye,e as ie,u as Le,m as je,d as Lt,n as Xe,P as Ae}from"../chunks/apis.W9dsQ1rZ.js";import{g as jt}from"../chunks/navigation.-Vl5q0Q-.js";import{p as qt}from"../chunks/stores.szQb0wGX.js";import{A as Jt}from"../chunks/ArtistSelector.A8BbJXfd.js";import{g as Te}from"../chunks/assets.UUTeAooi.js";import{f as me}from"../chunks/units.vVRppVb4.js";import{p as Ht}from"../chunks/polygonscan.3rzyozVp.js";const St=typeof window<"u";let Zt=St?()=>window.performance.now():()=>Date.now(),qe=St?i=>requestAnimationFrame(i):H;const be=new Set;function Vt(i){be.forEach(e=>{e.c(i)||(be.delete(e),e.f())}),be.size!==0&&qe(Vt)}function zt(i){let e;return be.size===0&&qe(Vt),{promise:new Promise(t=>{be.add(e={c:i,f:t})}),abort(){be.delete(e)}}}const Ue=new Map;let We=0;function Xt(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function Kt(i,e){const t={stylesheet:Ut(e),rules:{}};return Ue.set(i,t),t}function $t(i,e,t,l,r,o,s,n=0){const a=16.666/l;let d=`{
`;for(let E=0;E<=1;E+=a){const y=e+(t-e)*o(E);d+=E*100+`%{${s(y,1-y)}}
`}const f=d+`100% {${s(t,1-t)}}
}`,p=`__svelte_${Xt(f)}_${n}`,u=Pt(i),{stylesheet:c,rules:_}=Ue.get(u)||Kt(u,i);_[p]||(_[p]=!0,c.insertRule(`@keyframes ${p} ${f}`,c.cssRules.length));const v=i.style.animation||"";return i.style.animation=`${v?`${v}, `:""}${p} ${l}ms linear ${r}ms 1 both`,We+=1,p}function xt(i,e){const t=(i.style.animation||"").split(", "),l=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=t.length-l.length;r&&(i.style.animation=l.join(", "),We-=r,We||el())}function el(){qe(()=>{We||(Ue.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&h(e)}),Ue.clear())})}function Je(i,e,t,l){if(!e)return H;const r=i.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return H;const{delay:o=0,duration:s=300,easing:n=Ct,start:a=Zt()+o,end:d=a+s,tick:f=H,css:p}=t(i,{from:e,to:r},l);let u=!0,c=!1,_;function v(){p&&(_=$t(i,0,1,s,o,n,p)),o||(c=!0)}function E(){p&&xt(i,_),u=!1}return zt(y=>{if(!c&&y>=a&&(c=!0),c&&y>=d&&(f(1,0),E()),!u)return!1;if(c){const k=y-a,I=0+1*n(k/s);f(I,1-I)}return!0}),v(),f(0,1),E}function He(i){const e=getComputedStyle(i);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,r=i.getBoundingClientRect();i.style.position="absolute",i.style.width=t,i.style.height=l,tl(i,r)}}function tl(i,e){const t=i.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(i),r=l.transform==="none"?"":l.transform;i.style.transform=`${r} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function ll({params:i}){return i}const _r=Object.freeze(Object.defineProperty({__proto__:null,load:ll},Symbol.toStringTag,{value:"Module"})),rl=Rt(Qt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var Ke=function(i,e,t,l){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function n(f){try{d(l.next(f))}catch(p){s(p)}}function a(f){try{d(l.throw(f))}catch(p){s(p)}}function d(f){f.done?o(f.value):r(f.value).then(n,a)}d((l=l.apply(i,e||[])).next())})},pe=function(i,e,t,l,r){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},ae=function(i,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!l:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(i):l?l.value:e.get(i)},ge,_e,fe;class il extends Gt{constructor(e){super(),ge.set(this,void 0),_e.set(this,void 0),fe.set(this,void 0),this.subprovider=e,pe(this,ge,[],"f"),pe(this,_e,10,"f"),pe(this,fe,null,"f")}get drainInterval(){return ae(this,_e,"f")}set drainInterval(e){e<0&&(e=-1),e!==ae(this,_e,"f")&&(pe(this,_e,e,"f"),ae(this,_e,"f")>=0?(ae(this,fe,"f")&&(clearTimeout(ae(this,fe,"f")),pe(this,fe,null,"f")),ae(this,ge,"f").length&&pe(this,fe,setTimeout(()=>{this.drainCallQueue()},ae(this,_e,"f")),"f")):ae(this,fe,"f")&&(clearTimeout(ae(this,fe,"f")),pe(this,fe,null,"f")))}queueCall(e,t){return ae(this,fe,"f")==null&&ae(this,_e,"f")>=0&&pe(this,fe,setTimeout(()=>{this.drainCallQueue()},ae(this,_e,"f")),"f"),new Promise((l,r)=>{ae(this,ge,"f").push({request:{to:e,data:t},resolve:l,reject:r})})}drainCallQueue(){return Ke(this,void 0,void 0,function*(){pe(this,fe,null,"f");const e=ae(this,ge,"f");pe(this,ge,[],"f");const t=Ot([rl,Ge.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:n})=>[n.to,n.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:n})=>({to:n.to,data:n.data}))});const l=yield this.subprovider.call({data:t}),[r,o]=Ge.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:n},a)=>({to:n.to,data:n.data,status:o[a][0],result:o[a][1]}))});const s=[];for(let n=0;n<e.length;n++){const a=o[n],{resolve:d}=e[n];d({status:a[0],data:a[1]}),s.push({status:a[0],data:a[1]})}return s})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return Ke(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,r=t.data||"0x";Tt(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const o=yield this.queueCall(l,r);if(o.status)return o.data;throw Ge.getBuiltinCallException("call",{to:l,data:r},o.data)}return yield this.subprovider._perform(e)})}}ge=new WeakMap,_e=new WeakMap,fe=new WeakMap;function sl(i){const e=i-1;return e*e*e+1}function Ze(i,{from:e,to:t},l={}){const r=getComputedStyle(i),o=r.transform==="none"?"":r.transform,[s,n]=r.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*s/t.width-(t.left+s),d=e.top+e.height*n/t.height-(t.top+n),{delay:f=0,duration:p=c=>Math.sqrt(c)*120,easing:u=sl}=l;return{delay:f,duration:Ft(p)?p(Math.sqrt(a*a+d*d)):p,easing:u,css:(c,_)=>{const v=_*a,E=_*d,y=c+_*e.width/t.width,k=c+_*e.height/t.height;return`transform: ${o} translate(${v}px, ${E}px) scale(${y}, ${k});`}}}function ce(i){return i===null?"null":Array.isArray(i)?"array":typeof i}function ve(i){return ce(i)==="object"}function ol(i){return Array.isArray(i)&&i.length>0&&i.every(e=>"message"in e)}function $e(i,e){return i.length<124?i:e}const nl="graphql-transport-ws";var ue;(function(i){i[i.InternalServerError=4500]="InternalServerError",i[i.InternalClientError=4005]="InternalClientError",i[i.BadRequest=4400]="BadRequest",i[i.BadResponse=4004]="BadResponse",i[i.Unauthorized=4401]="Unauthorized",i[i.Forbidden=4403]="Forbidden",i[i.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",i[i.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",i[i.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",i[i.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",i[i.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(ue||(ue={}));var x;(function(i){i.ConnectionInit="connection_init",i.ConnectionAck="connection_ack",i.Ping="ping",i.Pong="pong",i.Subscribe="subscribe",i.Next="next",i.Error="error",i.Complete="complete"})(x||(x={}));function Bt(i){if(!ve(i))throw new Error(`Message is expected to be an object, but got ${ce(i)}`);if(!i.type)throw new Error("Message is missing the 'type' property");if(typeof i.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${ce(i.type)}`);switch(i.type){case x.ConnectionInit:case x.ConnectionAck:case x.Ping:case x.Pong:{if(i.payload!=null&&!ve(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${i.payload}"`);break}case x.Subscribe:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ce(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!ve(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object, but got ${ce(i.payload)}`);if(typeof i.payload.query!="string")throw new Error(`"${i.type}" message payload expects the 'query' property to be a string, but got ${ce(i.payload.query)}`);if(i.payload.variables!=null&&!ve(i.payload.variables))throw new Error(`"${i.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${ce(i.payload.variables)}`);if(i.payload.operationName!=null&&ce(i.payload.operationName)!=="string")throw new Error(`"${i.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${ce(i.payload.operationName)}`);if(i.payload.extensions!=null&&!ve(i.payload.extensions))throw new Error(`"${i.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${ce(i.payload.extensions)}`);break}case x.Next:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ce(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!ve(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an object, but got ${ce(i.payload)}`);break}case x.Error:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ce(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);if(!ol(i.payload))throw new Error(`"${i.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(i.payload)}`);break}case x.Complete:{if(typeof i.id!="string")throw new Error(`"${i.type}" message expects the 'id' property to be a string, but got ${ce(i.id)}`);if(!i.id)throw new Error(`"${i.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${i.type}"`)}return i}function al(i,e){return Bt(typeof i=="string"?JSON.parse(i,e):i)}function Ie(i,e){return Bt(i),JSON.stringify(i,e)}var we=function(i){return this instanceof we?(this.v=i,this):new we(i)},cl=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=t.apply(i,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(u){l[u]&&(r[u]=function(c){return new Promise(function(_,v){o.push([u,c,_,v])>1||n(u,c)})})}function n(u,c){try{a(l[u](c))}catch(_){p(o[0][3],_)}}function a(u){u.value instanceof we?Promise.resolve(u.value.v).then(d,f):p(o[0][2],u)}function d(u){n("next",u)}function f(u){n("throw",u)}function p(u,c){u(c),o.shift(),o.length&&n(o[0][0],o[0][1])}};function fl(i){const{url:e,connectionParams:t,lazy:l=!0,onNonLazyError:r=console.error,lazyCloseTimeout:o=0,keepAlive:s=0,disablePong:n,connectionAckWaitTimeout:a=0,retryAttempts:d=5,retryWait:f=async function(j){let P=1e3;for(let W=0;W<j;W++)P*=2;await new Promise(W=>setTimeout(W,P+Math.floor(Math.random()*2700+300)))},shouldRetry:p=Se,isFatalConnectionProblem:u,on:c,webSocketImpl:_,generateID:v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,j=>{const P=Math.random()*16|0;return(j=="x"?P:P&3|8).toString(16)})},jsonMessageReplacer:E,jsonMessageReviver:y}=i;let k;if(_){if(!dl(_))throw new Error("Invalid WebSocket implementation provided");k=_}else typeof WebSocket<"u"?k=WebSocket:typeof global<"u"?k=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(k=window.WebSocket||window.MozWebSocket);if(!k)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const I=k,V=(()=>{const M=(()=>{const P={};return{on(W,O){return P[W]=O,()=>{delete P[W]}},emit(W){var O;"id"in W&&((O=P[W.id])===null||O===void 0||O.call(P,W))}}})(),j={connecting:c?.connecting?[c.connecting]:[],opened:c?.opened?[c.opened]:[],connected:c?.connected?[c.connected]:[],ping:c?.ping?[c.ping]:[],pong:c?.pong?[c.pong]:[],message:c?.message?[M.emit,c.message]:[M.emit],closed:c?.closed?[c.closed]:[],error:c?.error?[c.error]:[]};return{onMessage:M.on,on(P,W){const O=j[P];return O.push(W),()=>{O.splice(O.indexOf(W),1)}},emit(P,...W){for(const O of[...j[P]])O(...W)}}})();function Q(M){const j=[V.on("error",P=>{j.forEach(W=>W()),M(P)}),V.on("closed",P=>{j.forEach(W=>W()),M(P)})]}let q,U=0,J,F=!1,R=0,N=!1;async function G(){clearTimeout(J);const[M,j]=await(q??(q=new Promise((O,le)=>(async()=>{if(F){if(await f(R),!U)return q=void 0,le({code:1e3,reason:"All Subscriptions Gone"});R++}V.emit("connecting");const B=new I(typeof e=="function"?await e():e,nl);let Z,ne;function se(){isFinite(s)&&s>0&&(clearTimeout(ne),ne=setTimeout(()=>{B.readyState===I.OPEN&&(B.send(Ie({type:x.Ping})),V.emit("ping",!1,void 0))},s))}Q(ee=>{q=void 0,clearTimeout(Z),clearTimeout(ne),le(ee),Se(ee)&&ee.code===4499&&(B.close(4499,"Terminated"),B.onerror=null,B.onclose=null)}),B.onerror=ee=>V.emit("error",ee),B.onclose=ee=>V.emit("closed",ee),B.onopen=async()=>{try{V.emit("opened",B);const ee=typeof t=="function"?await t():t;if(B.readyState!==I.OPEN)return;B.send(Ie(ee?{type:x.ConnectionInit,payload:ee}:{type:x.ConnectionInit},E)),isFinite(a)&&a>0&&(Z=setTimeout(()=>{B.close(ue.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},a)),se()}catch(ee){V.emit("error",ee),B.close(ue.InternalClientError,$e(ee instanceof Error?ee.message:new Error(ee).message,"Internal client error"))}};let oe=!1;B.onmessage=({data:ee})=>{try{const te=al(ee,y);if(V.emit("message",te),te.type==="ping"||te.type==="pong"){V.emit(te.type,!0,te.payload),te.type==="pong"?se():n||(B.send(Ie(te.payload?{type:x.Pong,payload:te.payload}:{type:x.Pong})),V.emit("pong",!1,te.payload));return}if(oe)return;if(te.type!==x.ConnectionAck)throw new Error(`First message cannot be of type ${te.type}`);clearTimeout(Z),oe=!0,V.emit("connected",B,te.payload),F=!1,R=0,O([B,new Promise((sr,Dt)=>Q(Dt))])}catch(te){B.onmessage=null,V.emit("error",te),B.close(ue.BadResponse,$e(te instanceof Error?te.message:new Error(te).message,"Bad response"))}}})())));M.readyState===I.CLOSING&&await j;let P=()=>{};const W=new Promise(O=>P=O);return[M,P,Promise.race([W.then(()=>{if(!U){const O=()=>M.close(1e3,"Normal Closure");isFinite(o)&&o>0?J=setTimeout(()=>{M.readyState===I.OPEN&&O()},o):O()}}),j])]}function K(M){if(Se(M)&&(ul(M.code)||[ue.InternalServerError,ue.InternalClientError,ue.BadRequest,ue.BadResponse,ue.Unauthorized,ue.SubprotocolNotAcceptable,ue.SubscriberAlreadyExists,ue.TooManyInitialisationRequests].includes(M.code)))throw M;if(N)return!1;if(Se(M)&&M.code===1e3)return U>0;if(!d||R>=d||!p(M)||u?.(M))throw M;return F=!0}l||(async()=>{for(U++;;)try{const[,,M]=await G();await M}catch(M){try{if(!K(M))return}catch(j){return r?.(j)}}})();function Y(M,j){const P=v(M);let W=!1,O=!1,le=()=>{U--,W=!0};return(async()=>{for(U++;;)try{const[B,Z,ne]=await G();if(W)return Z();const se=V.onMessage(P,oe=>{switch(oe.type){case x.Next:{j.next(oe.payload);return}case x.Error:{O=!0,W=!0,j.error(oe.payload),le();return}case x.Complete:{W=!0,le();return}}});B.send(Ie({id:P,type:x.Subscribe,payload:M},E)),le=()=>{!W&&B.readyState===I.OPEN&&B.send(Ie({id:P,type:x.Complete},E)),U--,W=!0,Z()},await ne.finally(se);return}catch(B){if(!K(B))return}})().then(()=>{O||j.complete()}).catch(B=>{j.error(B)}),()=>{W||le()}}return{on:V.on,subscribe:Y,iterate(M){const j=[],P={done:!1,error:null,resolve:()=>{}},W=Y(M,{next(le){j.push(le),P.resolve()},error(le){P.done=!0,P.error=le,P.resolve()},complete(){P.done=!0,P.resolve()}}),O=function(){return cl(this,arguments,function*(){for(;;){for(j.length||(yield we(new Promise(Z=>P.resolve=Z)));j.length;)yield yield we(j.shift());if(P.error)throw P.error;if(P.done)return yield we(void 0)}})}();return O.throw=async le=>(P.done||(P.done=!0,P.error=le,P.resolve()),{done:!0,value:void 0}),O.return=async()=>(W(),{done:!0,value:void 0}),O},async dispose(){if(N=!0,q){const[M]=await q;M.close(1e3,"Normal Closure")}},terminate(){q&&V.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function Se(i){return ve(i)&&"code"in i&&"reason"in i}function ul(i){return[1e3,1001,1006,1005,1012,1013,1014].includes(i)?!1:i>=1e3&&i<=1999}function dl(i){return typeof i=="function"&&"constructor"in i&&"CLOSED"in i&&"CLOSING"in i&&"CONNECTING"in i&&"OPEN"in i}function hl(i,e,t){const l=i.slice();return l[20]=e[t],l[19]=t,l}function xe(i,e,t){const l=i.slice();l[16]=e[t],l[19]=t;const r=l[3].find(function(...s){return i[10](l[16],...s)});return l[17]=r,l}function pl(i){let e,t,l,r=i[4]("gravity.votes.title")+"",o,s,n,a=i[4]("gravity.votes.subtitle")+"",d,f;function p(_,v){return _[2].length?gl:ml}let u=p(i),c=u(i);return{c(){e=b("div"),t=b("div"),l=b("b"),o=T(r),s=D(),n=b("p"),d=T(a),f=D(),c.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=A(e);t=w(v,"DIV",{class:!0});var E=A(t);l=w(E,"B",{});var y=A(l);o=L(y,r),y.forEach(h),s=C(E),n=w(E,"P",{});var k=A(n);d=L(k,a),k.forEach(h),E.forEach(h),f=C(v),c.l(v),v.forEach(h),this.h()},h(){m(t,"class","header svelte-1tn5l0x"),m(e,"class","votes svelte-1tn5l0x")},m(_,v){S(_,e,v),g(e,t),g(t,l),g(l,o),g(t,s),g(t,n),g(n,d),g(e,f),c.m(e,null)},p(_,v){v&16&&r!==(r=_[4]("gravity.votes.title")+"")&&z(o,r),v&16&&a!==(a=_[4]("gravity.votes.subtitle")+"")&&z(d,a),u===(u=p(_))&&c?c.p(_,v):(c.d(1),c=u(_),c&&(c.c(),c.m(e,null)))},d(_){_&&h(e),c.d()}}}function _l(i){let e,t,l=i[4]("gravity.votes.countdown")+"",r,o,s,n=String(Math.floor(i[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[1]%(60*1e3)/1e3)).padStart(2,"0"),a;return{c(){e=b("div"),t=b("p"),r=T(l),o=D(),s=b("h3"),a=T(n),this.h()},l(d){e=w(d,"DIV",{class:!0});var f=A(e);t=w(f,"P",{});var p=A(t);r=L(p,l),p.forEach(h),o=C(f),s=w(f,"H3",{class:!0});var u=A(s);a=L(u,n),u.forEach(h),f.forEach(h),this.h()},h(){m(s,"class","svelte-1tn5l0x"),m(e,"class","countdown svelte-1tn5l0x")},m(d,f){S(d,e,f),g(e,t),g(t,r),g(e,o),g(e,s),g(s,a)},p(d,f){f&16&&l!==(l=d[4]("gravity.votes.countdown")+"")&&z(r,l),f&2&&n!==(n=String(Math.floor(d[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[1]%(60*1e3)/1e3)).padStart(2,"0"))&&z(a,n)},d(d){d&&h(e)}}}function ml(i){let e,t=ie({length:50}),l=[];for(let r=0;r<t.length;r+=1)l[r]=vl(hl(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p:H,d(r){r&&h(e),Ee(l,r)}}}function gl(i){let e=[],t=new Map,l,r=ie(i[2]);const o=s=>s[16].id;for(let s=0;s<r.length;s+=1){let n=xe(i,r,s),a=o(n);t.set(a,e[s]=et(a,n))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=$()},l(s){for(let n=0;n<e.length;n+=1)e[n].l(s);l=$()},m(s,n){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,n);S(s,l,n)},p(s,n){if(n&61){r=ie(s[2]);for(let a=0;a<e.length;a+=1)e[a].r();e=Le(e,n,o,1,s,r,t,l.parentNode,je,et,l,xe);for(let a=0;a<e.length;a+=1)e[a].a()}},d(s){s&&h(l);for(let n=0;n<e.length;n+=1)e[n].d(s)}}}function vl(i){let e,t,l,r,o,s,n,a,d,f;return{c(){e=b("div"),t=b("div"),l=D(),r=b("div"),o=D(),s=b("div"),n=b("div"),a=D(),d=b("div"),f=D(),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=A(e);t=w(u,"DIV",{class:!0}),A(t).forEach(h),l=C(u),r=w(u,"DIV",{class:!0}),A(r).forEach(h),o=C(u),s=w(u,"DIV",{class:!0});var c=A(s);n=w(c,"DIV",{class:!0}),A(n).forEach(h),a=C(c),d=w(c,"DIV",{class:!0}),A(d).forEach(h),c.forEach(h),f=C(u),u.forEach(h),this.h()},h(){m(t,"class","placeholder svelte-1tn5l0x"),X(t,"width","110px"),X(t,"margin-right","auto"),m(r,"class","placeholder svelte-1tn5l0x"),X(r,"width","60px"),m(n,"class","placeholder svelte-1tn5l0x"),X(n,"width","40px"),m(d,"class","placeholder svelte-1tn5l0x"),X(d,"width","110px"),m(s,"class","details svelte-1tn5l0x"),m(e,"class","vote svelte-1tn5l0x")},m(p,u){S(p,e,u),g(e,t),g(e,l),g(e,r),g(e,o),g(e,s),g(s,n),g(s,a),g(s,d),g(e,f)},p:H,d(p){p&&h(e)}}}function yl(i){let e,t=i[4]("gravity.votes.unrevealed")+"",l;return{c(){e=b("i"),l=T(t),this.h()},l(r){e=w(r,"I",{class:!0});var o=A(e);l=L(o,t),o.forEach(h),this.h()},h(){m(e,"class","candidate svelte-1tn5l0x")},m(r,o){S(r,e,o),g(e,l)},p(r,o){o&16&&t!==(t=r[4]("gravity.votes.unrevealed")+"")&&z(l,t)},d(r){r&&h(e)}}}function bl(i){let e,t,l,r,o=(i[0].choices[i[16].candidate].title||tt(i[0],i[16].candidate))+"",s;return{c(){e=b("p"),t=b("img"),r=D(),s=T(o),this.h()},l(n){e=w(n,"P",{class:!0});var a=A(e);t=w(a,"IMG",{src:!0,alt:!0,class:!0}),r=C(a),s=L(a,o),a.forEach(h),this.h()},h(){re(t.src,l=i[0].choices[i[16].candidate].txImageUrl)||m(t,"src",l),m(t,"alt","Choice"),m(t,"class","svelte-1tn5l0x"),m(e,"class","candidate svelte-1tn5l0x")},m(n,a){S(n,e,a),g(e,t),g(e,r),g(e,s)},p(n,a){a&5&&!re(t.src,l=n[0].choices[n[16].candidate].txImageUrl)&&m(t,"src",l),a&5&&o!==(o=(n[0].choices[n[16].candidate].title||tt(n[0],n[16].candidate))+"")&&z(s,o)},d(n){n&&h(e)}}}function et(i,e){let t,l,r,o,s,n=(e[17]?.nickname||e[17]?.address.slice(0,6)+"..."+e[17]?.address.slice(-4))+"",a,d,f,p,u=Number(me(e[16].amount)).toLocaleString("en-US")+"",c,_,v,E,y,k,I,V=new Date(Number(e[16].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",Q,q,U,J,F=H;function R(K,Y){return K[16].candidate!==null?bl:yl}let N=R(e),G=N(e);return{key:i,first:null,c(){t=b("div"),l=b("a"),r=b("img"),s=D(),a=T(n),f=D(),p=b("p"),c=T(u),_=D(),v=b("img"),y=D(),k=b("div"),I=b("span"),Q=T(V),q=D(),G.c(),U=D(),this.h()},l(K){t=w(K,"DIV",{class:!0});var Y=A(t);l=w(Y,"A",{href:!0,class:!0});var M=A(l);r=w(M,"IMG",{class:!0,src:!0,alt:!0}),s=C(M),a=L(M,n),M.forEach(h),f=C(Y),p=w(Y,"P",{});var j=A(p);c=L(j,u),j.forEach(h),_=C(Y),v=w(Y,"IMG",{src:!0,alt:!0,class:!0}),y=C(Y),k=w(Y,"DIV",{class:!0});var P=A(k);I=w(P,"SPAN",{});var W=A(I);Q=L(W,V),W.forEach(h),q=C(P),G.l(P),P.forEach(h),U=C(Y),Y.forEach(h),this.h()},h(){m(r,"class","profileImage svelte-1tn5l0x"),re(r.src,o="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||m(r,"src",o),m(r,"alt","User"),m(l,"href",d="/@"+(e[17]?.nickname||e[17]?.address)),m(l,"class","svelte-1tn5l0x"),re(v.src,E=e[5])||m(v,"src",E),m(v,"alt","COMO"),m(v,"class","svelte-1tn5l0x"),m(k,"class","details svelte-1tn5l0x"),m(t,"class","vote svelte-1tn5l0x"),this.first=t},m(K,Y){S(K,t,Y),g(t,l),g(l,r),g(l,s),g(l,a),g(t,f),g(t,p),g(p,c),g(t,_),g(t,v),g(t,y),g(t,k),g(k,I),g(I,Q),g(k,q),G.m(k,null),g(t,U)},p(K,Y){e=K,Y&12&&n!==(n=(e[17]?.nickname||e[17]?.address.slice(0,6)+"..."+e[17]?.address.slice(-4))+"")&&z(a,n),Y&12&&d!==(d="/@"+(e[17]?.nickname||e[17]?.address))&&m(l,"href",d),Y&4&&u!==(u=Number(me(e[16].amount)).toLocaleString("en-US")+"")&&z(c,u),Y&4&&V!==(V=new Date(Number(e[16].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&z(Q,V),N===(N=R(e))&&G?G.p(e,Y):(G.d(1),G=N(e),G&&(G.c(),G.m(k,null)))},r(){J=t.getBoundingClientRect()},f(){He(t),F()},a(){F(),F=Je(t,J,Ze,{})},d(K){K&&h(t),G.d()}}}function wl(i){let e;function t(o,s){return o[1]>-1?_l:pl}let l=t(i),r=l(i);return{c(){r.c(),e=$()},l(o){r.l(o),e=$()},m(o,s){r.m(o,s),S(o,e,s)},p(o,[s]){l===(l=t(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e.parentNode,e)))},i:H,o:H,d(o){o&&h(e),r.d(o)}}}function tt(i,e){const t=i.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((r,o)=>`${r.name}: ${t.slotChoices?.find(s=>s.id===l.slotChoiceIds[o])?.alias}`).join(", ")}return i.choices[e].id}function kl(i,e,t){let l;ke(i,Qe,I=>t(4,l=I));let{voteStart:r}=e,{contract:o}=e,{poll:s}=e,{pollId:n}=e,{artist:a}=e,d=-1,f;const p=fl({url:De.WS_URL}),u=`
        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${o.toLowerCase()}", poll_eq: "${n}"}) {
            ${Object.keys(De.Vote).join(`
`)}
        }
    `;let c=[],_=[];const v=Te(a).como;r>Date.now()?(f=window.setInterval(()=>{r>Date.now()?t(1,d=r-Date.now()):(E(),t(1,d=-1),window.clearInterval(f))},1e3),d=r-Date.now()):E();async function E(){const V=await(await fetch(De.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`query {${u}}`})})).json();await y(V.data.votes),(!c.length||c.filter(Q=>Q.candidate===null).length)&&p.subscribe({query:`subscription {${u}}`},{next:async Q=>{Q.data&&(await y(Q.data.votes),c.length&&!c.filter(q=>q.candidate===null).length&&p.dispose())},error:Q=>{console.error("WS error: ",Q)},complete:()=>{}})}async function y(I){const V=I.filter(Q=>!_.find(q=>q.address===Q.from)).map(Q=>Q.from);if(V.length){const q=await(await fetch(`${ye.URL}/user/v1/by-address/${V.join(",")}`)).json();t(3,_=[..._,...q,...V.filter(U=>!q.find(J=>J.address===U)).map(U=>({nickname:"",address:U,profileImageUrl:""}))])}t(2,c=I)}kt(()=>{p.dispose(),window.clearInterval(f)});const k=(I,V)=>V.address===I.from;return i.$$set=I=>{"voteStart"in I&&t(6,r=I.voteStart),"contract"in I&&t(7,o=I.contract),"poll"in I&&t(0,s=I.poll),"pollId"in I&&t(8,n=I.pollId),"artist"in I&&t(9,a=I.artist)},[s,d,c,_,l,v,r,o,n,a,k]}class El extends Ne{constructor(e){super(),Re(this,e,kl,wl,Ye,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function lt(i,e,t){const l=i.slice();return l[10]=e[t],l[12]=t,l}function rt(i){let e,t=ie(i[4]),l=[];for(let r=0;r<t.length;r+=1)l[r]=it(lt(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p(r,o){if(o&23){t=ie(r[4]);let s;for(s=0;s<t.length;s+=1){const n=lt(r,t,s);l[s]?l[s].p(n,o):(l[s]=it(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&h(e),Ee(l,r)}}}function it(i){let e,t,l=`${i[2]?i[10]/Math.max(...i[4])*100:10}%`;return{c(){e=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0,title:!0}),A(e).forEach(h),this.h()},h(){m(e,"class","bar svelte-11jci92"),m(e,"title",t=i[10].toLocaleString("en-US")+" COMO"),ze(e,"active",i[2]&&i[0]/i[1]>=i[12]/i[4].length),X(e,"height",l)},m(r,o){S(r,e,o)},p(r,o){o&16&&t!==(t=r[10].toLocaleString("en-US")+" COMO")&&m(e,"title",t),o&23&&ze(e,"active",r[2]&&r[0]/r[1]>=r[12]/r[4].length),o&20&&l!==(l=`${r[2]?r[10]/Math.max(...r[4])*100:10}%`)&&X(e,"height",l)},d(r){r&&h(e)}}}function Il(i){let e,t,l,r,o,s,n=`${i[0]/i[1]*100}%`,a,d,f,p=i[5]("gravity.totalvotes",{values:{votes:`${i[6](i[0])}/${i[6](i[1])}`}})+"",u,c,_=Math.round(i[0]/i[1]*100)+"",v,E,y=i[4]&&rt(i);return{c(){e=b("div"),t=b("div"),y&&y.c(),r=D(),o=b("div"),s=b("div"),a=D(),d=b("div"),f=b("p"),u=T(p),c=T(" ("),v=T(_),E=T("%)"),this.h()},l(k){e=w(k,"DIV",{class:!0});var I=A(e);t=w(I,"DIV",{class:!0});var V=A(t);y&&y.l(V),V.forEach(h),r=C(I),o=w(I,"DIV",{class:!0});var Q=A(o);s=w(Q,"DIV",{class:!0}),A(s).forEach(h),Q.forEach(h),a=C(I),d=w(I,"DIV",{class:!0});var q=A(d);f=w(q,"P",{});var U=A(f);u=L(U,p),c=L(U," ("),v=L(U,_),E=L(U,"%)"),U.forEach(h),q.forEach(h),I.forEach(h),this.h()},h(){m(t,"class","bars svelte-11jci92"),Mt(()=>i[9].call(t)),m(s,"class","progress svelte-11jci92"),X(s,"width",n),m(o,"class","progressBar svelte-11jci92"),m(d,"class","text svelte-11jci92"),m(e,"class","graph svelte-11jci92")},m(k,I){S(k,e,I),g(e,t),y&&y.m(t,null),l=Wt(t,i[9].bind(t)),g(e,r),g(e,o),g(o,s),g(e,a),g(e,d),g(d,f),g(f,u),g(f,c),g(f,v),g(f,E)},p(k,[I]){k[4]?y?y.p(k,I):(y=rt(k),y.c(),y.m(t,null)):y&&(y.d(1),y=null),I&3&&n!==(n=`${k[0]/k[1]*100}%`)&&X(s,"width",n),I&99&&p!==(p=k[5]("gravity.totalvotes",{values:{votes:`${k[6](k[0])}/${k[6](k[1])}`}})+"")&&z(u,p),I&3&&_!==(_=Math.round(k[0]/k[1]*100)+"")&&z(v,_)},i:H,o:H,d(k){k&&h(e),y&&y.d(),l()}}}function Al(i,e,t){let l,r;ke(i,Qe,c=>t(5,l=c)),ke(i,Lt,c=>t(6,r=c));let{contract:o}=e,{poll:s}=e,{revealedVotes:n}=e,{totalVotes:a}=e,d;fetch(De.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(limit: 99999, where: {contract_eq: "${o}", poll_eq: "${s}"}) {
                        amount
                    }
                }
            `})}).then(async c=>{const _=await c.json();t(2,d=_.data.votes.map(v=>Number(me(v.amount))))});let f,p;function u(){f=this.clientWidth,t(3,f)}return i.$$set=c=>{"contract"in c&&t(7,o=c.contract),"poll"in c&&t(8,s=c.poll),"revealedVotes"in c&&t(0,n=c.revealedVotes),"totalVotes"in c&&t(1,a=c.totalVotes)},i.$$.update=()=>{if(i.$$.dirty&12&&f)if(d){let c=[...d],_=[];for(let v=(f-10)/20;v>0;v--)_.push(c.splice(0,Math.ceil(c.length/v)).reduce((E,y)=>E+y,0));t(4,p=_)}else t(4,p=Array(Math.floor((f-10)/20)).fill(0))},[n,a,d,f,p,l,r,o,s,u]}class Sl extends Ne{constructor(e){super(),Re(this,e,Al,Il,Ye,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function Vl(i,e,t){const l=i.slice();return l[10]=e[t],l[12]=t,l}function st(i,e,t){const l=i.slice();return l[4]=e[t],l}function ot(i,e,t){const l=i.slice();return l[7]=e[t],l}function Bl(i){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),A(e).forEach(h),this.h()},h(){m(e,"class","placeholder svelte-1y461sc"),X(e,"Width","80px")},m(t,l){S(t,e,l)},p:H,d(t){t&&h(e)}}}function Dl(i){let e,t=i[1]("gravity.history.subtitle",{values:{count:i[0].length}})+"",l;return{c(){e=b("p"),l=T(t)},l(r){e=w(r,"P",{});var o=A(e);l=L(o,t),o.forEach(h)},m(r,o){S(r,e,o),g(e,l)},p(r,o){o&3&&t!==(t=r[1]("gravity.history.subtitle",{values:{count:r[0].length}})+"")&&z(l,t)},d(r){r&&h(e)}}}function Cl(i){let e,t=ie({length:5}),l=[];for(let r=0;r<t.length;r+=1)l[r]=Ml(Vl(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p:H,d(r){r&&h(e),Ee(l,r)}}}function Fl(i){let e,t=ie(i[0]),l=[];for(let r=0;r<t.length;r+=1)l[r]=ct(st(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p(r,o){if(o&1){t=ie(r[0]);let s;for(s=0;s<t.length;s+=1){const n=st(r,t,s);l[s]?l[s].p(n,o):(l[s]=ct(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&h(e),Ee(l,r)}}}function Ml(i){let e,t,l,r,o,s;return{c(){e=b("div"),t=b("div"),l=D(),r=b("div"),o=D(),s=b("hr"),this.h()},l(n){e=w(n,"DIV",{class:!0});var a=A(e);t=w(a,"DIV",{class:!0}),A(t).forEach(h),l=C(a),r=w(a,"DIV",{class:!0}),A(r).forEach(h),a.forEach(h),o=C(n),s=w(n,"HR",{}),this.h()},h(){m(t,"class","placeholder imgPlaceholder svelte-1y461sc"),m(r,"class","placeholder svelte-1y461sc"),X(r,"width","calc(100% - 60px)"),m(e,"class","gravity svelte-1y461sc")},m(n,a){S(n,e,a),g(e,t),g(e,l),g(e,r),S(n,o,a),S(n,s,a)},p:H,d(n){n&&(h(e),h(o),h(s))}}}function Pl(i){let e,t=i[4].title+"",l,r;return{c(){e=b("a"),l=T(t),this.h()},l(o){e=w(o,"A",{class:!0,href:!0});var s=A(e);l=L(s,t),s.forEach(h),this.h()},h(){m(e,"class","title svelte-1y461sc"),m(e,"href",r="/gravity/"+i[4].artist+"/"+i[4].id)},m(o,s){S(o,e,s),g(e,l)},p(o,s){s&1&&t!==(t=o[4].title+"")&&z(l,t),s&1&&r!==(r="/gravity/"+o[4].artist+"/"+o[4].id)&&m(e,"href",r)},d(o){o&&h(e)}}}function Ul(i){let e,t=i[4].title+"",l;return{c(){e=b("p"),l=T(t)},l(r){e=w(r,"P",{});var o=A(e);l=L(o,t),o.forEach(h)},m(r,o){S(r,e,o),g(e,l)},p(r,o){o&1&&t!==(t=r[4].title+"")&&z(l,t)},d(r){r&&h(e)}}}function nt(i){let e,t=ie(i[4].polls.sort(i[3])),l=[];for(let r=0;r<t.length;r+=1)l[r]=at(ot(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p(r,o){if(o&1){t=ie(r[4].polls.sort(r[3]));let s;for(s=0;s<t.length;s+=1){const n=ot(r,t,s);l[s]?l[s].p(n,o):(l[s]=at(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&h(e),Ee(l,r)}}}function at(i){let e,t,l=i[7].title+"",r,o,s,n,a=new Date(i[7].startDate).toLocaleDateString()+"",d,f;return{c(){e=b("div"),t=b("a"),r=T(l),s=D(),n=b("p"),d=T(a),f=D(),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=A(e);t=w(u,"A",{href:!0,class:!0});var c=A(t);r=L(c,l),c.forEach(h),s=C(u),n=w(u,"P",{});var _=A(n);d=L(_,a),_.forEach(h),f=C(u),u.forEach(h),this.h()},h(){m(t,"href",o="/gravity/"+i[4].artist+"/"+i[4].id+"/"+i[7].id),m(t,"class","svelte-1y461sc"),m(e,"class","poll svelte-1y461sc")},m(p,u){S(p,e,u),g(e,t),g(t,r),g(e,s),g(e,n),g(n,d),g(e,f)},p(p,u){u&1&&l!==(l=p[7].title+"")&&z(r,l),u&1&&o!==(o="/gravity/"+p[4].artist+"/"+p[4].id+"/"+p[7].id)&&m(t,"href",o),u&1&&a!==(a=new Date(p[7].startDate).toLocaleDateString()+"")&&z(d,a)},d(p){p&&h(e)}}}function ct(i){let e,t,l,r,o,s,n,a;function d(c,_){return c[4].polls.length>1?Ul:Pl}let f=d(i),p=f(i),u=i[4].polls.length>1&&nt(i);return{c(){e=b("div"),t=b("img"),o=D(),p.c(),s=D(),u&&u.c(),n=D(),a=b("hr"),this.h()},l(c){e=w(c,"DIV",{class:!0});var _=A(e);t=w(_,"IMG",{src:!0,alt:!0,class:!0}),o=C(_),p.l(_),_.forEach(h),s=C(c),u&&u.l(c),n=C(c),a=w(c,"HR",{}),this.h()},h(){re(t.src,l=i[4].bannerImageUrl)||m(t,"src",l),m(t,"alt",r=i[4].title),m(t,"class","svelte-1y461sc"),m(e,"class","gravity svelte-1y461sc")},m(c,_){S(c,e,_),g(e,t),g(e,o),p.m(e,null),S(c,s,_),u&&u.m(c,_),S(c,n,_),S(c,a,_)},p(c,_){_&1&&!re(t.src,l=c[4].bannerImageUrl)&&m(t,"src",l),_&1&&r!==(r=c[4].title)&&m(t,"alt",r),f===(f=d(c))&&p?p.p(c,_):(p.d(1),p=f(c),p&&(p.c(),p.m(e,null))),c[4].polls.length>1?u?u.p(c,_):(u=nt(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},d(c){c&&(h(e),h(s),h(n),h(a)),p.d(),u&&u.d(c)}}}function Wl(i){let e,t,l,r=i[1]("gravity.history.title")+"",o,s,n;function a(_,v){return _[0]?Dl:Bl}let d=a(i),f=d(i);function p(_,v){return _[0]?Fl:Cl}let u=p(i),c=u(i);return{c(){e=b("div"),t=b("div"),l=b("b"),o=T(r),s=D(),f.c(),n=D(),c.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=A(e);t=w(v,"DIV",{class:!0});var E=A(t);l=w(E,"B",{});var y=A(l);o=L(y,r),y.forEach(h),s=C(E),f.l(E),E.forEach(h),n=C(v),c.l(v),v.forEach(h),this.h()},h(){m(t,"class","header svelte-1y461sc"),m(e,"class","history svelte-1y461sc")},m(_,v){S(_,e,v),g(e,t),g(t,l),g(l,o),g(t,s),f.m(t,null),g(e,n),c.m(e,null)},p(_,[v]){v&2&&r!==(r=_[1]("gravity.history.title")+"")&&z(o,r),d===(d=a(_))&&f?f.p(_,v):(f.d(1),f=d(_),f&&(f.c(),f.m(t,null))),u===(u=p(_))&&c?c.p(_,v):(c.d(1),c=u(_),c&&(c.c(),c.m(e,null)))},i:H,o:H,d(_){_&&h(e),f.d(),c.d()}}}function Yl(i,e,t){let l;ke(i,Qe,n=>t(1,l=n));let{artist:r}=e,{gravities:o=void 0}=e;o||fetch(`${ye.URL}/gravity/v3/${r.name}`).then(async n=>{const a=await n.json();t(0,o=[...a.upcoming,...a.ongoing,...a.past])});const s=(n,a)=>Date.parse(n.startDate)-Date.parse(a.startDate);return i.$$set=n=>{"artist"in n&&t(2,r=n.artist),"gravities"in n&&t(0,o=n.gravities)},[o,l,r,s]}class Nl extends Ne{constructor(e){super(),Re(this,e,Yl,Wl,Ye,{artist:2,gravities:0})}}function ft(i,e,t){const l=i.slice();l[25]=e[t];const r=Math.round(Number(me(l[10][l[2].choices.indexOf(l[25])]))/l[9]*100);return l[26]=r,l}function ut(i,e,t){const l=i.slice();return l[22]=e[t],l[24]=t,l}function dt(i,e,t){const l=i.slice();l[25]=e[t];const r=Math.round(l[12](l[24],l[25].id)/l[10].reduce((o,s)=>o+Number(me(s)),0)*100);return l[26]=r,l}function Rl(i){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),A(e).forEach(h),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),X(e,"width","85px")},m(t,l){S(t,e,l)},p:H,i:H,o:H,d(t){t&&h(e)}}}function Ql(i){let e,t,l;function r(s){i[16](s)}let o={};return i[1]!==void 0&&(o.selected=i[1]),e=new Jt({props:o}),Et.push(()=>At(e,"selected",r)),{c(){Ce(e.$$.fragment)},l(s){Fe(e.$$.fragment,s)},m(s,n){Me(e,s,n),l=!0},p(s,n){const a={};!t&&n&2&&(t=!0,a.selected=s[1],It(()=>t=!1)),e.$set(a)},i(s){l||(he(e.$$.fragment,s),l=!0)},o(s){de(e.$$.fragment,s),l=!1},d(s){Pe(e,s)}}}function Gl(i){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0}),A(e).forEach(h),t=C(r),l=w(r,"DIV",{class:!0}),A(l).forEach(h),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),X(e,"width","50px"),m(l,"class","placeholder svelte-1ut09yc"),X(l,"margin-left","auto"),X(l,"width","135px")},m(r,o){S(r,e,o),S(r,t,o),S(r,l,o)},p:H,d(r){r&&(h(e),h(t),h(l))}}}function Ol(i){let e,t,l,r,o,s,n,a,d;function f(c,_){if(c[0].type==="event-gravity")return jl;if(c[0].type==="grand-gravity")return Ll;if(c[0].type==="solo-gravity")return Tl}let p=f(i),u=p&&p(i);return{c(){e=b("div"),u&&u.c(),l=D(),r=b("a"),o=b("img"),n=T(`
                        PolygonScan`),this.h()},l(c){e=w(c,"DIV",{class:!0});var _=A(e);u&&u.l(_),_.forEach(h),l=C(c),r=w(c,"A",{class:!0,href:!0,title:!0});var v=A(r);o=w(v,"IMG",{src:!0,alt:!0,class:!0}),n=L(v,`
                        PolygonScan`),v.forEach(h),this.h()},h(){m(e,"class",t="gravityType "+i[0].type+" svelte-1ut09yc"),re(o.src,s=Ht)||m(o,"src",s),m(o,"alt","PolygonScan"),m(o,"class","svelte-1ut09yc"),m(r,"class","polygonscan svelte-1ut09yc"),m(r,"href",a=i[0].contractOutlink),m(r,"title",d="Poll ID: "+i[5])},m(c,_){S(c,e,_),u&&u.m(e,null),S(c,l,_),S(c,r,_),g(r,o),g(r,n)},p(c,_){p!==(p=f(c))&&(u&&u.d(1),u=p&&p(c),u&&(u.c(),u.m(e,null))),_&1&&t!==(t="gravityType "+c[0].type+" svelte-1ut09yc")&&m(e,"class",t),_&1&&a!==(a=c[0].contractOutlink)&&m(r,"href",a),_&32&&d!==(d="Poll ID: "+c[5])&&m(r,"title",d)},d(c){c&&(h(e),h(l),h(r)),u&&u.d()}}}function Tl(i){let e;return{c(){e=T("Solo")},l(t){e=L(t,"Solo")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function Ll(i){let e;return{c(){e=T("Grand")},l(t){e=L(t,"Grand")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function jl(i){let e;return{c(){e=T("Event")},l(t){e=L(t,"Event")},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function ql(i){let e,t='<div class="placeholder svelte-1ut09yc"></div> <div class="placeholder svelte-1ut09yc"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){m(e,"class","titlePlaceholder svelte-1ut09yc")},m(l,r){S(l,e,r)},p:H,d(l){l&&h(e)}}}function Jl(i){let e,t,l=i[0].title.replaceAll(`
`,i[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=b("h1"),t=new Yt(!1),this.h()},l(r){e=w(r,"H1",{class:!0});var o=A(e);t=Nt(o,!1),o.forEach(h),this.h()},h(){t.a=null,m(e,"class","svelte-1ut09yc")},m(r,o){S(r,e,o),t.m(l,e)},p(r,o){o&1&&l!==(l=r[0].title.replaceAll(`
`,r[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(r){r&&h(e)}}}function Hl(i){let e,t,l,r,o;return{c(){e=b("div"),t=D(),l=b("div"),r=D(),o=b("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),A(e).forEach(h),t=C(s),l=w(s,"DIV",{class:!0}),A(l).forEach(h),r=C(s),o=w(s,"DIV",{class:!0}),A(o).forEach(h),this.h()},h(){m(e,"class","placeholder svelte-1ut09yc"),X(e,"width","50px"),m(l,"class","placeholder svelte-1ut09yc"),X(l,"width","150px"),m(o,"class","placeholder svelte-1ut09yc"),X(o,"margin-left","auto"),X(o,"width","65px")},m(s,n){S(s,e,n),S(s,t,n),S(s,l,n),S(s,r,n),S(s,o,n)},p:H,d(s){s&&(h(e),h(t),h(l),h(r),h(o))}}}function Zl(i){let e,t,l=new Date(i[2].startDate).toLocaleDateString()+"",r,o,s,n=i[0].polls.length>1&&ht(i),a=(i[6]>-1||i[7]<i[8])&&pt();return{c(){n&&n.c(),e=D(),t=b("p"),r=T(l),o=D(),a&&a.c(),s=$(),this.h()},l(d){n&&n.l(d),e=C(d),t=w(d,"P",{class:!0});var f=A(t);r=L(f,l),f.forEach(h),o=C(d),a&&a.l(d),s=$(),this.h()},h(){m(t,"class","svelte-1ut09yc")},m(d,f){n&&n.m(d,f),S(d,e,f),S(d,t,f),g(t,r),S(d,o,f),a&&a.m(d,f),S(d,s,f)},p(d,f){d[0].polls.length>1?n?n.p(d,f):(n=ht(d),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f&4&&l!==(l=new Date(d[2].startDate).toLocaleDateString()+"")&&z(r,l),d[6]>-1||d[7]<d[8]?a||(a=pt(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(d){d&&(h(e),h(t),h(o),h(s)),n&&n.d(d),a&&a.d(d)}}}function ht(i){let e,t=i[2].title+"",l;return{c(){e=b("p"),l=T(t),this.h()},l(r){e=w(r,"P",{class:!0});var o=A(e);l=L(o,t),o.forEach(h),this.h()},h(){m(e,"class","svelte-1ut09yc")},m(r,o){S(r,e,o),g(e,l)},p(r,o){o&4&&t!==(t=r[2].title+"")&&z(l,t)},d(r){r&&h(e)}}}function pt(i){let e,t='<div class="dot"></div>',l,r,o="LIVE";return{c(){e=b("div"),e.innerHTML=t,l=D(),r=b("p"),r.textContent=o,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=C(s),r=w(s,"P",{class:!0,"data-svelte-h":!0}),Oe(r)!=="svelte-1k24nxm"&&(r.textContent=o),this.h()},h(){m(e,"class","liveIndicator svelte-1ut09yc"),m(r,"class","svelte-1ut09yc")},m(s,n){S(s,e,n),S(s,l,n),S(s,r,n)},d(s){s&&(h(e),h(l),h(r))}}}function zl(i){let e,t,l;return{c(){e=b("div"),t=D(),l=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0}),A(e).forEach(h),t=C(r),l=w(r,"DIV",{class:!0}),A(l).forEach(h),this.h()},h(){m(e,"class","itemPlaceholder svelte-1ut09yc"),X(e,"height","250px"),m(l,"class","itemPlaceholder svelte-1ut09yc"),X(l,"height","350px")},m(r,o){S(r,e,o),S(r,t,o),S(r,l,o)},p:H,i:H,o:H,d(r){r&&(h(e),h(t),h(l))}}}function Xl(i){let e,t,l,r;const o=[$l,Kl],s=[];function n(a,d){return a[6]>-1?0:1}return e=n(i),t=s[e]=o[e](i),{c(){t.c(),l=$()},l(a){t.l(a),l=$()},m(a,d){s[e].m(a,d),S(a,l,d),r=!0},p(a,d){let f=e;e=n(a),e===f?s[e].p(a,d):(Be(),de(s[f],1,1,()=>{s[f]=null}),Ve(),t=s[e],t?t.p(a,d):(t=s[e]=o[e](a),t.c()),he(t,1),t.m(l.parentNode,l))},i(a){r||(he(t),r=!0)},o(a){de(t),r=!1},d(a){a&&h(l),s[e].d(a)}}}function Kl(i){let e,t,l,r;e=new Sl({props:{contract:i[4].target.toString().toLowerCase(),poll:i[5],revealedVotes:i[7],totalVotes:i[8]}});function o(a,d){return a[2].pollViewMetadata.slots&&a[2].pollViewMetadata.slotChoices?er:xl}let s=o(i),n=s(i);return{c(){Ce(e.$$.fragment),t=D(),l=b("div"),n.c(),this.h()},l(a){Fe(e.$$.fragment,a),t=C(a),l=w(a,"DIV",{class:!0});var d=A(l);n.l(d),d.forEach(h),this.h()},h(){m(l,"class","item polls svelte-1ut09yc")},m(a,d){Me(e,a,d),S(a,t,d),S(a,l,d),n.m(l,null),r=!0},p(a,d){const f={};d&16&&(f.contract=a[4].target.toString().toLowerCase()),d&32&&(f.poll=a[5]),d&128&&(f.revealedVotes=a[7]),d&256&&(f.totalVotes=a[8]),e.$set(f),s===(s=o(a))&&n?n.p(a,d):(n.d(1),n=s(a),n&&(n.c(),n.m(l,null)))},i(a){r||(he(e.$$.fragment,a),r=!0)},o(a){de(e.$$.fragment,a),r=!1},d(a){a&&(h(t),h(l)),Pe(e,a),n.d()}}}function $l(i){let e,t,l,r=i[11]("gravity.counting_countdown")+"",o,s,n,a=String(Math.floor(i[6]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[6]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(i[6]%(60*1e3)/1e3)).padStart(2,"0"),d,f=i[0]&&i[0].bannerImageUrl&&bt(i);return{c(){e=b("div"),f&&f.c(),t=D(),l=b("p"),o=T(r),s=D(),n=b("h3"),d=T(a),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=A(e);f&&f.l(u),t=C(u),l=w(u,"P",{});var c=A(l);o=L(c,r),c.forEach(h),s=C(u),n=w(u,"H3",{class:!0});var _=A(n);d=L(_,a),_.forEach(h),u.forEach(h),this.h()},h(){m(n,"class","svelte-1ut09yc"),m(e,"class","item countdown svelte-1ut09yc")},m(p,u){S(p,e,u),f&&f.m(e,null),g(e,t),g(e,l),g(l,o),g(e,s),g(e,n),g(n,d)},p(p,u){p[0]&&p[0].bannerImageUrl?f?f.p(p,u):(f=bt(p),f.c(),f.m(e,t)):f&&(f.d(1),f=null),u&2048&&r!==(r=p[11]("gravity.counting_countdown")+"")&&z(o,r),u&64&&a!==(a=String(Math.floor(p[6]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(p[6]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(p[6]%(60*1e3)/1e3)).padStart(2,"0"))&&z(d,a)},i:H,o:H,d(p){p&&h(e),f&&f.d()}}}function xl(i){let e,t=[],l=new Map,r=ie([...i[2].choices].sort(i[18]));const o=s=>s[25];for(let s=0;s<r.length;s+=1){let n=ft(i,r,s),a=o(n);l.set(a,t[s]=_t(a,n))}return{c(){e=b("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0});var n=A(e);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(h),this.h()},h(){m(e,"class","slot svelte-1ut09yc")},m(s,n){S(s,e,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(s,n){if(n&1540){r=ie([...s[2].choices].sort(s[18]));for(let a=0;a<t.length;a+=1)t[a].r();t=Le(t,n,o,1,s,r,l,e,je,_t,null,ft);for(let a=0;a<t.length;a+=1)t[a].a()}},d(s){s&&h(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function er(i){let e,t=ie(i[2].pollViewMetadata.slots),l=[];for(let r=0;r<t.length;r+=1)l[r]=yt(ut(i,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=$()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);S(r,e,o)},p(r,o){if(o&5124){t=ie(r[2].pollViewMetadata.slots);let s;for(s=0;s<t.length;s+=1){const n=ut(r,t,s);l[s]?l[s].p(n,o):(l[s]=yt(n),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&h(e),Ee(l,r)}}}function _t(i,e){let t,l,r,o,s,n,a,d=e[25].title+"",f,p,u,c=Number(me(e[10][e[2].choices.indexOf(e[25])])).toLocaleString("en-US")+"",_,v,E=e[26]+"",y,k,I,V,Q,q=`${e[26]}%`,U,J,F=H;return{key:i,first:null,c(){t=b("div"),l=b("div"),r=b("img"),n=D(),a=b("p"),f=T(d),p=D(),u=b("p"),_=T(c),v=T(" COMO ("),y=T(E),k=T("%)"),I=D(),V=b("div"),Q=b("div"),U=D(),this.h()},l(R){t=w(R,"DIV",{class:!0});var N=A(t);l=w(N,"DIV",{class:!0});var G=A(l);r=w(G,"IMG",{src:!0,alt:!0,class:!0}),n=C(G),a=w(G,"P",{class:!0});var K=A(a);f=L(K,d),K.forEach(h),p=C(G),u=w(G,"P",{});var Y=A(u);_=L(Y,c),v=L(Y," COMO ("),y=L(Y,E),k=L(Y,"%)"),Y.forEach(h),G.forEach(h),I=C(N),V=w(N,"DIV",{class:!0});var M=A(V);Q=w(M,"DIV",{class:!0}),A(Q).forEach(h),M.forEach(h),U=C(N),N.forEach(h),this.h()},h(){re(r.src,o=e[25].txImageUrl)||m(r,"src",o),m(r,"alt",s=e[25].title),m(r,"class","svelte-1ut09yc"),m(a,"class","name svelte-1ut09yc"),m(l,"class","choiceTitle svelte-1ut09yc"),m(Q,"class","progress svelte-1ut09yc"),X(Q,"width",q),m(V,"class","choiceBar svelte-1ut09yc"),m(t,"class","choice svelte-1ut09yc"),this.first=t},m(R,N){S(R,t,N),g(t,l),g(l,r),g(l,n),g(l,a),g(a,f),g(l,p),g(l,u),g(u,_),g(u,v),g(u,y),g(u,k),g(t,I),g(t,V),g(V,Q),g(t,U)},p(R,N){e=R,N&1028&&!re(r.src,o=e[25].txImageUrl)&&m(r,"src",o),N&1028&&s!==(s=e[25].title)&&m(r,"alt",s),N&1028&&d!==(d=e[25].title+"")&&z(f,d),N&1028&&c!==(c=Number(me(e[10][e[2].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&z(_,c),N&1540&&E!==(E=e[26]+"")&&z(y,E),N&1540&&q!==(q=`${e[26]}%`)&&X(Q,"width",q)},r(){J=t.getBoundingClientRect()},f(){He(t),F()},a(){F(),F=Je(t,J,Ze,{})},d(R){R&&h(t)}}}function mt(i){let e,t,l;return{c(){e=b("img"),this.h()},l(r){e=w(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){re(e.src,t=i[25].roundImageUrl)||m(e,"src",t),m(e,"alt",l=i[25].name),m(e,"class","svelte-1ut09yc")},m(r,o){S(r,e,o)},p(r,o){o&4&&!re(e.src,t=r[25].roundImageUrl)&&m(e,"src",t),o&4&&l!==(l=r[25].name)&&m(e,"alt",l)},d(r){r&&h(e)}}}function gt(i,e){let t,l,r,o,s=e[25].name+"",n,a,d,f=e[12](e[24],e[25].id).toLocaleString("en-US")+"",p,u,c=e[26]+"",_,v,E,y,k,I=`${e[26]}%`,V,Q,q=H,U=e[25].roundImageUrl&&mt(e);return{key:i,first:null,c(){t=b("div"),l=b("div"),U&&U.c(),r=D(),o=b("p"),n=T(s),a=D(),d=b("p"),p=T(f),u=T(" COMO ("),_=T(c),v=T("%)"),E=D(),y=b("div"),k=b("div"),V=D(),this.h()},l(J){t=w(J,"DIV",{class:!0});var F=A(t);l=w(F,"DIV",{class:!0});var R=A(l);U&&U.l(R),r=C(R),o=w(R,"P",{class:!0});var N=A(o);n=L(N,s),N.forEach(h),a=C(R),d=w(R,"P",{});var G=A(d);p=L(G,f),u=L(G," COMO ("),_=L(G,c),v=L(G,"%)"),G.forEach(h),R.forEach(h),E=C(F),y=w(F,"DIV",{class:!0});var K=A(y);k=w(K,"DIV",{class:!0}),A(k).forEach(h),K.forEach(h),V=C(F),F.forEach(h),this.h()},h(){m(o,"class","name svelte-1ut09yc"),m(l,"class","choiceTitle svelte-1ut09yc"),m(k,"class","progress svelte-1ut09yc"),X(k,"width",I),m(y,"class","choiceBar svelte-1ut09yc"),m(t,"class","choice svelte-1ut09yc"),this.first=t},m(J,F){S(J,t,F),g(t,l),U&&U.m(l,null),g(l,r),g(l,o),g(o,n),g(l,a),g(l,d),g(d,p),g(d,u),g(d,_),g(d,v),g(t,E),g(t,y),g(y,k),g(t,V)},p(J,F){e=J,e[25].roundImageUrl?U?U.p(e,F):(U=mt(e),U.c(),U.m(l,r)):U&&(U.d(1),U=null),F&4&&s!==(s=e[25].name+"")&&z(n,s),F&4&&f!==(f=e[12](e[24],e[25].id).toLocaleString("en-US")+"")&&z(p,f),F&1028&&c!==(c=e[26]+"")&&z(_,c),F&1028&&I!==(I=`${e[26]}%`)&&X(k,"width",I)},r(){Q=t.getBoundingClientRect()},f(){He(t),q()},a(){q(),q=Je(t,Q,Ze,{})},d(J){J&&h(t),U&&U.d()}}}function vt(i){let e;return{c(){e=b("hr")},l(t){e=w(t,"HR",{})},m(t,l){S(t,e,l)},d(t){t&&h(e)}}}function yt(i){let e,t,l,r,o,s,n=i[22].name+"",a,d,f=[],p=new Map,u,c;function _(...k){return i[17](i[24],...k)}let v=ie(i[2].pollViewMetadata.slotChoices.sort(_));const E=k=>k[25];for(let k=0;k<v.length;k+=1){let I=dt(i,v,k),V=E(I);p.set(V,f[k]=gt(V,I))}let y=i[24]<i[2].pollViewMetadata.slots.length-1&&vt();return{c(){e=b("div"),t=b("p"),l=b("img"),s=D(),a=T(n),d=D();for(let k=0;k<f.length;k+=1)f[k].c();u=D(),y&&y.c(),c=$(),this.h()},l(k){e=w(k,"DIV",{class:!0});var I=A(e);t=w(I,"P",{class:!0});var V=A(t);l=w(V,"IMG",{src:!0,alt:!0,class:!0}),s=C(V),a=L(V,n),V.forEach(h),d=C(I);for(let Q=0;Q<f.length;Q+=1)f[Q].l(I);I.forEach(h),u=C(k),y&&y.l(k),c=$(),this.h()},h(){re(l.src,r=i[22].backgroundImageUrl)||m(l,"src",r),m(l,"alt",o=i[22].name),m(l,"class","svelte-1ut09yc"),m(t,"class","slotTitle svelte-1ut09yc"),m(e,"class","slot svelte-1ut09yc")},m(k,I){S(k,e,I),g(e,t),g(t,l),g(t,s),g(t,a),g(e,d);for(let V=0;V<f.length;V+=1)f[V]&&f[V].m(e,null);S(k,u,I),y&&y.m(k,I),S(k,c,I)},p(k,I){if(i=k,I&4&&!re(l.src,r=i[22].backgroundImageUrl)&&m(l,"src",r),I&4&&o!==(o=i[22].name)&&m(l,"alt",o),I&4&&n!==(n=i[22].name+"")&&z(a,n),I&5124){v=ie(i[2].pollViewMetadata.slotChoices.sort(_));for(let V=0;V<f.length;V+=1)f[V].r();f=Le(f,I,E,1,i,v,p,e,je,gt,null,dt);for(let V=0;V<f.length;V+=1)f[V].a()}i[24]<i[2].pollViewMetadata.slots.length-1?y||(y=vt(),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null)},d(k){k&&(h(e),h(u),h(c));for(let I=0;I<f.length;I+=1)f[I].d();y&&y.d(k)}}}function bt(i){let e,t,l;return{c(){e=b("img"),this.h()},l(r){e=w(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){re(e.src,t=i[0].bannerImageUrl)||m(e,"src",t),m(e,"alt",l=i[0].title),m(e,"class","svelte-1ut09yc")},m(r,o){S(r,e,o)},p(r,o){o&1&&!re(e.src,t=r[0].bannerImageUrl)&&m(e,"src",t),o&1&&l!==(l=r[0].title)&&m(e,"alt",l)},d(r){r&&h(e)}}}function tr(i){let e,t,l,r,o;return{c(){e=b("div"),t=D(),l=b("div"),r=D(),o=b("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),A(e).forEach(h),t=C(s),l=w(s,"DIV",{class:!0}),A(l).forEach(h),r=C(s),o=w(s,"DIV",{class:!0}),A(o).forEach(h),this.h()},h(){m(e,"class","itemPlaceholder svelte-1ut09yc"),m(l,"class","itemPlaceholder svelte-1ut09yc"),X(l,"flex","2"),m(o,"class","itemPlaceholder svelte-1ut09yc"),X(o,"flex","1")},m(s,n){S(s,e,n),S(s,t,n),S(s,l,n),S(s,r,n),S(s,o,n)},p:H,i:H,o:H,d(s){s&&(h(e),h(t),h(l),h(r),h(o))}}}function lr(i){let e,t,l=i[11]("gravity.totalcomo")+"",r,o,s,n,a,d,f,p,u=i[9]!==void 0&&wt(i);n=new El({props:{voteStart:Date.parse(i[2].startDate),contract:i[4].target.toString(),poll:i[2],pollId:i[5],artist:i[1]}});function c(v){i[19](v)}let _={artist:i[1]};return i[3]!==void 0&&(_.gravities=i[3]),d=new Nl({props:_}),Et.push(()=>At(d,"gravities",c)),{c(){e=b("div"),t=b("b"),r=T(l),o=D(),u&&u.c(),s=D(),Ce(n.$$.fragment),a=D(),Ce(d.$$.fragment),this.h()},l(v){e=w(v,"DIV",{class:!0});var E=A(e);t=w(E,"B",{class:!0});var y=A(t);r=L(y,l),y.forEach(h),o=C(E),u&&u.l(E),E.forEach(h),s=C(v),Fe(n.$$.fragment,v),a=C(v),Fe(d.$$.fragment,v),this.h()},h(){m(t,"class","svelte-1ut09yc"),m(e,"class","item total svelte-1ut09yc")},m(v,E){S(v,e,E),g(e,t),g(t,r),g(e,o),u&&u.m(e,null),S(v,s,E),Me(n,v,E),S(v,a,E),Me(d,v,E),p=!0},p(v,E){(!p||E&2048)&&l!==(l=v[11]("gravity.totalcomo")+"")&&z(r,l),v[9]!==void 0?u?u.p(v,E):(u=wt(v),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const y={};E&4&&(y.voteStart=Date.parse(v[2].startDate)),E&16&&(y.contract=v[4].target.toString()),E&4&&(y.poll=v[2]),E&32&&(y.pollId=v[5]),E&2&&(y.artist=v[1]),n.$set(y);const k={};E&2&&(k.artist=v[1]),!f&&E&8&&(f=!0,k.gravities=v[3],It(()=>f=!1)),d.$set(k)},i(v){p||(he(n.$$.fragment,v),he(d.$$.fragment,v),p=!0)},o(v){de(n.$$.fragment,v),de(d.$$.fragment,v),p=!1},d(v){v&&(h(e),h(s),h(a)),u&&u.d(),Pe(n,v),Pe(d,v)}}}function wt(i){let e,t=i[9].toLocaleString("en-US")+"",l,r,o,s;return{c(){e=b("p"),l=T(t),r=D(),o=b("img"),this.h()},l(n){e=w(n,"P",{});var a=A(e);l=L(a,t),a.forEach(h),r=C(n),o=w(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){re(o.src,s=Te(i[1]).como)||m(o,"src",s),m(o,"alt","COMO"),m(o,"class","svelte-1ut09yc")},m(n,a){S(n,e,a),g(e,l),S(n,r,a),S(n,o,a)},p(n,a){a&512&&t!==(t=n[9].toLocaleString("en-US")+"")&&z(l,t),a&2&&!re(o.src,s=Te(n[1]).como)&&m(o,"src",s)},d(n){n&&(h(e),h(r),h(o))}}}function rr(i){let e,t,l,r,o,s,n,a,d,f,p,u,c,_,v,E,y,k;const I=[Ql,Rl],V=[];function Q(B,Z){return B[1]?0:1}o=Q(i),s=V[o]=I[o](i);function q(B,Z){return B[0]?Ol:Gl}let U=q(i),J=U(i);function F(B,Z){return B[0]?Jl:ql}let R=F(i),N=R(i);function G(B,Z){return B[0]&&B[2]?Zl:Hl}let K=G(i),Y=K(i);const M=[Xl,zl],j=[];function P(B,Z){return B[2]?0:1}u=P(i),c=j[u]=M[u](i);const W=[lr,tr],O=[];function le(B,Z){return B[2]&&B[1]?0:1}return E=le(i),y=O[E]=W[E](i),{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),s.c(),n=D(),J.c(),a=D(),N.c(),d=D(),f=b("div"),Y.c(),p=D(),c.c(),_=D(),v=b("div"),y.c(),this.h()},l(B){e=w(B,"DIV",{class:!0});var Z=A(e);t=w(Z,"DIV",{class:!0});var ne=A(t);l=w(ne,"DIV",{class:!0});var se=A(l);r=w(se,"DIV",{class:!0});var oe=A(r);s.l(oe),n=C(oe),J.l(oe),oe.forEach(h),a=C(se),N.l(se),d=C(se),f=w(se,"DIV",{class:!0});var ee=A(f);Y.l(ee),ee.forEach(h),se.forEach(h),p=C(ne),c.l(ne),ne.forEach(h),_=C(Z),v=w(Z,"DIV",{class:!0});var te=A(v);y.l(te),te.forEach(h),Z.forEach(h),this.h()},h(){m(r,"class","headerSection svelte-1ut09yc"),m(f,"class","headerSection svelte-1ut09yc"),m(l,"class","header svelte-1ut09yc"),m(t,"class","main svelte-1ut09yc"),m(v,"class","sidebar svelte-1ut09yc"),m(e,"class","layout svelte-1ut09yc")},m(B,Z){S(B,e,Z),g(e,t),g(t,l),g(l,r),V[o].m(r,null),g(r,n),J.m(r,null),g(l,a),N.m(l,null),g(l,d),g(l,f),Y.m(f,null),g(t,p),j[u].m(t,null),g(e,_),g(e,v),O[E].m(v,null),k=!0},p(B,[Z]){let ne=o;o=Q(B),o===ne?V[o].p(B,Z):(Be(),de(V[ne],1,1,()=>{V[ne]=null}),Ve(),s=V[o],s?s.p(B,Z):(s=V[o]=I[o](B),s.c()),he(s,1),s.m(r,n)),U===(U=q(B))&&J?J.p(B,Z):(J.d(1),J=U(B),J&&(J.c(),J.m(r,null))),R===(R=F(B))&&N?N.p(B,Z):(N.d(1),N=R(B),N&&(N.c(),N.m(l,d))),K===(K=G(B))&&Y?Y.p(B,Z):(Y.d(1),Y=K(B),Y&&(Y.c(),Y.m(f,null)));let se=u;u=P(B),u===se?j[u].p(B,Z):(Be(),de(j[se],1,1,()=>{j[se]=null}),Ve(),c=j[u],c?c.p(B,Z):(c=j[u]=M[u](B),c.c()),he(c,1),c.m(t,null));let oe=E;E=le(B),E===oe?O[E].p(B,Z):(Be(),de(O[oe],1,1,()=>{O[oe]=null}),Ve(),y=O[E],y?y.p(B,Z):(y=O[E]=W[E](B),y.c()),he(y,1),y.m(v,null))},i(B){k||(he(s),he(c),he(y),k=!0)},o(B){de(s),de(c),de(y),k=!1},d(B){B&&h(e),V[o].d(),J.d(),N.d(),Y.d(),j[u].d(),O[E].d()}}}function ir(i,e,t){let l,r;ke(i,qt,F=>t(15,l=F)),ke(i,Qe,F=>t(11,r=F));let o,s,n,a,d,f,p,u=-1,c,_,v,E,y;async function k(){if(l.params.id)if(a&&a.find(F=>F.id===Number(l.params.id)))t(0,o=a.find(F=>F.id===Number(l.params.id)));else{const F=await fetch(`${ye.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,o=(await F.json()).gravity)}else{const R=await(await fetch(`${ye.URL}/gravity/v3/${l.params.artist||""}`)).json();R.ongoing.length?t(0,o=R.ongoing[0]):R.upcoming.length?t(0,o=R.upcoming.at(-1)):t(0,o=R.past[0]),t(3,a=[...R.upcoming,...R.ongoing,...R.past].filter(N=>N.artist===o?.artist))}t(1,n=(await ye.artists()).find(F=>F.name===o?.artist)),I()}async function I(){t(6,u=-1);const F=o?.polls.sort((W,O)=>Date.parse(W.startDate)-Date.parse(O.startDate)),R=l.params.pollId||(o?.polls.find(W=>!W.finalized)||F?.at(-1))?.id,G=(await(await fetch(`${ye.URL}/gravity/v3/${o?.artist}/gravity/${o?.id}/polls/${R}`)).json()).pollDetail;t(4,d=new Xe(n.contracts.Governor,Ae.ABI.Governor,Ae.RPC)),t(5,f=G.pollIdOnChain||G.id),(await d.candidates(f)).toString().replaceAll("\b","")!==G.choices.map(W=>W.id).toString().replaceAll("\b","")&&t(5,f-=1);const Y=new Xe(n.contracts.Governor,Ae.ABI.Governor,new il(Ae.RPC)),[M,j,P]=await Promise.all([Y.polls(f),Y.totalVotes(f),Y.votesPerCandidates(f)]);t(7,c=Number(M.revealedVotes)),t(8,_=Number(j)),t(9,v=Number(me(M.totalVotedCOMO))),t(10,E=P),(Date.parse(G.endDate)>Date.now()||c<_)&&(window.clearInterval(p),t(6,u=Date.parse(G.endDate)-Date.now()),t(13,p=window.setInterval(async()=>{if(Date.parse(G.endDate)>Date.now()){t(6,u=Date.parse(G.endDate)-Date.now());const[W,O]=await Promise.all([Y.polls(f),Y.totalVotes(f)]);t(9,v=Number(me(W.totalVotedCOMO))),t(8,_=Number(O))}else if(_===c)window.clearInterval(p);else{t(6,u=-1);const[W,O]=await Promise.all([Y.polls(f),Y.votesPerCandidates(f)]);t(7,c=Number(W.revealedVotes)),t(10,E=O)}},1e3))),t(2,s=G)}function V(F,R){return s?.pollViewMetadata.choiceIdToSlotChoicesMapTable?.filter(N=>N.slotChoiceIds[F]===R).reduce((N,G)=>{const K=s?.pollViewMetadata.choiceIdToSlotChoicesMapTable?.indexOf(G);return N+Number(me(E[K]))},0)}kt(()=>window.clearInterval(p));function Q(F){n=F,t(1,n),t(15,l),t(14,y),t(13,p)}const q=(F,R,N)=>V(F,N.id)-V(F,R.id),U=(F,R)=>Number(E[s?.choices.indexOf(R)||0])-Number(E[s?.choices.indexOf(F)||0]);function J(F){a=F,t(3,a),t(15,l),t(14,y),t(1,n),t(13,p)}return i.$$.update=()=>{i.$$.dirty&57346&&(l.params!==y&&(!y||l.params.id!==y.id||l.params.artist!==y.artist?(n&&n.name!==l.params.artist&&t(1,n=t(3,a=void 0)),t(0,o=void 0),t(2,s=void 0),window.clearInterval(p),k()):l.params.pollId!==y.pollId&&(t(2,s=void 0),window.clearInterval(p),I())),t(14,y=l.params)),i.$$.dirty&3&&n&&o&&o.artist!==n.name&&jt(`/gravity/${n.name}`)},[o,n,s,a,d,f,u,c,_,v,E,r,V,p,y,l,Q,q,U,J]}class mr extends Ne{constructor(e){super(),Re(this,e,ir,rr,Ye,{})}}export{mr as component,_r as universal};
