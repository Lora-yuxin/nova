import{n as G,H as yt,i as Dt,s as be,c as me,o as kt,e as K,y as Bt,b as Et,d as wt}from"../chunks/scheduler.nSpB3e7h.js";import{J as Ct,d as c,K as St,S as Se,i as Fe,w as L,g as V,e as k,t as W,s as D,c as E,a as A,b as Q,f as B,u as m,h as p,j as N,v as ge,y as T,E as Ft,x as He,D as jt,o as se,A as we,n as re,B as Ae,q as At,k as Ve,l as Ie,m as ye,p as De,r as Ye,H as Ut,I as Yt}from"../chunks/index.EYyPxix3.js";import{q as Mt,r as Wt,A as Qt,s as Pt,u as Ue,b as Gt,$ as je,S as Me,C as ve,e as x,v as Qe,w as Pe,j as Ot,x as Ze,P as Ee}from"../chunks/apis.rP1ghAGS.js";import{g as Rt}from"../chunks/entry.xh3xlRbl.js";import{p as Nt}from"../chunks/stores.iBcDafYJ.js";import{A as Tt}from"../chunks/ArtistSelector.B512vCz4.js";import{g as We}from"../chunks/assets.Kq_R9HF9.js";import{f as fe}from"../chunks/units.XFe2sYSS.js";import{p as Lt}from"../chunks/polygonscan.3rzyozVp.js";const Vt=typeof window<"u";let Jt=Vt?()=>window.performance.now():()=>Date.now(),Ge=Vt?a=>requestAnimationFrame(a):G;const pe=new Set;function It(a){pe.forEach(e=>{e.c(a)||(pe.delete(e),e.f())}),pe.size!==0&&Ge(It)}function Ht(a){let e;return pe.size===0&&Ge(It),{promise:new Promise(t=>{pe.add(e={c:a,f:t})}),abort(){pe.delete(e)}}}const Be=new Map;let Ce=0;function Zt(a){let e=5381,t=a.length;for(;t--;)e=(e<<5)-e^a.charCodeAt(t);return e>>>0}function Xt(a,e){const t={stylesheet:St(e),rules:{}};return Be.set(a,t),t}function qt(a,e,t,l,i,r,s,o=0){const n=16.666/l;let u=`{
`;for(let I=0;I<=1;I+=n){const b=e+(t-e)*r(I);u+=I*100+`%{${s(b,1-b)}}
`}const f=u+`100% {${s(t,1-t)}}
}`,d=`__svelte_${Zt(f)}_${o}`,_=Ct(a),{stylesheet:h,rules:v}=Be.get(_)||Xt(_,a);v[d]||(v[d]=!0,h.insertRule(`@keyframes ${d} ${f}`,h.cssRules.length));const g=a.style.animation||"";return a.style.animation=`${g?`${g}, `:""}${d} ${l}ms linear ${i}ms 1 both`,Ce+=1,d}function Kt(a,e){const t=(a.style.animation||"").split(", "),l=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-l.length;i&&(a.style.animation=l.join(", "),Ce-=i,Ce||zt())}function zt(){Ge(()=>{Ce||(Be.forEach(a=>{const{ownerNode:e}=a.stylesheet;e&&c(e)}),Be.clear())})}function Oe(a,e,t,l){if(!e)return G;const i=a.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return G;const{delay:r=0,duration:s=300,easing:o=yt,start:n=Jt()+r,end:u=n+s,tick:f=G,css:d}=t(a,{from:e,to:i},l);let _=!0,h=!1,v;function g(){d&&(v=qt(a,0,1,s,r,o,d)),r||(h=!0)}function I(){d&&Kt(a,v),_=!1}return Ht(b=>{if(!h&&b>=n&&(h=!0),h&&b>=u&&(f(1,0),I()),!_)return!1;if(h){const w=b-n,y=0+1*o(w/s);f(y,1-y)}return!0}),g(),f(0,1),I}function Re(a){const e=getComputedStyle(a);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,i=a.getBoundingClientRect();a.style.position="absolute",a.style.width=t,a.style.height=l,$t(a,i)}}function $t(a,e){const t=a.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(a),i=l.transform==="none"?"":l.transform;a.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function xt({params:a}){return a}const si=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"})),el=Mt(Wt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var Xe=function(a,e,t,l){function i(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function o(f){try{u(l.next(f))}catch(d){s(d)}}function n(f){try{u(l.throw(f))}catch(d){s(d)}}function u(f){f.done?r(f.value):i(f.value).then(o,n)}u((l=l.apply(a,e||[])).next())})},ne=function(a,e,t,l,i){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?a!==e||!i:!e.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?i.call(a,t):i?i.value=t:e.set(a,t),t},te=function(a,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?a!==e||!l:!e.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(a):l?l.value:e.get(a)},de,ce,ie;class tl extends Qt{constructor(e){super(),de.set(this,void 0),ce.set(this,void 0),ie.set(this,void 0),this.subprovider=e,ne(this,de,[],"f"),ne(this,ce,10,"f"),ne(this,ie,null,"f")}get drainInterval(){return te(this,ce,"f")}set drainInterval(e){e<0&&(e=-1),e!==te(this,ce,"f")&&(ne(this,ce,e,"f"),te(this,ce,"f")>=0?(te(this,ie,"f")&&(clearTimeout(te(this,ie,"f")),ne(this,ie,null,"f")),te(this,de,"f").length&&ne(this,ie,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f")):te(this,ie,"f")&&(clearTimeout(te(this,ie,"f")),ne(this,ie,null,"f")))}queueCall(e,t){return te(this,ie,"f")==null&&te(this,ce,"f")>=0&&ne(this,ie,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f"),new Promise((l,i)=>{te(this,de,"f").push({request:{to:e,data:t},resolve:l,reject:i})})}drainCallQueue(){return Xe(this,void 0,void 0,function*(){ne(this,ie,null,"f");const e=te(this,de,"f");ne(this,de,[],"f");const t=Pt([el,Ue.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:o})=>[o.to,o.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:o})=>({to:o.to,data:o.data}))});const l=yield this.subprovider.call({data:t}),[i,r]=Ue.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:o},n)=>({to:o.to,data:o.data,status:r[n][0],result:r[n][1]}))});const s=[];for(let o=0;o<e.length;o++){const n=r[o],{resolve:u}=e[o];u({status:n[0],data:n[1]}),s.push({status:n[0],data:n[1]})}return s})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return Xe(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,i=t.data||"0x";Gt(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const r=yield this.queueCall(l,i);if(r.status)return r.data;throw Ue.getBuiltinCallException("call",{to:l,data:i},r.data)}return yield this.subprovider._perform(e)})}}de=new WeakMap,ce=new WeakMap,ie=new WeakMap;function ll(a){const e=a-1;return e*e*e+1}function Ne(a,{from:e,to:t},l={}){const i=getComputedStyle(a),r=i.transform==="none"?"":i.transform,[s,o]=i.transformOrigin.split(" ").map(parseFloat),n=e.left+e.width*s/t.width-(t.left+s),u=e.top+e.height*o/t.height-(t.top+o),{delay:f=0,duration:d=h=>Math.sqrt(h)*120,easing:_=ll}=l;return{delay:f,duration:Dt(d)?d(Math.sqrt(n*n+u*u)):d,easing:_,css:(h,v)=>{const g=v*n,I=v*u,b=h+v*e.width/t.width,w=h+v*e.height/t.height;return`transform: ${r} translate(${g}px, ${I}px) scale(${b}, ${w});`}}}function il(a,e,t){const l=a.slice();return l[18]=e[t],l[17]=t,l}function qe(a,e,t){const l=a.slice();l[14]=e[t],l[17]=t;const i=l[3].find(function(...s){return a[10](l[14],...s)});return l[15]=i,l}function sl(a){let e,t,l,i=a[4]("gravity.votes.title")+"",r,s,o,n=a[4]("gravity.votes.subtitle")+"",u,f;function d(v,g){return v[2].length?ol:al}let _=d(a),h=_(a);return{c(){e=k("div"),t=k("div"),l=k("b"),r=W(i),s=D(),o=k("p"),u=W(n),f=D(),h.c(),this.h()},l(v){e=E(v,"DIV",{class:!0});var g=A(e);t=E(g,"DIV",{class:!0});var I=A(t);l=E(I,"B",{});var b=A(l);r=Q(b,i),b.forEach(c),s=B(I),o=E(I,"P",{});var w=A(o);u=Q(w,n),w.forEach(c),I.forEach(c),f=B(g),h.l(g),g.forEach(c),this.h()},h(){m(t,"class","header svelte-1u8tnob"),m(e,"class","votes svelte-1u8tnob")},m(v,g){V(v,e,g),p(e,t),p(t,l),p(l,r),p(t,s),p(t,o),p(o,u),p(e,f),h.m(e,null)},p(v,g){g&16&&i!==(i=v[4]("gravity.votes.title")+"")&&N(r,i),g&16&&n!==(n=v[4]("gravity.votes.subtitle")+"")&&N(u,n),_===(_=d(v))&&h?h.p(v,g):(h.d(1),h=_(v),h&&(h.c(),h.m(e,null)))},d(v){v&&c(e),h.d()}}}function rl(a){let e,t,l=a[4]("gravity.votes.countdown")+"",i,r,s,o=String(Math.floor(a[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[1]%(60*1e3)/1e3)).padStart(2,"0"),n;return{c(){e=k("div"),t=k("p"),i=W(l),r=D(),s=k("h3"),n=W(o),this.h()},l(u){e=E(u,"DIV",{class:!0});var f=A(e);t=E(f,"P",{});var d=A(t);i=Q(d,l),d.forEach(c),r=B(f),s=E(f,"H3",{class:!0});var _=A(s);n=Q(_,o),_.forEach(c),f.forEach(c),this.h()},h(){m(s,"class","svelte-1u8tnob"),m(e,"class","countdown svelte-1u8tnob")},m(u,f){V(u,e,f),p(e,t),p(t,i),p(e,r),p(e,s),p(s,n)},p(u,f){f&16&&l!==(l=u[4]("gravity.votes.countdown")+"")&&N(i,l),f&2&&o!==(o=String(Math.floor(u[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*1e3)/1e3)).padStart(2,"0"))&&N(n,o)},d(u){u&&c(e)}}}function al(a){let e,t=x({length:50}),l=[];for(let i=0;i<t.length;i+=1)l[i]=nl(il(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p:G,d(i){i&&c(e),ge(l,i)}}}function ol(a){let e=[],t=new Map,l,i=x(a[2]);const r=s=>s[14].id;for(let s=0;s<i.length;s+=1){let o=qe(a,i,s),n=r(o);t.set(n,e[s]=Ke(n,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=L()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);l=L()},m(s,o){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,o);V(s,l,o)},p(s,o){if(o&61){i=x(s[2]);for(let n=0;n<e.length;n+=1)e[n].r();e=Qe(e,o,r,1,s,i,t,l.parentNode,Pe,Ke,l,qe);for(let n=0;n<e.length;n+=1)e[n].a()}},d(s){s&&c(l);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function nl(a){let e,t,l,i,r,s,o,n,u,f;return{c(){e=k("div"),t=k("div"),l=D(),i=k("div"),r=D(),s=k("div"),o=k("div"),n=D(),u=k("div"),f=D(),this.h()},l(d){e=E(d,"DIV",{class:!0});var _=A(e);t=E(_,"DIV",{class:!0}),A(t).forEach(c),l=B(_),i=E(_,"DIV",{class:!0}),A(i).forEach(c),r=B(_),s=E(_,"DIV",{class:!0});var h=A(s);o=E(h,"DIV",{class:!0}),A(o).forEach(c),n=B(h),u=E(h,"DIV",{class:!0}),A(u).forEach(c),h.forEach(c),f=B(_),_.forEach(c),this.h()},h(){m(t,"class","placeholder svelte-1u8tnob"),T(t,"width","110px"),T(t,"margin-right","auto"),m(i,"class","placeholder svelte-1u8tnob"),T(i,"width","60px"),m(o,"class","placeholder svelte-1u8tnob"),T(o,"width","40px"),m(u,"class","placeholder svelte-1u8tnob"),T(u,"width","110px"),m(s,"class","details svelte-1u8tnob"),m(e,"class","vote svelte-1u8tnob")},m(d,_){V(d,e,_),p(e,t),p(e,l),p(e,i),p(e,r),p(e,s),p(s,o),p(s,n),p(s,u),p(e,f)},p:G,d(d){d&&c(e)}}}function cl(a){let e,t=a[4]("gravity.votes.unrevealed")+"",l;return{c(){e=k("i"),l=W(t),this.h()},l(i){e=E(i,"I",{class:!0});var r=A(e);l=Q(r,t),r.forEach(c),this.h()},h(){m(e,"class","candidate svelte-1u8tnob")},m(i,r){V(i,e,r),p(e,l)},p(i,r){r&16&&t!==(t=i[4]("gravity.votes.unrevealed")+"")&&N(l,t)},d(i){i&&c(e)}}}function fl(a){let e,t,l,i,r=(a[0].choices[a[14].candidate].title||ze(a[0],a[14].candidate))+"",s;return{c(){e=k("p"),t=k("img"),i=D(),s=W(r),this.h()},l(o){e=E(o,"P",{class:!0});var n=A(e);t=E(n,"IMG",{src:!0,alt:!0,class:!0}),i=B(n),s=Q(n,r),n.forEach(c),this.h()},h(){K(t.src,l=a[0].choices[a[14].candidate].txImageUrl)||m(t,"src",l),m(t,"alt","Choice"),m(t,"class","svelte-1u8tnob"),m(e,"class","candidate svelte-1u8tnob")},m(o,n){V(o,e,n),p(e,t),p(e,i),p(e,s)},p(o,n){n&5&&!K(t.src,l=o[0].choices[o[14].candidate].txImageUrl)&&m(t,"src",l),n&5&&r!==(r=(o[0].choices[o[14].candidate].title||ze(o[0],o[14].candidate))+"")&&N(s,r)},d(o){o&&c(e)}}}function Ke(a,e){var z,R,ee;let t,l,i,r,s,o=(((z=e[15])==null?void 0:z.nickname)||((R=e[15])==null?void 0:R.address.slice(0,6))+"..."+((ee=e[15])==null?void 0:ee.address.slice(-4)))+"",n,u,f,d,_=Number(fe(e[14].amount)).toLocaleString("en-US")+"",h,v,g,I,b,w,y,C=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",j,H,U,q,S=G;function P(X,O){return X[14].candidate!==null?fl:cl}let Y=P(e),M=Y(e);return{key:a,first:null,c(){t=k("div"),l=k("a"),i=k("img"),s=D(),n=W(o),f=D(),d=k("p"),h=W(_),v=D(),g=k("img"),b=D(),w=k("div"),y=k("span"),j=W(C),H=D(),M.c(),U=D(),this.h()},l(X){t=E(X,"DIV",{class:!0});var O=A(t);l=E(O,"A",{href:!0,class:!0});var le=A(l);i=E(le,"IMG",{class:!0,src:!0,alt:!0}),s=B(le),n=Q(le,o),le.forEach(c),f=B(O),d=E(O,"P",{});var J=A(d);h=Q(J,_),J.forEach(c),v=B(O),g=E(O,"IMG",{src:!0,alt:!0,class:!0}),b=B(O),w=E(O,"DIV",{class:!0});var $=A(w);y=E($,"SPAN",{});var ue=A(y);j=Q(ue,C),ue.forEach(c),H=B($),M.l($),$.forEach(c),U=B(O),O.forEach(c),this.h()},h(){var X,O;m(i,"class","profileImage svelte-1u8tnob"),K(i.src,r="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||m(i,"src",r),m(i,"alt","User"),m(l,"href",u="/@"+(((X=e[15])==null?void 0:X.nickname)||((O=e[15])==null?void 0:O.address))),m(l,"class","svelte-1u8tnob"),K(g.src,I=e[5])||m(g,"src",I),m(g,"alt","COMO"),m(g,"class","svelte-1u8tnob"),m(w,"class","details svelte-1u8tnob"),m(t,"class","vote svelte-1u8tnob"),this.first=t},m(X,O){V(X,t,O),p(t,l),p(l,i),p(l,s),p(l,n),p(t,f),p(t,d),p(d,h),p(t,v),p(t,g),p(t,b),p(t,w),p(w,y),p(y,j),p(w,H),M.m(w,null),p(t,U)},p(X,O){var le,J,$,ue,ae;e=X,O&12&&o!==(o=(((le=e[15])==null?void 0:le.nickname)||((J=e[15])==null?void 0:J.address.slice(0,6))+"..."+(($=e[15])==null?void 0:$.address.slice(-4)))+"")&&N(n,o),O&12&&u!==(u="/@"+(((ue=e[15])==null?void 0:ue.nickname)||((ae=e[15])==null?void 0:ae.address)))&&m(l,"href",u),O&4&&_!==(_=Number(fe(e[14].amount)).toLocaleString("en-US")+"")&&N(h,_),O&4&&C!==(C=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&N(j,C),Y===(Y=P(e))&&M?M.p(e,O):(M.d(1),M=Y(e),M&&(M.c(),M.m(w,null)))},r(){q=t.getBoundingClientRect()},f(){Re(t),S()},a(){S(),S=Oe(t,q,Ne,{})},d(X){X&&c(t),M.d()}}}function ul(a){let e;function t(r,s){return r[1]>-1?rl:sl}let l=t(a),i=l(a);return{c(){i.c(),e=L()},l(r){i.l(r),e=L()},m(r,s){i.m(r,s),V(r,e,s)},p(r,[s]){l===(l=t(r))&&i?i.p(r,s):(i.d(1),i=l(r),i&&(i.c(),i.m(e.parentNode,e)))},i:G,o:G,d(r){r&&c(e),i.d(r)}}}function ze(a,e){const t=a.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((i,r)=>{var s,o;return`${i.name}: ${(o=(s=t.slotChoices)==null?void 0:s.find(n=>n.id===l.slotChoiceIds[r]))==null?void 0:o.alias}`}).join(", ")}return a.choices[e].id}function hl(a,e,t){let l;me(a,je,b=>t(4,l=b));let{voteStart:i}=e,{contract:r}=e,{poll:s}=e,{pollId:o}=e,{artist:n}=e,u=-1,f,d,_=[],h=[];const v=We(n).como;i>Date.now()?(f=window.setInterval(()=>{i>Date.now()?t(1,u=i-Date.now()):(g(),t(1,u=-1),window.clearInterval(f))},1e3),u=i-Date.now()):g();async function g(){const w=await(await fetch(Me.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    query {
                        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${r.toLowerCase()}", poll_eq: "${o}"}) {
                            ${Object.keys(Me.Vote).join(`
`)}
                        }
                    }
                `})})).json(),y=w.data.votes.filter(C=>!h.find(j=>j.address===C.from)).map(C=>C.from);if(y.length){const j=await(await fetch(`${ve.URL}/user/v1/by-address/${y.join(",")}`)).json();t(3,h=[...h,...j,...y.filter(H=>!j.find(U=>U.address===H)).map(H=>({nickname:"",address:H,profileImageUrl:""}))])}t(2,_=w.data.votes),(!_.length||_.filter(C=>C.candidate===null).length)&&(d=window.setTimeout(g,1e4))}kt(()=>{window.clearInterval(f),window.clearTimeout(d)});const I=(b,w)=>w.address===b.from;return a.$$set=b=>{"voteStart"in b&&t(6,i=b.voteStart),"contract"in b&&t(7,r=b.contract),"poll"in b&&t(0,s=b.poll),"pollId"in b&&t(8,o=b.pollId),"artist"in b&&t(9,n=b.artist)},[s,u,_,h,l,v,i,r,o,n,I]}class _l extends Se{constructor(e){super(),Fe(this,e,hl,ul,be,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function $e(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function xe(a){let e,t=x(a[4]),l=[];for(let i=0;i<t.length;i+=1)l[i]=et($e(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p(i,r){if(r&23){t=x(i[4]);let s;for(s=0;s<t.length;s+=1){const o=$e(i,t,s);l[s]?l[s].p(o,r):(l[s]=et(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),ge(l,i)}}}function et(a){let e,t,l=`${a[2]?a[10]/Math.max(...a[4])*100:10}%`;return{c(){e=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0,title:!0}),A(e).forEach(c),this.h()},h(){m(e,"class","bar svelte-11jci92"),m(e,"title",t=a[10].toLocaleString("en-US")+" COMO"),He(e,"active",a[2]&&a[0]/a[1]>a[12]/a[4].length),T(e,"height",l)},m(i,r){V(i,e,r)},p(i,r){r&16&&t!==(t=i[10].toLocaleString("en-US")+" COMO")&&m(e,"title",t),r&23&&He(e,"active",i[2]&&i[0]/i[1]>i[12]/i[4].length),r&20&&l!==(l=`${i[2]?i[10]/Math.max(...i[4])*100:10}%`)&&T(e,"height",l)},d(i){i&&c(e)}}}function dl(a){let e,t,l,i,r,s,o=`${a[0]/a[1]*100}%`,n,u,f,d=a[5]("gravity.totalvotes",{values:{votes:`${a[6](a[0])}/${a[6](a[1])}`}})+"",_,h,v=Math.round(a[0]/a[1]*100)+"",g,I,b=a[4]&&xe(a);return{c(){e=k("div"),t=k("div"),b&&b.c(),i=D(),r=k("div"),s=k("div"),n=D(),u=k("div"),f=k("p"),_=W(d),h=W(" ("),g=W(v),I=W("%)"),this.h()},l(w){e=E(w,"DIV",{class:!0});var y=A(e);t=E(y,"DIV",{class:!0});var C=A(t);b&&b.l(C),C.forEach(c),i=B(y),r=E(y,"DIV",{class:!0});var j=A(r);s=E(j,"DIV",{class:!0}),A(s).forEach(c),j.forEach(c),n=B(y),u=E(y,"DIV",{class:!0});var H=A(u);f=E(H,"P",{});var U=A(f);_=Q(U,d),h=Q(U," ("),g=Q(U,v),I=Q(U,"%)"),U.forEach(c),H.forEach(c),y.forEach(c),this.h()},h(){m(t,"class","bars svelte-11jci92"),Bt(()=>a[9].call(t)),m(s,"class","progress svelte-11jci92"),T(s,"width",o),m(r,"class","progressBar svelte-11jci92"),m(u,"class","text svelte-11jci92"),m(e,"class","graph svelte-11jci92")},m(w,y){V(w,e,y),p(e,t),b&&b.m(t,null),l=Ft(t,a[9].bind(t)),p(e,i),p(e,r),p(r,s),p(e,n),p(e,u),p(u,f),p(f,_),p(f,h),p(f,g),p(f,I)},p(w,[y]){w[4]?b?b.p(w,y):(b=xe(w),b.c(),b.m(t,null)):b&&(b.d(1),b=null),y&3&&o!==(o=`${w[0]/w[1]*100}%`)&&T(s,"width",o),y&99&&d!==(d=w[5]("gravity.totalvotes",{values:{votes:`${w[6](w[0])}/${w[6](w[1])}`}})+"")&&N(_,d),y&3&&v!==(v=Math.round(w[0]/w[1]*100)+"")&&N(g,v)},i:G,o:G,d(w){w&&c(e),b&&b.d(),l()}}}function vl(a,e,t){let l,i;me(a,je,h=>t(5,l=h)),me(a,Ot,h=>t(6,i=h));let{contract:r}=e,{poll:s}=e,{revealedVotes:o}=e,{totalVotes:n}=e,u;fetch(Me.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(limit: 99999, orderBy: timestamp_ASC, where: {contract_eq: "${r}", poll_eq: "${s}"}) {
                        amount
                    }
                }
            `})}).then(async h=>{const v=await h.json();t(2,u=v.data.votes.map(g=>Number(fe(g.amount))))});let f,d;function _(){f=this.clientWidth,t(3,f)}return a.$$set=h=>{"contract"in h&&t(7,r=h.contract),"poll"in h&&t(8,s=h.poll),"revealedVotes"in h&&t(0,o=h.revealedVotes),"totalVotes"in h&&t(1,n=h.totalVotes)},a.$$.update=()=>{if(a.$$.dirty&12&&f)if(u){let h=[...u],v=[];for(let g=(f-10)/20;g>0;g--)v.push(h.splice(0,Math.ceil(h.length/g)).reduce((I,b)=>I+b,0));t(4,d=v)}else t(4,d=Array(Math.floor((f-10)/20)).fill(0))},[o,n,u,f,d,l,i,r,s,_]}class pl extends Se{constructor(e){super(),Fe(this,e,vl,dl,be,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function ml(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function tt(a,e,t){const l=a.slice();return l[4]=e[t],l}function lt(a,e,t){const l=a.slice();return l[7]=e[t],l}function gl(a){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),A(e).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-utm5ay"),T(e,"Width","80px")},m(t,l){V(t,e,l)},p:G,d(t){t&&c(e)}}}function bl(a){let e,t=a[1]("gravity.history.subtitle",{values:{count:a[0].length}})+"",l;return{c(){e=k("p"),l=W(t)},l(i){e=E(i,"P",{});var r=A(e);l=Q(r,t),r.forEach(c)},m(i,r){V(i,e,r),p(e,l)},p(i,r){r&3&&t!==(t=i[1]("gravity.history.subtitle",{values:{count:i[0].length}})+"")&&N(l,t)},d(i){i&&c(e)}}}function kl(a){let e,t=x({length:5}),l=[];for(let i=0;i<t.length;i+=1)l[i]=wl(ml(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p:G,d(i){i&&c(e),ge(l,i)}}}function El(a){let e,t=x(a[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=rt(tt(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p(i,r){if(r&1){t=x(i[0]);let s;for(s=0;s<t.length;s+=1){const o=tt(i,t,s);l[s]?l[s].p(o,r):(l[s]=rt(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),ge(l,i)}}}function wl(a){let e,t,l,i,r,s;return{c(){e=k("div"),t=k("div"),l=D(),i=k("div"),r=D(),s=k("hr"),this.h()},l(o){e=E(o,"DIV",{class:!0});var n=A(e);t=E(n,"DIV",{class:!0}),A(t).forEach(c),l=B(n),i=E(n,"DIV",{class:!0}),A(i).forEach(c),n.forEach(c),r=B(o),s=E(o,"HR",{}),this.h()},h(){m(t,"class","placeholder imgPlaceholder svelte-utm5ay"),m(i,"class","placeholder svelte-utm5ay"),T(i,"width","calc(100% - 60px)"),m(e,"class","gravity svelte-utm5ay")},m(o,n){V(o,e,n),p(e,t),p(e,l),p(e,i),V(o,r,n),V(o,s,n)},p:G,d(o){o&&(c(e),c(r),c(s))}}}function Al(a){let e,t=a[4].title+"",l,i;return{c(){e=k("a"),l=W(t),this.h()},l(r){e=E(r,"A",{class:!0,href:!0});var s=A(e);l=Q(s,t),s.forEach(c),this.h()},h(){m(e,"class","title svelte-utm5ay"),m(e,"href",i="/gravity/"+a[4].artist+"/"+a[4].id)},m(r,s){V(r,e,s),p(e,l)},p(r,s){s&1&&t!==(t=r[4].title+"")&&N(l,t),s&1&&i!==(i="/gravity/"+r[4].artist+"/"+r[4].id)&&m(e,"href",i)},d(r){r&&c(e)}}}function Vl(a){let e,t=a[4].title+"",l;return{c(){e=k("p"),l=W(t)},l(i){e=E(i,"P",{});var r=A(e);l=Q(r,t),r.forEach(c)},m(i,r){V(i,e,r),p(e,l)},p(i,r){r&1&&t!==(t=i[4].title+"")&&N(l,t)},d(i){i&&c(e)}}}function it(a){let e,t=x(a[4].polls.sort(a[3])),l=[];for(let i=0;i<t.length;i+=1)l[i]=st(lt(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p(i,r){if(r&1){t=x(i[4].polls.sort(i[3]));let s;for(s=0;s<t.length;s+=1){const o=lt(i,t,s);l[s]?l[s].p(o,r):(l[s]=st(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),ge(l,i)}}}function st(a){let e,t,l=a[7].title+"",i,r,s,o,n=new Date(a[7].startDate).toLocaleDateString()+"",u,f;return{c(){e=k("div"),t=k("a"),i=W(l),s=D(),o=k("p"),u=W(n),f=D(),this.h()},l(d){e=E(d,"DIV",{class:!0});var _=A(e);t=E(_,"A",{href:!0,class:!0});var h=A(t);i=Q(h,l),h.forEach(c),s=B(_),o=E(_,"P",{});var v=A(o);u=Q(v,n),v.forEach(c),f=B(_),_.forEach(c),this.h()},h(){m(t,"href",r="/gravity/"+a[4].artist+"/"+a[4].id+"/"+a[7].id),m(t,"class","svelte-utm5ay"),m(e,"class","poll svelte-utm5ay")},m(d,_){V(d,e,_),p(e,t),p(t,i),p(e,s),p(e,o),p(o,u),p(e,f)},p(d,_){_&1&&l!==(l=d[7].title+"")&&N(i,l),_&1&&r!==(r="/gravity/"+d[4].artist+"/"+d[4].id+"/"+d[7].id)&&m(t,"href",r),_&1&&n!==(n=new Date(d[7].startDate).toLocaleDateString()+"")&&N(u,n)},d(d){d&&c(e)}}}function rt(a){let e,t,l,i,r,s,o,n;function u(h,v){return h[4].polls.length>1?Vl:Al}let f=u(a),d=f(a),_=a[4].polls.length>1&&it(a);return{c(){e=k("div"),t=k("img"),r=D(),d.c(),s=D(),_&&_.c(),o=D(),n=k("hr"),this.h()},l(h){e=E(h,"DIV",{class:!0});var v=A(e);t=E(v,"IMG",{src:!0,alt:!0,class:!0}),r=B(v),d.l(v),v.forEach(c),s=B(h),_&&_.l(h),o=B(h),n=E(h,"HR",{}),this.h()},h(){K(t.src,l=a[4].bannerImageUrl)||m(t,"src",l),m(t,"alt",i=a[4].title),m(t,"class","svelte-utm5ay"),m(e,"class","gravity svelte-utm5ay")},m(h,v){V(h,e,v),p(e,t),p(e,r),d.m(e,null),V(h,s,v),_&&_.m(h,v),V(h,o,v),V(h,n,v)},p(h,v){v&1&&!K(t.src,l=h[4].bannerImageUrl)&&m(t,"src",l),v&1&&i!==(i=h[4].title)&&m(t,"alt",i),f===(f=u(h))&&d?d.p(h,v):(d.d(1),d=f(h),d&&(d.c(),d.m(e,null))),h[4].polls.length>1?_?_.p(h,v):(_=it(h),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},d(h){h&&(c(e),c(s),c(o),c(n)),d.d(),_&&_.d(h)}}}function Il(a){let e,t,l,i=a[1]("gravity.history.title")+"",r,s,o;function n(v,g){return v[0]?bl:gl}let u=n(a),f=u(a);function d(v,g){return v[0]?El:kl}let _=d(a),h=_(a);return{c(){e=k("div"),t=k("div"),l=k("b"),r=W(i),s=D(),f.c(),o=D(),h.c(),this.h()},l(v){e=E(v,"DIV",{class:!0});var g=A(e);t=E(g,"DIV",{class:!0});var I=A(t);l=E(I,"B",{});var b=A(l);r=Q(b,i),b.forEach(c),s=B(I),f.l(I),I.forEach(c),o=B(g),h.l(g),g.forEach(c),this.h()},h(){m(t,"class","header svelte-utm5ay"),m(e,"class","history svelte-utm5ay")},m(v,g){V(v,e,g),p(e,t),p(t,l),p(l,r),p(t,s),f.m(t,null),p(e,o),h.m(e,null)},p(v,[g]){g&2&&i!==(i=v[1]("gravity.history.title")+"")&&N(r,i),u===(u=n(v))&&f?f.p(v,g):(f.d(1),f=u(v),f&&(f.c(),f.m(t,null))),_===(_=d(v))&&h?h.p(v,g):(h.d(1),h=_(v),h&&(h.c(),h.m(e,null)))},i:G,o:G,d(v){v&&c(e),f.d(),h.d()}}}function yl(a,e,t){let l;me(a,je,o=>t(1,l=o));let{artist:i}=e,{gravities:r=void 0}=e;r||fetch(`${ve.URL}/gravity/v3/${i.name}`).then(async o=>{const n=await o.json();t(0,r=[...n.upcoming,...n.ongoing,...n.past])});const s=(o,n)=>Date.parse(o.startDate)-Date.parse(n.startDate);return a.$$set=o=>{"artist"in o&&t(2,i=o.artist),"gravities"in o&&t(0,r=o.gravities)},[r,l,i,s]}class Dl extends Se{constructor(e){super(),Fe(this,e,yl,Il,be,{artist:2,gravities:0})}}function at(a,e,t){const l=a.slice();l[25]=e[t];const i=Math.round(Number(fe(l[11][l[3].choices.indexOf(l[25])]))/l[10]*100);return l[26]=i,l}function ot(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function nt(a,e,t){const l=a.slice();l[25]=e[t];const i=Math.round(l[13](l[24],l[25].id)/l[11].reduce((r,s)=>r+Number(fe(s)),0)*100);return l[26]=i,l}function ct(a){let e=a[2].route,t,l=ft(a);return{c(){l.c(),t=L()},l(i){l.l(i),t=L()},m(i,r){l.m(i,r),V(i,t,r)},p(i,r){r&4&&be(e,e=i[2].route)?(l.d(1),l=ft(i),l.c(),l.m(t.parentNode,t)):l.p(i,r)},d(i){i&&c(t),l.d(i)}}}function ft(a){let e;return document.title=e="Nova | "+a[0].title.replaceAll(`
`," "),{c:G,l:G,m:G,p(t,l){l&1&&e!==(e="Nova | "+t[0].title.replaceAll(`
`," "))&&(document.title=e)},d:G}}function Bl(a){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),A(e).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-13jvfbi"),T(e,"width","85px")},m(t,l){V(t,e,l)},p:G,i:G,o:G,d(t){t&&c(e)}}}function Cl(a){let e,t,l;function i(s){a[16](s)}let r={};return a[1]!==void 0&&(r.selected=a[1]),e=new Tt({props:r}),Et.push(()=>At(e,"selected",i)),{c(){Ve(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,o){ye(e,s,o),l=!0},p(s,o){const n={};!t&&o&2&&(t=!0,n.selected=s[1],wt(()=>t=!1)),e.$set(n)},i(s){l||(re(e.$$.fragment,s),l=!0)},o(s){se(e.$$.fragment,s),l=!1},d(s){De(e,s)}}}function Sl(a){let e,t,l;return{c(){e=k("div"),t=D(),l=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0}),A(e).forEach(c),t=B(i),l=E(i,"DIV",{class:!0}),A(l).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-13jvfbi"),T(e,"width","50px"),m(l,"class","placeholder svelte-13jvfbi"),T(l,"margin-left","auto"),T(l,"width","135px")},m(i,r){V(i,e,r),V(i,t,r),V(i,l,r)},p:G,d(i){i&&(c(e),c(t),c(l))}}}function Fl(a){let e,t,l,i,r,s,o,n,u;function f(h,v){if(h[0].type==="event-gravity")return Yl;if(h[0].type==="grand-gravity")return Ul;if(h[0].type==="solo-gravity")return jl}let d=f(a),_=d&&d(a);return{c(){e=k("div"),_&&_.c(),l=D(),i=k("a"),r=k("img"),o=W(`
                        PolygonScan`),this.h()},l(h){e=E(h,"DIV",{class:!0});var v=A(e);_&&_.l(v),v.forEach(c),l=B(h),i=E(h,"A",{class:!0,href:!0,title:!0});var g=A(i);r=E(g,"IMG",{src:!0,alt:!0,class:!0}),o=Q(g,`
                        PolygonScan`),g.forEach(c),this.h()},h(){m(e,"class",t="gravityType "+a[0].type+" svelte-13jvfbi"),K(r.src,s=Lt)||m(r,"src",s),m(r,"alt","PolygonScan"),m(r,"class","svelte-13jvfbi"),m(i,"class","polygonscan svelte-13jvfbi"),m(i,"href",n=a[0].contractOutlink),m(i,"title",u="Poll ID: "+a[6])},m(h,v){V(h,e,v),_&&_.m(e,null),V(h,l,v),V(h,i,v),p(i,r),p(i,o)},p(h,v){d!==(d=f(h))&&(_&&_.d(1),_=d&&d(h),_&&(_.c(),_.m(e,null))),v&1&&t!==(t="gravityType "+h[0].type+" svelte-13jvfbi")&&m(e,"class",t),v&1&&n!==(n=h[0].contractOutlink)&&m(i,"href",n),v&64&&u!==(u="Poll ID: "+h[6])&&m(i,"title",u)},d(h){h&&(c(e),c(l),c(i)),_&&_.d()}}}function jl(a){let e;return{c(){e=W("Solo")},l(t){e=Q(t,"Solo")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Ul(a){let e;return{c(){e=W("Grand")},l(t){e=Q(t,"Grand")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Yl(a){let e;return{c(){e=W("Event")},l(t){e=Q(t,"Event")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Ml(a){let e,t='<div class="placeholder svelte-13jvfbi"></div> <div class="placeholder svelte-13jvfbi"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Ye(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){m(e,"class","titlePlaceholder svelte-13jvfbi")},m(l,i){V(l,e,i)},p:G,d(l){l&&c(e)}}}function Wl(a){let e,t,l=a[0].title.replaceAll(`
`,a[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=k("h1"),t=new Ut(!1),this.h()},l(i){e=E(i,"H1",{class:!0});var r=A(e);t=Yt(r,!1),r.forEach(c),this.h()},h(){t.a=null,m(e,"class","svelte-13jvfbi")},m(i,r){V(i,e,r),t.m(l,e)},p(i,r){r&1&&l!==(l=i[0].title.replaceAll(`
`,i[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(i){i&&c(e)}}}function Ql(a){let e,t,l,i,r;return{c(){e=k("div"),t=D(),l=k("div"),i=D(),r=k("div"),this.h()},l(s){e=E(s,"DIV",{class:!0}),A(e).forEach(c),t=B(s),l=E(s,"DIV",{class:!0}),A(l).forEach(c),i=B(s),r=E(s,"DIV",{class:!0}),A(r).forEach(c),this.h()},h(){m(e,"class","placeholder svelte-13jvfbi"),T(e,"width","50px"),m(l,"class","placeholder svelte-13jvfbi"),T(l,"width","150px"),m(r,"class","placeholder svelte-13jvfbi"),T(r,"margin-left","auto"),T(r,"width","65px")},m(s,o){V(s,e,o),V(s,t,o),V(s,l,o),V(s,i,o),V(s,r,o)},p:G,d(s){s&&(c(e),c(t),c(l),c(i),c(r))}}}function Pl(a){let e,t,l=new Date(a[3].startDate).toLocaleDateString()+"",i,r,s,o=a[0].polls.length>1&&ut(a),n=(a[7]>-1||a[8]<a[9])&&ht();return{c(){o&&o.c(),e=D(),t=k("p"),i=W(l),r=D(),n&&n.c(),s=L(),this.h()},l(u){o&&o.l(u),e=B(u),t=E(u,"P",{class:!0});var f=A(t);i=Q(f,l),f.forEach(c),r=B(u),n&&n.l(u),s=L(),this.h()},h(){m(t,"class","svelte-13jvfbi")},m(u,f){o&&o.m(u,f),V(u,e,f),V(u,t,f),p(t,i),V(u,r,f),n&&n.m(u,f),V(u,s,f)},p(u,f){u[0].polls.length>1?o?o.p(u,f):(o=ut(u),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f&8&&l!==(l=new Date(u[3].startDate).toLocaleDateString()+"")&&N(i,l),u[7]>-1||u[8]<u[9]?n||(n=ht(),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(u){u&&(c(e),c(t),c(r),c(s)),o&&o.d(u),n&&n.d(u)}}}function ut(a){let e,t=a[3].title+"",l;return{c(){e=k("p"),l=W(t),this.h()},l(i){e=E(i,"P",{class:!0});var r=A(e);l=Q(r,t),r.forEach(c),this.h()},h(){m(e,"class","svelte-13jvfbi")},m(i,r){V(i,e,r),p(e,l)},p(i,r){r&8&&t!==(t=i[3].title+"")&&N(l,t)},d(i){i&&c(e)}}}function ht(a){let e,t='<div class="dot"></div>',l,i,r="LIVE";return{c(){e=k("div"),e.innerHTML=t,l=D(),i=k("p"),i.textContent=r,this.h()},l(s){e=E(s,"DIV",{class:!0,"data-svelte-h":!0}),Ye(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=B(s),i=E(s,"P",{class:!0,"data-svelte-h":!0}),Ye(i)!=="svelte-1k24nxm"&&(i.textContent=r),this.h()},h(){m(e,"class","liveIndicator svelte-13jvfbi"),m(i,"class","svelte-13jvfbi")},m(s,o){V(s,e,o),V(s,l,o),V(s,i,o)},d(s){s&&(c(e),c(l),c(i))}}}function Gl(a){let e,t,l;return{c(){e=k("div"),t=D(),l=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0}),A(e).forEach(c),t=B(i),l=E(i,"DIV",{class:!0}),A(l).forEach(c),this.h()},h(){m(e,"class","itemPlaceholder svelte-13jvfbi"),T(e,"height","250px"),m(l,"class","itemPlaceholder svelte-13jvfbi"),T(l,"height","350px")},m(i,r){V(i,e,r),V(i,t,r),V(i,l,r)},p:G,i:G,o:G,d(i){i&&(c(e),c(t),c(l))}}}function Ol(a){let e,t,l,i;const r=[Nl,Rl],s=[];function o(n,u){return n[7]>-1?0:1}return e=o(a),t=s[e]=r[e](a),{c(){t.c(),l=L()},l(n){t.l(n),l=L()},m(n,u){s[e].m(n,u),V(n,l,u),i=!0},p(n,u){let f=e;e=o(n),e===f?s[e].p(n,u):(Ae(),se(s[f],1,1,()=>{s[f]=null}),we(),t=s[e],t?t.p(n,u):(t=s[e]=r[e](n),t.c()),re(t,1),t.m(l.parentNode,l))},i(n){i||(re(t),i=!0)},o(n){se(t),i=!1},d(n){n&&c(l),s[e].d(n)}}}function Rl(a){let e,t,l,i;e=new pl({props:{contract:a[5].target.toString().toLowerCase(),poll:a[6],revealedVotes:a[8],totalVotes:a[9]}});function r(n,u){return n[3].pollViewMetadata.slots&&n[3].pollViewMetadata.slotChoices?Ll:Tl}let s=r(a),o=s(a);return{c(){Ve(e.$$.fragment),t=D(),l=k("div"),o.c(),this.h()},l(n){Ie(e.$$.fragment,n),t=B(n),l=E(n,"DIV",{class:!0});var u=A(l);o.l(u),u.forEach(c),this.h()},h(){m(l,"class","item polls svelte-13jvfbi")},m(n,u){ye(e,n,u),V(n,t,u),V(n,l,u),o.m(l,null),i=!0},p(n,u){const f={};u&32&&(f.contract=n[5].target.toString().toLowerCase()),u&64&&(f.poll=n[6]),u&256&&(f.revealedVotes=n[8]),u&512&&(f.totalVotes=n[9]),e.$set(f),s===(s=r(n))&&o?o.p(n,u):(o.d(1),o=s(n),o&&(o.c(),o.m(l,null)))},i(n){i||(re(e.$$.fragment,n),i=!0)},o(n){se(e.$$.fragment,n),i=!1},d(n){n&&(c(t),c(l)),De(e,n),o.d()}}}function Nl(a){let e,t,l,i=a[12]("gravity.counting_countdown")+"",r,s,o,n=String(Math.floor(a[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(a[7]%(60*1e3)/1e3)).padStart(2,"0"),u,f=a[0]&&a[0].bannerImageUrl&&gt(a);return{c(){e=k("div"),f&&f.c(),t=D(),l=k("p"),r=W(i),s=D(),o=k("h3"),u=W(n),this.h()},l(d){e=E(d,"DIV",{class:!0});var _=A(e);f&&f.l(_),t=B(_),l=E(_,"P",{});var h=A(l);r=Q(h,i),h.forEach(c),s=B(_),o=E(_,"H3",{class:!0});var v=A(o);u=Q(v,n),v.forEach(c),_.forEach(c),this.h()},h(){m(o,"class","svelte-13jvfbi"),m(e,"class","item countdown svelte-13jvfbi")},m(d,_){V(d,e,_),f&&f.m(e,null),p(e,t),p(e,l),p(l,r),p(e,s),p(e,o),p(o,u)},p(d,_){d[0]&&d[0].bannerImageUrl?f?f.p(d,_):(f=gt(d),f.c(),f.m(e,t)):f&&(f.d(1),f=null),_&4096&&i!==(i=d[12]("gravity.counting_countdown")+"")&&N(r,i),_&128&&n!==(n=String(Math.floor(d[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(d[7]%(60*1e3)/1e3)).padStart(2,"0"))&&N(u,n)},i:G,o:G,d(d){d&&c(e),f&&f.d()}}}function Tl(a){let e,t=[],l=new Map,i=x([...a[3].choices].sort(a[18]));const r=s=>s[25];for(let s=0;s<i.length;s+=1){let o=at(a,i,s),n=r(o);l.set(n,t[s]=_t(n,o))}return{c(){e=k("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=E(s,"DIV",{class:!0});var o=A(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(c),this.h()},h(){m(e,"class","slot svelte-13jvfbi")},m(s,o){V(s,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(s,o){if(o&3080){i=x([...s[3].choices].sort(s[18]));for(let n=0;n<t.length;n+=1)t[n].r();t=Qe(t,o,r,1,s,i,l,e,Pe,_t,null,at);for(let n=0;n<t.length;n+=1)t[n].a()}},d(s){s&&c(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Ll(a){let e,t=x(a[3].pollViewMetadata.slots),l=[];for(let i=0;i<t.length;i+=1)l[i]=mt(ot(a,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=L()},l(i){for(let r=0;r<l.length;r+=1)l[r].l(i);e=L()},m(i,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,r);V(i,e,r)},p(i,r){if(r&10248){t=x(i[3].pollViewMetadata.slots);let s;for(s=0;s<t.length;s+=1){const o=ot(i,t,s);l[s]?l[s].p(o,r):(l[s]=mt(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),ge(l,i)}}}function _t(a,e){let t,l,i,r,s,o,n,u=e[25].title+"",f,d,_,h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"",v,g,I=e[26]+"",b,w,y,C,j,H=`${e[26]}%`,U,q,S=G;return{key:a,first:null,c(){t=k("div"),l=k("div"),i=k("img"),o=D(),n=k("p"),f=W(u),d=D(),_=k("p"),v=W(h),g=W(" COMO ("),b=W(I),w=W("%)"),y=D(),C=k("div"),j=k("div"),U=D(),this.h()},l(P){t=E(P,"DIV",{class:!0});var Y=A(t);l=E(Y,"DIV",{class:!0});var M=A(l);i=E(M,"IMG",{src:!0,alt:!0,class:!0}),o=B(M),n=E(M,"P",{class:!0});var z=A(n);f=Q(z,u),z.forEach(c),d=B(M),_=E(M,"P",{});var R=A(_);v=Q(R,h),g=Q(R," COMO ("),b=Q(R,I),w=Q(R,"%)"),R.forEach(c),M.forEach(c),y=B(Y),C=E(Y,"DIV",{class:!0});var ee=A(C);j=E(ee,"DIV",{class:!0}),A(j).forEach(c),ee.forEach(c),U=B(Y),Y.forEach(c),this.h()},h(){K(i.src,r=e[25].txImageUrl)||m(i,"src",r),m(i,"alt",s=e[25].title),m(i,"class","svelte-13jvfbi"),m(n,"class","name svelte-13jvfbi"),m(l,"class","choiceTitle svelte-13jvfbi"),m(j,"class","progress svelte-13jvfbi"),T(j,"width",H),m(C,"class","choiceBar svelte-13jvfbi"),m(t,"class","choice svelte-13jvfbi"),this.first=t},m(P,Y){V(P,t,Y),p(t,l),p(l,i),p(l,o),p(l,n),p(n,f),p(l,d),p(l,_),p(_,v),p(_,g),p(_,b),p(_,w),p(t,y),p(t,C),p(C,j),p(t,U)},p(P,Y){e=P,Y&2056&&!K(i.src,r=e[25].txImageUrl)&&m(i,"src",r),Y&2056&&s!==(s=e[25].title)&&m(i,"alt",s),Y&2056&&u!==(u=e[25].title+"")&&N(f,u),Y&2056&&h!==(h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&N(v,h),Y&3080&&I!==(I=e[26]+"")&&N(b,I),Y&3080&&H!==(H=`${e[26]}%`)&&T(j,"width",H)},r(){q=t.getBoundingClientRect()},f(){Re(t),S()},a(){S(),S=Oe(t,q,Ne,{})},d(P){P&&c(t)}}}function dt(a){let e,t,l;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=a[25].roundImageUrl)||m(e,"src",t),m(e,"alt",l=a[25].name),m(e,"class","svelte-13jvfbi")},m(i,r){V(i,e,r)},p(i,r){r&8&&!K(e.src,t=i[25].roundImageUrl)&&m(e,"src",t),r&8&&l!==(l=i[25].name)&&m(e,"alt",l)},d(i){i&&c(e)}}}function vt(a,e){let t,l,i,r,s=e[25].name+"",o,n,u,f=e[13](e[24],e[25].id).toLocaleString("en-US")+"",d,_,h=e[26]+"",v,g,I,b,w,y=`${e[26]}%`,C,j,H=G,U=e[25].roundImageUrl&&dt(e);return{key:a,first:null,c(){t=k("div"),l=k("div"),U&&U.c(),i=D(),r=k("p"),o=W(s),n=D(),u=k("p"),d=W(f),_=W(" COMO ("),v=W(h),g=W("%)"),I=D(),b=k("div"),w=k("div"),C=D(),this.h()},l(q){t=E(q,"DIV",{class:!0});var S=A(t);l=E(S,"DIV",{class:!0});var P=A(l);U&&U.l(P),i=B(P),r=E(P,"P",{class:!0});var Y=A(r);o=Q(Y,s),Y.forEach(c),n=B(P),u=E(P,"P",{});var M=A(u);d=Q(M,f),_=Q(M," COMO ("),v=Q(M,h),g=Q(M,"%)"),M.forEach(c),P.forEach(c),I=B(S),b=E(S,"DIV",{class:!0});var z=A(b);w=E(z,"DIV",{class:!0}),A(w).forEach(c),z.forEach(c),C=B(S),S.forEach(c),this.h()},h(){m(r,"class","name svelte-13jvfbi"),m(l,"class","choiceTitle svelte-13jvfbi"),m(w,"class","progress svelte-13jvfbi"),T(w,"width",y),m(b,"class","choiceBar svelte-13jvfbi"),m(t,"class","choice svelte-13jvfbi"),this.first=t},m(q,S){V(q,t,S),p(t,l),U&&U.m(l,null),p(l,i),p(l,r),p(r,o),p(l,n),p(l,u),p(u,d),p(u,_),p(u,v),p(u,g),p(t,I),p(t,b),p(b,w),p(t,C)},p(q,S){e=q,e[25].roundImageUrl?U?U.p(e,S):(U=dt(e),U.c(),U.m(l,i)):U&&(U.d(1),U=null),S&8&&s!==(s=e[25].name+"")&&N(o,s),S&8&&f!==(f=e[13](e[24],e[25].id).toLocaleString("en-US")+"")&&N(d,f),S&2056&&h!==(h=e[26]+"")&&N(v,h),S&2056&&y!==(y=`${e[26]}%`)&&T(w,"width",y)},r(){j=t.getBoundingClientRect()},f(){Re(t),H()},a(){H(),H=Oe(t,j,Ne,{})},d(q){q&&c(t),U&&U.d()}}}function pt(a){let e;return{c(){e=k("hr")},l(t){e=E(t,"HR",{})},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function mt(a){let e,t,l,i,r,s,o=a[22].name+"",n,u,f=[],d=new Map,_,h;function v(...w){return a[17](a[24],...w)}let g=x(a[3].pollViewMetadata.slotChoices.sort(v));const I=w=>w[25];for(let w=0;w<g.length;w+=1){let y=nt(a,g,w),C=I(y);d.set(C,f[w]=vt(C,y))}let b=a[24]<a[3].pollViewMetadata.slots.length-1&&pt();return{c(){e=k("div"),t=k("p"),l=k("img"),s=D(),n=W(o),u=D();for(let w=0;w<f.length;w+=1)f[w].c();_=D(),b&&b.c(),h=L(),this.h()},l(w){e=E(w,"DIV",{class:!0});var y=A(e);t=E(y,"P",{class:!0});var C=A(t);l=E(C,"IMG",{src:!0,alt:!0,class:!0}),s=B(C),n=Q(C,o),C.forEach(c),u=B(y);for(let j=0;j<f.length;j+=1)f[j].l(y);y.forEach(c),_=B(w),b&&b.l(w),h=L(),this.h()},h(){K(l.src,i=a[22].backgroundImageUrl)||m(l,"src",i),m(l,"alt",r=a[22].name),m(l,"class","svelte-13jvfbi"),m(t,"class","slotTitle svelte-13jvfbi"),m(e,"class","slot svelte-13jvfbi")},m(w,y){V(w,e,y),p(e,t),p(t,l),p(t,s),p(t,n),p(e,u);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(e,null);V(w,_,y),b&&b.m(w,y),V(w,h,y)},p(w,y){if(a=w,y&8&&!K(l.src,i=a[22].backgroundImageUrl)&&m(l,"src",i),y&8&&r!==(r=a[22].name)&&m(l,"alt",r),y&8&&o!==(o=a[22].name+"")&&N(n,o),y&10248){g=x(a[3].pollViewMetadata.slotChoices.sort(v));for(let C=0;C<f.length;C+=1)f[C].r();f=Qe(f,y,I,1,a,g,d,e,Pe,vt,null,nt);for(let C=0;C<f.length;C+=1)f[C].a()}a[24]<a[3].pollViewMetadata.slots.length-1?b||(b=pt(),b.c(),b.m(h.parentNode,h)):b&&(b.d(1),b=null)},d(w){w&&(c(e),c(_),c(h));for(let y=0;y<f.length;y+=1)f[y].d();b&&b.d(w)}}}function gt(a){let e,t,l;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=a[0].bannerImageUrl)||m(e,"src",t),m(e,"alt",l=a[0].title),m(e,"class","svelte-13jvfbi")},m(i,r){V(i,e,r)},p(i,r){r&1&&!K(e.src,t=i[0].bannerImageUrl)&&m(e,"src",t),r&1&&l!==(l=i[0].title)&&m(e,"alt",l)},d(i){i&&c(e)}}}function Jl(a){let e,t,l,i,r;return{c(){e=k("div"),t=D(),l=k("div"),i=D(),r=k("div"),this.h()},l(s){e=E(s,"DIV",{class:!0}),A(e).forEach(c),t=B(s),l=E(s,"DIV",{class:!0}),A(l).forEach(c),i=B(s),r=E(s,"DIV",{class:!0}),A(r).forEach(c),this.h()},h(){m(e,"class","itemPlaceholder svelte-13jvfbi"),m(l,"class","itemPlaceholder svelte-13jvfbi"),T(l,"flex","2"),m(r,"class","itemPlaceholder svelte-13jvfbi"),T(r,"flex","1")},m(s,o){V(s,e,o),V(s,t,o),V(s,l,o),V(s,i,o),V(s,r,o)},p:G,i:G,o:G,d(s){s&&(c(e),c(t),c(l),c(i),c(r))}}}function Hl(a){let e,t,l=a[12]("gravity.totalcomo")+"",i,r,s,o,n,u,f,d,_=a[10]!==void 0&&bt(a);o=new _l({props:{voteStart:Date.parse(a[3].startDate),contract:a[5].target.toString(),poll:a[3],pollId:a[6],artist:a[1]}});function h(g){a[19](g)}let v={artist:a[1]};return a[4]!==void 0&&(v.gravities=a[4]),u=new Dl({props:v}),Et.push(()=>At(u,"gravities",h)),{c(){e=k("div"),t=k("b"),i=W(l),r=D(),_&&_.c(),s=D(),Ve(o.$$.fragment),n=D(),Ve(u.$$.fragment),this.h()},l(g){e=E(g,"DIV",{class:!0});var I=A(e);t=E(I,"B",{class:!0});var b=A(t);i=Q(b,l),b.forEach(c),r=B(I),_&&_.l(I),I.forEach(c),s=B(g),Ie(o.$$.fragment,g),n=B(g),Ie(u.$$.fragment,g),this.h()},h(){m(t,"class","svelte-13jvfbi"),m(e,"class","item total svelte-13jvfbi")},m(g,I){V(g,e,I),p(e,t),p(t,i),p(e,r),_&&_.m(e,null),V(g,s,I),ye(o,g,I),V(g,n,I),ye(u,g,I),d=!0},p(g,I){(!d||I&4096)&&l!==(l=g[12]("gravity.totalcomo")+"")&&N(i,l),g[10]!==void 0?_?_.p(g,I):(_=bt(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null);const b={};I&8&&(b.voteStart=Date.parse(g[3].startDate)),I&32&&(b.contract=g[5].target.toString()),I&8&&(b.poll=g[3]),I&64&&(b.pollId=g[6]),I&2&&(b.artist=g[1]),o.$set(b);const w={};I&2&&(w.artist=g[1]),!f&&I&16&&(f=!0,w.gravities=g[4],wt(()=>f=!1)),u.$set(w)},i(g){d||(re(o.$$.fragment,g),re(u.$$.fragment,g),d=!0)},o(g){se(o.$$.fragment,g),se(u.$$.fragment,g),d=!1},d(g){g&&(c(e),c(s),c(n)),_&&_.d(),De(o,g),De(u,g)}}}function bt(a){let e,t=a[10].toLocaleString("en-US")+"",l,i,r,s;return{c(){e=k("p"),l=W(t),i=D(),r=k("img"),this.h()},l(o){e=E(o,"P",{});var n=A(e);l=Q(n,t),n.forEach(c),i=B(o),r=E(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(r.src,s=We(a[1]).como)||m(r,"src",s),m(r,"alt","COMO"),m(r,"class","svelte-13jvfbi")},m(o,n){V(o,e,n),p(e,l),V(o,i,n),V(o,r,n)},p(o,n){n&1024&&t!==(t=o[10].toLocaleString("en-US")+"")&&N(l,t),n&2&&!K(r.src,s=We(o[1]).como)&&m(r,"src",s)},d(o){o&&(c(e),c(i),c(r))}}}function Zl(a){let e,t,l,i,r,s,o,n,u,f,d,_,h,v,g,I,b,w,y,C,j=a[0]&&ct(a);const H=[Cl,Bl],U=[];function q(F,Z){return F[1]?0:1}o=q(a),n=U[o]=H[o](a);function S(F,Z){return F[0]?Fl:Sl}let P=S(a),Y=P(a);function M(F,Z){return F[0]?Wl:Ml}let z=M(a),R=z(a);function ee(F,Z){return F[0]&&F[3]?Pl:Ql}let X=ee(a),O=X(a);const le=[Ol,Gl],J=[];function $(F,Z){return F[3]?0:1}v=$(a),g=J[v]=le[v](a);const ue=[Hl,Jl],ae=[];function Te(F,Z){return F[3]&&F[1]?0:1}return w=Te(a),y=ae[w]=ue[w](a),{c(){j&&j.c(),e=L(),t=D(),l=k("div"),i=k("div"),r=k("div"),s=k("div"),n.c(),u=D(),Y.c(),f=D(),R.c(),d=D(),_=k("div"),O.c(),h=D(),g.c(),I=D(),b=k("div"),y.c(),this.h()},l(F){const Z=jt("svelte-1pdh1or",document.head);j&&j.l(Z),e=L(),Z.forEach(c),t=B(F),l=E(F,"DIV",{class:!0});var he=A(l);i=E(he,"DIV",{class:!0});var _e=A(i);r=E(_e,"DIV",{class:!0});var oe=A(r);s=E(oe,"DIV",{class:!0});var ke=A(s);n.l(ke),u=B(ke),Y.l(ke),ke.forEach(c),f=B(oe),R.l(oe),d=B(oe),_=E(oe,"DIV",{class:!0});var Le=A(_);O.l(Le),Le.forEach(c),oe.forEach(c),h=B(_e),g.l(_e),_e.forEach(c),I=B(he),b=E(he,"DIV",{class:!0});var Je=A(b);y.l(Je),Je.forEach(c),he.forEach(c),this.h()},h(){m(s,"class","headerSection svelte-13jvfbi"),m(_,"class","headerSection svelte-13jvfbi"),m(r,"class","header svelte-13jvfbi"),m(i,"class","main svelte-13jvfbi"),m(b,"class","sidebar svelte-13jvfbi"),m(l,"class","layout svelte-13jvfbi")},m(F,Z){j&&j.m(document.head,null),p(document.head,e),V(F,t,Z),V(F,l,Z),p(l,i),p(i,r),p(r,s),U[o].m(s,null),p(s,u),Y.m(s,null),p(r,f),R.m(r,null),p(r,d),p(r,_),O.m(_,null),p(i,h),J[v].m(i,null),p(l,I),p(l,b),ae[w].m(b,null),C=!0},p(F,[Z]){F[0]?j?j.p(F,Z):(j=ct(F),j.c(),j.m(e.parentNode,e)):j&&(j.d(1),j=null);let he=o;o=q(F),o===he?U[o].p(F,Z):(Ae(),se(U[he],1,1,()=>{U[he]=null}),we(),n=U[o],n?n.p(F,Z):(n=U[o]=H[o](F),n.c()),re(n,1),n.m(s,u)),P===(P=S(F))&&Y?Y.p(F,Z):(Y.d(1),Y=P(F),Y&&(Y.c(),Y.m(s,null))),z===(z=M(F))&&R?R.p(F,Z):(R.d(1),R=z(F),R&&(R.c(),R.m(r,d))),X===(X=ee(F))&&O?O.p(F,Z):(O.d(1),O=X(F),O&&(O.c(),O.m(_,null)));let _e=v;v=$(F),v===_e?J[v].p(F,Z):(Ae(),se(J[_e],1,1,()=>{J[_e]=null}),we(),g=J[v],g?g.p(F,Z):(g=J[v]=le[v](F),g.c()),re(g,1),g.m(i,null));let oe=w;w=Te(F),w===oe?ae[w].p(F,Z):(Ae(),se(ae[oe],1,1,()=>{ae[oe]=null}),we(),y=ae[w],y?y.p(F,Z):(y=ae[w]=ue[w](F),y.c()),re(y,1),y.m(b,null))},i(F){C||(re(n),re(g),re(y),C=!0)},o(F){se(n),se(g),se(y),C=!1},d(F){F&&(c(t),c(l)),j&&j.d(F),c(e),U[o].d(),Y.d(),R.d(),O.d(),J[v].d(),ae[w].d()}}}function Xl(a,e,t){let l,i;me(a,Nt,S=>t(2,l=S)),me(a,je,S=>t(12,i=S));let r,s,o,n,u,f,d,_=-1,h,v,g,I,b;async function w(){if(l.params.id)if(n&&n.find(S=>S.id===Number(l.params.id)))t(0,r=n.find(S=>S.id===Number(l.params.id)));else{const S=await fetch(`${ve.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,r=(await S.json()).gravity)}else{const P=await(await fetch(`${ve.URL}/gravity/v3/${l.params.artist||""}`)).json();P.ongoing.length?t(0,r=P.ongoing[0]):P.upcoming.length?t(0,r=P.upcoming.at(-1)):t(0,r=P.past[0]),t(4,n=[...P.upcoming,...P.ongoing,...P.past].filter(Y=>Y.artist===(r==null?void 0:r.artist)))}t(1,o=(await ve.artists()).find(S=>S.name===(r==null?void 0:r.artist))),y()}async function y(){var le;t(7,_=-1);const S=r==null?void 0:r.polls.sort((J,$)=>Date.parse(J.startDate)-Date.parse($.startDate)),P=l.params.pollId||((le=(r==null?void 0:r.polls.find(J=>!J.finalized))||(S==null?void 0:S.at(-1)))==null?void 0:le.id),M=(await(await fetch(`${ve.URL}/gravity/v3/${r==null?void 0:r.artist}/gravity/${r==null?void 0:r.id}/polls/${P}`)).json()).pollDetail;t(5,u=new Ze(o.contracts.Governor,Ee.ABI.Governor,Ee.RPC)),t(6,f=M.pollIdOnChain||M.id),(await u.candidates(f)).toString().replaceAll("\b","")!==M.choices.map(J=>J.id).toString().replaceAll("\b","")&&t(6,f-=1);const R=new Ze(o.contracts.Governor,Ee.ABI.Governor,new tl(Ee.RPC)),[ee,X,O]=await Promise.all([R.polls(f),R.totalVotes(f),R.votesPerCandidates(f)]);t(8,h=Number(ee.revealedVotes)),t(9,v=Number(X)),t(10,g=Number(fe(ee.totalVotedCOMO))),t(11,I=O),(Date.parse(M.endDate)>Date.now()||h<v)&&(window.clearInterval(d),t(7,_=Date.parse(M.endDate)-Date.now()),t(14,d=window.setInterval(async()=>{if(Date.parse(M.endDate)>Date.now()){t(7,_=Date.parse(M.endDate)-Date.now());const[J,$]=await Promise.all([R.polls(f),R.totalVotes(f)]);t(10,g=Number(fe(J.totalVotedCOMO))),t(9,v=Number($))}else if(v===h)window.clearInterval(d);else{t(7,_=-1);const[J,$]=await Promise.all([R.polls(f),R.votesPerCandidates(f)]);Number(J.revealedVotes)>h&&(t(8,h=Number(J.revealedVotes)),t(11,I=$))}},1e3))),t(3,s=M)}function C(S,P){var Y;return(Y=s==null?void 0:s.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:Y.filter(M=>M.slotChoiceIds[S]===P).reduce((M,z)=>{var ee;const R=(ee=s==null?void 0:s.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:ee.indexOf(z);return M+Number(fe(I[R]))},0)}kt(()=>window.clearInterval(d));function j(S){o=S,t(1,o),t(2,l),t(15,b),t(14,d)}const H=(S,P,Y)=>C(S,Y.id)-C(S,P.id),U=(S,P)=>Number(I[(s==null?void 0:s.choices.indexOf(P))||0])-Number(I[(s==null?void 0:s.choices.indexOf(S))||0]);function q(S){n=S,t(4,n),t(2,l),t(15,b),t(1,o),t(14,d)}return a.$$.update=()=>{a.$$.dirty&49158&&(l.params!==b&&(!b||l.params.id!==b.id||l.params.artist!==b.artist?(o&&o.name!==l.params.artist&&t(1,o=t(4,n=void 0)),t(0,r=void 0),t(3,s=void 0),window.clearInterval(d),w()):l.params.pollId!==b.pollId&&(t(3,s=void 0),window.clearInterval(d),y())),t(15,b=l.params)),a.$$.dirty&3&&o&&r&&r.artist!==o.name&&Rt(`/gravity/${o.name}`)},[r,o,l,s,n,u,f,_,h,v,g,I,i,C,d,b,j,H,U,q]}class ri extends Se{constructor(e){super(),Fe(this,e,Xl,Zl,be,{})}}export{ri as component,si as universal};
