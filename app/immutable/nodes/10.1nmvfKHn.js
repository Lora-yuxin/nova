import{n as P,H as yt,i as Dt,s as ke,c as ge,o as kt,e as K,y as Bt,b as Et,d as wt}from"../chunks/scheduler.nSpB3e7h.js";import{J as Ct,d as c,K as St,S as Ue,i as Fe,w as J,g as V,e as k,t as Y,s as D,c as E,a as A,b as M,f as B,u as p,h as d,j as T,v as be,y as L,E as Ut,x as He,D as Ft,o as ie,A as Ae,n as se,B as Ve,q as At,k as Ie,l as ye,m as De,p as Be,r as Me,H as jt,I as Yt}from"../chunks/index.EYyPxix3.js";import{q as Mt,r as Wt,A as Qt,s as Pt,u as Ye,b as Gt,$ as je,S as We,C as me,e as x,v as Pe,w as Ge,j as Ot,x as Ze,P as we}from"../chunks/apis.S3U1-Zzk.js";import{g as Nt}from"../chunks/entry.mCvPiVZY.js";import{p as Rt}from"../chunks/stores.iUiBbykm.js";import{A as Tt}from"../chunks/ArtistSelector.texpJhLw.js";import{g as Qe}from"../chunks/assets.lJdVPpet.js";import{f as fe}from"../chunks/units.g_UJoWng.js";import{p as Lt}from"../chunks/polygonscan.3rzyozVp.js";const Vt=typeof window<"u";let Jt=Vt?()=>window.performance.now():()=>Date.now(),Oe=Vt?r=>requestAnimationFrame(r):P;const pe=new Set;function It(r){pe.forEach(e=>{e.c(r)||(pe.delete(e),e.f())}),pe.size!==0&&Oe(It)}function Ht(r){let e;return pe.size===0&&Oe(It),{promise:new Promise(t=>{pe.add(e={c:r,f:t})}),abort(){pe.delete(e)}}}const Ce=new Map;let Se=0;function Zt(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Xt(r,e){const t={stylesheet:St(e),rules:{}};return Ce.set(r,t),t}function qt(r,e,t,l,i,a,s,o=0){const n=16.666/l;let u=`{
`;for(let y=0;y<=1;y+=n){const b=e+(t-e)*a(y);u+=y*100+`%{${s(b,1-b)}}
`}const f=u+`100% {${s(t,1-t)}}
}`,v=`__svelte_${Zt(f)}_${o}`,_=Ct(r),{stylesheet:h,rules:m}=Ce.get(_)||Xt(_,r);m[v]||(m[v]=!0,h.insertRule(`@keyframes ${v} ${f}`,h.cssRules.length));const g=r.style.animation||"";return r.style.animation=`${g?`${g}, `:""}${v} ${l}ms linear ${i}ms 1 both`,Se+=1,v}function Kt(r,e){const t=(r.style.animation||"").split(", "),l=t.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),i=t.length-l.length;i&&(r.style.animation=l.join(", "),Se-=i,Se||zt())}function zt(){Oe(()=>{Se||(Ce.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&c(e)}),Ce.clear())})}function Ne(r,e,t,l){if(!e)return P;const i=r.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return P;const{delay:a=0,duration:s=300,easing:o=yt,start:n=Jt()+a,end:u=n+s,tick:f=P,css:v}=t(r,{from:e,to:i},l);let _=!0,h=!1,m;function g(){v&&(m=qt(r,0,1,s,a,o,v)),a||(h=!0)}function y(){v&&Kt(r,m),_=!1}return Ht(b=>{if(!h&&b>=n&&(h=!0),h&&b>=u&&(f(1,0),y()),!_)return!1;if(h){const w=b-n,I=0+1*o(w/s);f(I,1-I)}return!0}),g(),f(0,1),y}function Re(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=t,r.style.height=l,$t(r,i)}}function $t(r,e){const t=r.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(r),i=l.transform==="none"?"":l.transform;r.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function xt({params:r}){return r}const si=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"})),el=Mt(Wt("YIBgQFI0gBVhAA9XX4D9W1BgQFFhBGE4A4BhBGGDOYEBYECBkFJhAC6RYQIzVltfgVFgAWABYEAbA4ERFWEASFdhAEhhAaVWW2BAUZCAglKAYCACYCABggFgQFKAFWEAjVeBYCABW2BAgFGAggGQkVJfgVJgYGAgggFSgVJgIAGQYAGQA5CBYQBmV5BQW1CQUF9bglGBEBVhATpXYQDkg4KBUYEQYQCwV2EAsGEDlFZbYCACYCABAVFfAVGEg4FRgRBhAM1XYQDNYQOUVltgIAJgIAEBUWAgAVFhAWhgIBtgIBxWW4ODgVGBEGEA9ldhAPZhA5RWW2AgAmAgAQFRXwGEhIFRgRBhARJXYQESYQOUVltgIJCBApGQkQGBAVEBkZCRUpAVFZBSgGEBMoFhA6hWW5FQUGEAklZbUF9DgmBAUWAgAWEBT5KRkGEDzFZbYEBRYCCBgwMDgVKQYEBSkFCAUWAgggHzW19gYGBAUZBQX4FSYCCBAWBAUl+AhFFgIIYBh1r6YD89AWAfGRaCAWBAUj2CUpFQPV9gIIMBPpJQkpBQVltjTkh7cWDgG19SYEFgBFJgJF/9W2BAgFGQgQFgAWABYEAbA4ERgoIQFxVhAdtXYQHbYQGlVltgQFKQVltgQFFgH4IBYB8ZFoEBYAFgAWBAGwOBEYKCEBcVYQIJV2ECCWEBpVZbYEBSkZBQVltfW4OBEBVhAitXgYEBUYOCAVJgIAFhAhNWW1BQX5EBUlZbX2AggIOFAxIVYQJEV1+A/VuCUWABYAFgQBsDgIIRFWECWldfgP1bgYUBkVCFYB+DARJhAm1XX4D9W4FRgYERFWECf1dhAn9hAaVWW4BgBRthAo6FggFhAeFWW5GCUoOBAYUBkYWBAZCJhBEVYQKnV1+A/VuGhgGSUFuDgxAVYQOHV4JRhYERFWECxFdfgIH9W4YBYEBgHxmCjQOBAYITFWEC3FdfgIH9W2EC5GEBuVZbg4sBUWABYAFgoBsDgRaBFGEC/VdfgIH9W4FSg4MBUYmBERVhAxBXX4CB/VuAhQGUUFCNYD+FARJhAyVXX4CB/VuKhAFRiYERFWEDOVdhAzlhAaVWW2EDSYyEYB+EARYBYQHhVluSUICDUo6EgocBAREVYQNfV1+Agf1bYQNugY2FAYaIAWECEVZbUICLAZGQkVKEUlBQkYYBkZCGAZBhAq1WW5mYUFBQUFBQUFBQVltjTkh7cWDgG19SYDJgBFJgJF/9W19gAYIBYQPFV2NOSHtxYOAbX1JgEWAEUmAkX/1bUGABAZBWW19gQICDAYWEUmAggoGGAVKBhlGAhFJgYJNQg4cBkVCDgWAFG4gBAYOJAV9bg4EQFWEEUFeJgwNgXxkBhVKBUYBRFRWEUoYBUYaEAYmQUoBRiYUBgZBSYQQxgYqHAYSLAWECEVZblYcBlWAfAWAfGRaTkJMBhwGSUJCFAZBgAQFhA/hWW1CQmplQUFBQUFBQUFBQVv4="));var Xe=function(r,e,t,l){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{u(l.next(f))}catch(v){s(v)}}function n(f){try{u(l.throw(f))}catch(v){s(v)}}function u(f){f.done?a(f.value):i(f.value).then(o,n)}u((l=l.apply(r,e||[])).next())})},ne=function(r,e,t,l,i){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},te=function(r,e,t,l){if(t==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!l:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?l:t==="a"?l.call(r):l?l.value:e.get(r)},ve,ce,le;class tl extends Qt{constructor(e){super(),ve.set(this,void 0),ce.set(this,void 0),le.set(this,void 0),this.subprovider=e,ne(this,ve,[],"f"),ne(this,ce,10,"f"),ne(this,le,null,"f")}get drainInterval(){return te(this,ce,"f")}set drainInterval(e){e<0&&(e=-1),e!==te(this,ce,"f")&&(ne(this,ce,e,"f"),te(this,ce,"f")>=0?(te(this,le,"f")&&(clearTimeout(te(this,le,"f")),ne(this,le,null,"f")),te(this,ve,"f").length&&ne(this,le,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f")):te(this,le,"f")&&(clearTimeout(te(this,le,"f")),ne(this,le,null,"f")))}queueCall(e,t){return te(this,le,"f")==null&&te(this,ce,"f")>=0&&ne(this,le,setTimeout(()=>{this.drainCallQueue()},te(this,ce,"f")),"f"),new Promise((l,i)=>{te(this,ve,"f").push({request:{to:e,data:t},resolve:l,reject:i})})}drainCallQueue(){return Xe(this,void 0,void 0,function*(){ne(this,le,null,"f");const e=te(this,ve,"f");ne(this,ve,[],"f");const t=Pt([el,Ye.defaultAbiCoder().encode(["tuple(address, bytes)[]"],[e.map(({request:o})=>[o.to,o.data])])]);this.emit("debug",{action:"sendMulticall",data:t,call:e.map(({request:o})=>({to:o.to,data:o.data}))});const l=yield this.subprovider.call({data:t}),[i,a]=Ye.defaultAbiCoder().decode(["uint","tuple(bool, bytes)[]"],l);this.emit("debug",{action:"receiveMulticallResult",data:t,call:e.map(({request:o},n)=>({to:o.to,data:o.data,status:a[n][0],result:a[n][1]}))});const s=[];for(let o=0;o<e.length;o++){const n=a[o],{resolve:u}=e[o];u({status:n[0],data:n[1]}),s.push({status:n[0],data:n[1]})}return s})}_detectNetwork(){return this.subprovider._detectNetwork()}_perform(e){return Xe(this,void 0,void 0,function*(){if(e.method==="call"){const t=e.transaction,l=t.to||null,i=t.data||"0x";Gt(typeof l=="string","deployment transactions unsupported","tx.to",t.to);const a=yield this.queueCall(l,i);if(a.status)return a.data;throw Ye.getBuiltinCallException("call",{to:l,data:i},a.data)}return yield this.subprovider._perform(e)})}}ve=new WeakMap,ce=new WeakMap,le=new WeakMap;function ll(r){const e=r-1;return e*e*e+1}function Te(r,{from:e,to:t},l={}){const i=getComputedStyle(r),a=i.transform==="none"?"":i.transform,[s,o]=i.transformOrigin.split(" ").map(parseFloat),n=e.left+e.width*s/t.width-(t.left+s),u=e.top+e.height*o/t.height-(t.top+o),{delay:f=0,duration:v=h=>Math.sqrt(h)*120,easing:_=ll}=l;return{delay:f,duration:Dt(v)?v(Math.sqrt(n*n+u*u)):v,easing:_,css:(h,m)=>{const g=m*n,y=m*u,b=h+m*e.width/t.width,w=h+m*e.height/t.height;return`transform: ${a} translate(${g}px, ${y}px) scale(${b}, ${w});`}}}function il(r,e,t){const l=r.slice();return l[18]=e[t],l[17]=t,l}function qe(r,e,t){const l=r.slice();l[14]=e[t],l[17]=t;const i=l[3].find(function(...s){return r[10](l[14],...s)});return l[15]=i,l}function sl(r){let e,t,l,i=r[4]("gravity.votes.title")+"",a,s,o,n=r[4]("gravity.votes.subtitle")+"",u,f;function v(m,g){return m[2].length?ol:rl}let _=v(r),h=_(r);return{c(){e=k("div"),t=k("div"),l=k("b"),a=Y(i),s=D(),o=k("p"),u=Y(n),f=D(),h.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var g=A(e);t=E(g,"DIV",{class:!0});var y=A(t);l=E(y,"B",{});var b=A(l);a=M(b,i),b.forEach(c),s=B(y),o=E(y,"P",{});var w=A(o);u=M(w,n),w.forEach(c),y.forEach(c),f=B(g),h.l(g),g.forEach(c),this.h()},h(){p(t,"class","header svelte-al4msb"),p(e,"class","votes svelte-al4msb")},m(m,g){V(m,e,g),d(e,t),d(t,l),d(l,a),d(t,s),d(t,o),d(o,u),d(e,f),h.m(e,null)},p(m,g){g&16&&i!==(i=m[4]("gravity.votes.title")+"")&&T(a,i),g&16&&n!==(n=m[4]("gravity.votes.subtitle")+"")&&T(u,n),_===(_=v(m))&&h?h.p(m,g):(h.d(1),h=_(m),h&&(h.c(),h.m(e,null)))},d(m){m&&c(e),h.d()}}}function al(r){let e,t,l=r[4]("gravity.votes.countdown")+"",i,a,s,o=String(Math.floor(r[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[1]%(60*1e3)/1e3)).padStart(2,"0"),n;return{c(){e=k("div"),t=k("p"),i=Y(l),a=D(),s=k("h3"),n=Y(o),this.h()},l(u){e=E(u,"DIV",{class:!0});var f=A(e);t=E(f,"P",{});var v=A(t);i=M(v,l),v.forEach(c),a=B(f),s=E(f,"H3",{class:!0});var _=A(s);n=M(_,o),_.forEach(c),f.forEach(c),this.h()},h(){p(s,"class","svelte-al4msb"),p(e,"class","countdown svelte-al4msb")},m(u,f){V(u,e,f),d(e,t),d(t,i),d(e,a),d(e,s),d(s,n)},p(u,f){f&16&&l!==(l=u[4]("gravity.votes.countdown")+"")&&T(i,l),f&2&&o!==(o=String(Math.floor(u[1]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(u[1]%(60*1e3)/1e3)).padStart(2,"0"))&&T(n,o)},d(u){u&&c(e)}}}function rl(r){let e,t=x({length:50}),l=[];for(let i=0;i<t.length;i+=1)l[i]=nl(il(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p:P,d(i){i&&c(e),be(l,i)}}}function ol(r){let e=[],t=new Map,l,i=x(r[2]);const a=s=>s[14].id;for(let s=0;s<i.length;s+=1){let o=qe(r,i,s),n=a(o);t.set(n,e[s]=Ke(n,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=J()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);l=J()},m(s,o){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,o);V(s,l,o)},p(s,o){if(o&61){i=x(s[2]);for(let n=0;n<e.length;n+=1)e[n].r();e=Pe(e,o,a,1,s,i,t,l.parentNode,Ge,Ke,l,qe);for(let n=0;n<e.length;n+=1)e[n].a()}},d(s){s&&c(l);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function nl(r){let e,t,l,i,a,s,o,n,u,f;return{c(){e=k("div"),t=k("div"),l=D(),i=k("div"),a=D(),s=k("div"),o=k("div"),n=D(),u=k("div"),f=D(),this.h()},l(v){e=E(v,"DIV",{class:!0});var _=A(e);t=E(_,"DIV",{class:!0}),A(t).forEach(c),l=B(_),i=E(_,"DIV",{class:!0}),A(i).forEach(c),a=B(_),s=E(_,"DIV",{class:!0});var h=A(s);o=E(h,"DIV",{class:!0}),A(o).forEach(c),n=B(h),u=E(h,"DIV",{class:!0}),A(u).forEach(c),h.forEach(c),f=B(_),_.forEach(c),this.h()},h(){p(t,"class","placeholder svelte-al4msb"),L(t,"width","110px"),L(t,"margin-right","auto"),p(i,"class","placeholder svelte-al4msb"),L(i,"width","60px"),p(o,"class","placeholder svelte-al4msb"),L(o,"width","80px"),p(u,"class","placeholder svelte-al4msb"),L(u,"width","110px"),p(s,"class","details svelte-al4msb"),p(e,"class","vote svelte-al4msb")},m(v,_){V(v,e,_),d(e,t),d(e,l),d(e,i),d(e,a),d(e,s),d(s,o),d(s,n),d(s,u),d(e,f)},p:P,d(v){v&&c(e)}}}function cl(r){let e,t=r[4]("gravity.votes.unrevealed")+"",l;return{c(){e=k("i"),l=Y(t),this.h()},l(i){e=E(i,"I",{class:!0});var a=A(e);l=M(a,t),a.forEach(c),this.h()},h(){p(e,"class","candidate svelte-al4msb")},m(i,a){V(i,e,a),d(e,l)},p(i,a){a&16&&t!==(t=i[4]("gravity.votes.unrevealed")+"")&&T(l,t)},d(i){i&&c(e)}}}function fl(r){let e,t,l,i,a=(r[0].choices[r[14].candidate].title||ze(r[0],r[14].candidate))+"",s;return{c(){e=k("p"),t=k("img"),i=D(),s=Y(a),this.h()},l(o){e=E(o,"P",{class:!0});var n=A(e);t=E(n,"IMG",{src:!0,alt:!0,class:!0}),i=B(n),s=M(n,a),n.forEach(c),this.h()},h(){K(t.src,l=r[0].choices[r[14].candidate].txImageUrl)||p(t,"src",l),p(t,"alt","Choice"),p(t,"class","svelte-al4msb"),p(e,"class","candidate svelte-al4msb")},m(o,n){V(o,e,n),d(e,t),d(e,i),d(e,s)},p(o,n){n&5&&!K(t.src,l=o[0].choices[o[14].candidate].txImageUrl)&&p(t,"src",l),n&5&&a!==(a=(o[0].choices[o[14].candidate].title||ze(o[0],o[14].candidate))+"")&&T(s,a)},d(o){o&&c(e)}}}function Ke(r,e){var ue,$,he;let t,l,i,a,s,o=(((ue=e[15])==null?void 0:ue.nickname)||(($=e[15])==null?void 0:$.address.slice(0,6))+"..."+((he=e[15])==null?void 0:he.address.slice(-4)))+"",n,u,f,v,_=Number(fe(e[14].amount)).toLocaleString("en-US")+"",h,m,g,y,b,w,I,S=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"",F,Z,j=new Date(Number(e[14].timestamp)).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})+"",q,U,W,Q,G=P;function z(N,R){return N[14].candidate!==null?fl:cl}let O=z(e),X=O(e);return{key:r,first:null,c(){t=k("div"),l=k("a"),i=k("img"),s=D(),n=Y(o),f=D(),v=k("p"),h=Y(_),m=D(),g=k("img"),b=D(),w=k("div"),I=k("span"),F=Y(S),Z=Y(`,
                            `),q=Y(j),U=D(),X.c(),W=D(),this.h()},l(N){t=E(N,"DIV",{class:!0});var R=A(t);l=E(R,"A",{href:!0,class:!0});var ae=A(l);i=E(ae,"IMG",{class:!0,src:!0,alt:!0}),s=B(ae),n=M(ae,o),ae.forEach(c),f=B(R),v=E(R,"P",{});var ee=A(v);h=M(ee,_),ee.forEach(c),m=B(R),g=E(R,"IMG",{src:!0,alt:!0,class:!0}),b=B(R),w=E(R,"DIV",{class:!0});var re=A(w);I=E(re,"SPAN",{});var C=A(I);F=M(C,S),Z=M(C,`,
                            `),q=M(C,j),C.forEach(c),U=B(re),X.l(re),re.forEach(c),W=B(R),R.forEach(c),this.h()},h(){var N,R;p(i,"class","profileImage svelte-al4msb"),K(i.src,a="https://static.cosmo.fans/uploads/images/img_profile_gallag@3x.png")||p(i,"src",a),p(i,"alt","User"),p(l,"href",u="/@"+(((N=e[15])==null?void 0:N.nickname)||((R=e[15])==null?void 0:R.address))),p(l,"class","svelte-al4msb"),K(g.src,y=e[5])||p(g,"src",y),p(g,"alt","COMO"),p(g,"class","svelte-al4msb"),p(w,"class","details svelte-al4msb"),p(t,"class","vote svelte-al4msb"),this.first=t},m(N,R){V(N,t,R),d(t,l),d(l,i),d(l,s),d(l,n),d(t,f),d(t,v),d(v,h),d(t,m),d(t,g),d(t,b),d(t,w),d(w,I),d(I,F),d(I,Z),d(I,q),d(w,U),X.m(w,null),d(t,W)},p(N,R){var ae,ee,re,C,H;e=N,R&12&&o!==(o=(((ae=e[15])==null?void 0:ae.nickname)||((ee=e[15])==null?void 0:ee.address.slice(0,6))+"..."+((re=e[15])==null?void 0:re.address.slice(-4)))+"")&&T(n,o),R&12&&u!==(u="/@"+(((C=e[15])==null?void 0:C.nickname)||((H=e[15])==null?void 0:H.address)))&&p(l,"href",u),R&4&&_!==(_=Number(fe(e[14].amount)).toLocaleString("en-US")+"")&&T(h,_),R&4&&S!==(S=new Date(Number(e[14].timestamp)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&T(F,S),R&4&&j!==(j=new Date(Number(e[14].timestamp)).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})+"")&&T(q,j),O===(O=z(e))&&X?X.p(e,R):(X.d(1),X=O(e),X&&(X.c(),X.m(w,null)))},r(){Q=t.getBoundingClientRect()},f(){Re(t),G()},a(){G(),G=Ne(t,Q,Te,{})},d(N){N&&c(t),X.d()}}}function ul(r){let e;function t(a,s){return a[1]>-1?al:sl}let l=t(r),i=l(r);return{c(){i.c(),e=J()},l(a){i.l(a),e=J()},m(a,s){i.m(a,s),V(a,e,s)},p(a,[s]){l===(l=t(a))&&i?i.p(a,s):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},i:P,o:P,d(a){a&&c(e),i.d(a)}}}function ze(r,e){const t=r.pollViewMetadata;if(t.slots){const l=t.choiceIdToSlotChoicesMapTable[e];return t.slots.map((i,a)=>{var s,o;return`${i.name}: ${(o=(s=t.slotChoices)==null?void 0:s.find(n=>n.id===l.slotChoiceIds[a]))==null?void 0:o.alias}`}).join(", ")}return r.choices[e].id}function hl(r,e,t){let l;ge(r,je,b=>t(4,l=b));let{voteStart:i}=e,{contract:a}=e,{poll:s}=e,{pollId:o}=e,{artist:n}=e,u=-1,f,v,_=[],h=[];const m=Qe(n).como;i>Date.now()?(f=window.setInterval(()=>{i>Date.now()?t(1,u=i-Date.now()):(g(),t(1,u=-1),window.clearInterval(f))},1e3),u=i-Date.now()):g();async function g(){const w=await(await fetch(We.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    query {
                        votes(orderBy: amount_DESC, limit: 50, where: {contract_eq: "${a.toLowerCase()}", poll_eq: "${o}"}) {
                            ${Object.keys(We.Vote).join(`
`)}
                        }
                    }
                `})})).json(),I=w.data.votes.filter(S=>!h.find(F=>F.address===S.from)).map(S=>S.from);if(I.length){const F=await(await fetch(`${me.URL}/user/v1/by-address/${I.join(",")}`)).json();t(3,h=[...h,...F,...I.filter(Z=>!F.find(j=>j.address===Z)).map(Z=>({nickname:"",address:Z,profileImageUrl:""}))])}t(2,_=w.data.votes),(!_.length||_.filter(S=>S.candidate===null).length)&&(v=window.setTimeout(g,1e4))}kt(()=>{window.clearInterval(f),window.clearTimeout(v)});const y=(b,w)=>w.address===b.from;return r.$$set=b=>{"voteStart"in b&&t(6,i=b.voteStart),"contract"in b&&t(7,a=b.contract),"poll"in b&&t(0,s=b.poll),"pollId"in b&&t(8,o=b.pollId),"artist"in b&&t(9,n=b.artist)},[s,u,_,h,l,m,i,a,o,n,y]}class _l extends Ue{constructor(e){super(),Fe(this,e,hl,ul,ke,{voteStart:6,contract:7,poll:0,pollId:8,artist:9})}}function $e(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function xe(r){let e,t=x(r[4]),l=[];for(let i=0;i<t.length;i+=1)l[i]=et($e(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p(i,a){if(a&23){t=x(i[4]);let s;for(s=0;s<t.length;s+=1){const o=$e(i,t,s);l[s]?l[s].p(o,a):(l[s]=et(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),be(l,i)}}}function et(r){let e,t,l=`${r[2]?r[10]/Math.max(...r[4])*100:10}%`;return{c(){e=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0,title:!0}),A(e).forEach(c),this.h()},h(){p(e,"class","bar svelte-11jci92"),p(e,"title",t=r[10].toLocaleString("en-US")+" COMO"),He(e,"active",r[2]&&r[0]/r[1]>r[12]/r[4].length),L(e,"height",l)},m(i,a){V(i,e,a)},p(i,a){a&16&&t!==(t=i[10].toLocaleString("en-US")+" COMO")&&p(e,"title",t),a&23&&He(e,"active",i[2]&&i[0]/i[1]>i[12]/i[4].length),a&20&&l!==(l=`${i[2]?i[10]/Math.max(...i[4])*100:10}%`)&&L(e,"height",l)},d(i){i&&c(e)}}}function dl(r){let e,t,l,i,a,s,o=`${r[0]/r[1]*100}%`,n,u,f,v=r[5]("gravity.totalvotes",{values:{votes:`${r[6](r[0])}/${r[6](r[1])}`}})+"",_,h,m=Math.round(r[0]/r[1]*100)+"",g,y,b=r[4]&&xe(r);return{c(){e=k("div"),t=k("div"),b&&b.c(),i=D(),a=k("div"),s=k("div"),n=D(),u=k("div"),f=k("p"),_=Y(v),h=Y(" ("),g=Y(m),y=Y("%)"),this.h()},l(w){e=E(w,"DIV",{class:!0});var I=A(e);t=E(I,"DIV",{class:!0});var S=A(t);b&&b.l(S),S.forEach(c),i=B(I),a=E(I,"DIV",{class:!0});var F=A(a);s=E(F,"DIV",{class:!0}),A(s).forEach(c),F.forEach(c),n=B(I),u=E(I,"DIV",{class:!0});var Z=A(u);f=E(Z,"P",{});var j=A(f);_=M(j,v),h=M(j," ("),g=M(j,m),y=M(j,"%)"),j.forEach(c),Z.forEach(c),I.forEach(c),this.h()},h(){p(t,"class","bars svelte-11jci92"),Bt(()=>r[9].call(t)),p(s,"class","progress svelte-11jci92"),L(s,"width",o),p(a,"class","progressBar svelte-11jci92"),p(u,"class","text svelte-11jci92"),p(e,"class","graph svelte-11jci92")},m(w,I){V(w,e,I),d(e,t),b&&b.m(t,null),l=Ut(t,r[9].bind(t)),d(e,i),d(e,a),d(a,s),d(e,n),d(e,u),d(u,f),d(f,_),d(f,h),d(f,g),d(f,y)},p(w,[I]){w[4]?b?b.p(w,I):(b=xe(w),b.c(),b.m(t,null)):b&&(b.d(1),b=null),I&3&&o!==(o=`${w[0]/w[1]*100}%`)&&L(s,"width",o),I&99&&v!==(v=w[5]("gravity.totalvotes",{values:{votes:`${w[6](w[0])}/${w[6](w[1])}`}})+"")&&T(_,v),I&3&&m!==(m=Math.round(w[0]/w[1]*100)+"")&&T(g,m)},i:P,o:P,d(w){w&&c(e),b&&b.d(),l()}}}function vl(r,e,t){let l,i;ge(r,je,h=>t(5,l=h)),ge(r,Ot,h=>t(6,i=h));let{contract:a}=e,{poll:s}=e,{revealedVotes:o}=e,{totalVotes:n}=e,u;fetch(We.URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                query {
                    votes(limit: 99999, orderBy: timestamp_ASC, where: {contract_eq: "${a}", poll_eq: "${s}"}) {
                        amount
                    }
                }
            `})}).then(async h=>{const m=await h.json();t(2,u=m.data.votes.map(g=>Number(fe(g.amount))))});let f,v;function _(){f=this.clientWidth,t(3,f)}return r.$$set=h=>{"contract"in h&&t(7,a=h.contract),"poll"in h&&t(8,s=h.poll),"revealedVotes"in h&&t(0,o=h.revealedVotes),"totalVotes"in h&&t(1,n=h.totalVotes)},r.$$.update=()=>{if(r.$$.dirty&12&&f)if(u){let h=[...u],m=[];for(let g=(f-10)/20;g>0;g--)m.push(h.splice(0,Math.ceil(h.length/g)).reduce((y,b)=>y+b,0));t(4,v=m)}else t(4,v=Array(Math.floor((f-10)/20)).fill(0))},[o,n,u,f,v,l,i,a,s,_]}class ml extends Ue{constructor(e){super(),Fe(this,e,vl,dl,ke,{contract:7,poll:8,revealedVotes:0,totalVotes:1})}}function pl(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function tt(r,e,t){const l=r.slice();return l[4]=e[t],l}function lt(r,e,t){const l=r.slice();return l[7]=e[t],l}function gl(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),A(e).forEach(c),this.h()},h(){p(e,"class","placeholder svelte-utm5ay"),L(e,"Width","80px")},m(t,l){V(t,e,l)},p:P,d(t){t&&c(e)}}}function bl(r){let e,t=r[1]("gravity.history.subtitle",{values:{count:r[0].length}})+"",l;return{c(){e=k("p"),l=Y(t)},l(i){e=E(i,"P",{});var a=A(e);l=M(a,t),a.forEach(c)},m(i,a){V(i,e,a),d(e,l)},p(i,a){a&3&&t!==(t=i[1]("gravity.history.subtitle",{values:{count:i[0].length}})+"")&&T(l,t)},d(i){i&&c(e)}}}function kl(r){let e,t=x({length:5}),l=[];for(let i=0;i<t.length;i+=1)l[i]=wl(pl(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p:P,d(i){i&&c(e),be(l,i)}}}function El(r){let e,t=x(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=at(tt(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p(i,a){if(a&1){t=x(i[0]);let s;for(s=0;s<t.length;s+=1){const o=tt(i,t,s);l[s]?l[s].p(o,a):(l[s]=at(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),be(l,i)}}}function wl(r){let e,t,l,i,a,s;return{c(){e=k("div"),t=k("div"),l=D(),i=k("div"),a=D(),s=k("hr"),this.h()},l(o){e=E(o,"DIV",{class:!0});var n=A(e);t=E(n,"DIV",{class:!0}),A(t).forEach(c),l=B(n),i=E(n,"DIV",{class:!0}),A(i).forEach(c),n.forEach(c),a=B(o),s=E(o,"HR",{}),this.h()},h(){p(t,"class","placeholder imgPlaceholder svelte-utm5ay"),p(i,"class","placeholder svelte-utm5ay"),L(i,"width","calc(100% - 60px)"),p(e,"class","gravity svelte-utm5ay")},m(o,n){V(o,e,n),d(e,t),d(e,l),d(e,i),V(o,a,n),V(o,s,n)},p:P,d(o){o&&(c(e),c(a),c(s))}}}function Al(r){let e,t=r[4].title+"",l,i;return{c(){e=k("a"),l=Y(t),this.h()},l(a){e=E(a,"A",{class:!0,href:!0});var s=A(e);l=M(s,t),s.forEach(c),this.h()},h(){p(e,"class","title svelte-utm5ay"),p(e,"href",i="/gravity/"+r[4].artist+"/"+r[4].id)},m(a,s){V(a,e,s),d(e,l)},p(a,s){s&1&&t!==(t=a[4].title+"")&&T(l,t),s&1&&i!==(i="/gravity/"+a[4].artist+"/"+a[4].id)&&p(e,"href",i)},d(a){a&&c(e)}}}function Vl(r){let e,t=r[4].title+"",l;return{c(){e=k("p"),l=Y(t)},l(i){e=E(i,"P",{});var a=A(e);l=M(a,t),a.forEach(c)},m(i,a){V(i,e,a),d(e,l)},p(i,a){a&1&&t!==(t=i[4].title+"")&&T(l,t)},d(i){i&&c(e)}}}function it(r){let e,t=x(r[4].polls.sort(r[3])),l=[];for(let i=0;i<t.length;i+=1)l[i]=st(lt(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p(i,a){if(a&1){t=x(i[4].polls.sort(i[3]));let s;for(s=0;s<t.length;s+=1){const o=lt(i,t,s);l[s]?l[s].p(o,a):(l[s]=st(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),be(l,i)}}}function st(r){let e,t,l=r[7].title+"",i,a,s,o,n=new Date(r[7].startDate).toLocaleDateString()+"",u,f;return{c(){e=k("div"),t=k("a"),i=Y(l),s=D(),o=k("p"),u=Y(n),f=D(),this.h()},l(v){e=E(v,"DIV",{class:!0});var _=A(e);t=E(_,"A",{href:!0,class:!0});var h=A(t);i=M(h,l),h.forEach(c),s=B(_),o=E(_,"P",{});var m=A(o);u=M(m,n),m.forEach(c),f=B(_),_.forEach(c),this.h()},h(){p(t,"href",a="/gravity/"+r[4].artist+"/"+r[4].id+"/"+r[7].id),p(t,"class","svelte-utm5ay"),p(e,"class","poll svelte-utm5ay")},m(v,_){V(v,e,_),d(e,t),d(t,i),d(e,s),d(e,o),d(o,u),d(e,f)},p(v,_){_&1&&l!==(l=v[7].title+"")&&T(i,l),_&1&&a!==(a="/gravity/"+v[4].artist+"/"+v[4].id+"/"+v[7].id)&&p(t,"href",a),_&1&&n!==(n=new Date(v[7].startDate).toLocaleDateString()+"")&&T(u,n)},d(v){v&&c(e)}}}function at(r){let e,t,l,i,a,s,o,n;function u(h,m){return h[4].polls.length>1?Vl:Al}let f=u(r),v=f(r),_=r[4].polls.length>1&&it(r);return{c(){e=k("div"),t=k("img"),a=D(),v.c(),s=D(),_&&_.c(),o=D(),n=k("hr"),this.h()},l(h){e=E(h,"DIV",{class:!0});var m=A(e);t=E(m,"IMG",{src:!0,alt:!0,class:!0}),a=B(m),v.l(m),m.forEach(c),s=B(h),_&&_.l(h),o=B(h),n=E(h,"HR",{}),this.h()},h(){K(t.src,l=r[4].bannerImageUrl)||p(t,"src",l),p(t,"alt",i=r[4].title),p(t,"class","svelte-utm5ay"),p(e,"class","gravity svelte-utm5ay")},m(h,m){V(h,e,m),d(e,t),d(e,a),v.m(e,null),V(h,s,m),_&&_.m(h,m),V(h,o,m),V(h,n,m)},p(h,m){m&1&&!K(t.src,l=h[4].bannerImageUrl)&&p(t,"src",l),m&1&&i!==(i=h[4].title)&&p(t,"alt",i),f===(f=u(h))&&v?v.p(h,m):(v.d(1),v=f(h),v&&(v.c(),v.m(e,null))),h[4].polls.length>1?_?_.p(h,m):(_=it(h),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},d(h){h&&(c(e),c(s),c(o),c(n)),v.d(),_&&_.d(h)}}}function Il(r){let e,t,l,i=r[1]("gravity.history.title")+"",a,s,o;function n(m,g){return m[0]?bl:gl}let u=n(r),f=u(r);function v(m,g){return m[0]?El:kl}let _=v(r),h=_(r);return{c(){e=k("div"),t=k("div"),l=k("b"),a=Y(i),s=D(),f.c(),o=D(),h.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var g=A(e);t=E(g,"DIV",{class:!0});var y=A(t);l=E(y,"B",{});var b=A(l);a=M(b,i),b.forEach(c),s=B(y),f.l(y),y.forEach(c),o=B(g),h.l(g),g.forEach(c),this.h()},h(){p(t,"class","header svelte-utm5ay"),p(e,"class","history svelte-utm5ay")},m(m,g){V(m,e,g),d(e,t),d(t,l),d(l,a),d(t,s),f.m(t,null),d(e,o),h.m(e,null)},p(m,[g]){g&2&&i!==(i=m[1]("gravity.history.title")+"")&&T(a,i),u===(u=n(m))&&f?f.p(m,g):(f.d(1),f=u(m),f&&(f.c(),f.m(t,null))),_===(_=v(m))&&h?h.p(m,g):(h.d(1),h=_(m),h&&(h.c(),h.m(e,null)))},i:P,o:P,d(m){m&&c(e),f.d(),h.d()}}}function yl(r,e,t){let l;ge(r,je,o=>t(1,l=o));let{artist:i}=e,{gravities:a=void 0}=e;a||fetch(`${me.URL}/gravity/v3/${i.name}`).then(async o=>{const n=await o.json();t(0,a=[...n.upcoming,...n.ongoing,...n.past])});const s=(o,n)=>Date.parse(o.startDate)-Date.parse(n.startDate);return r.$$set=o=>{"artist"in o&&t(2,i=o.artist),"gravities"in o&&t(0,a=o.gravities)},[a,l,i,s]}class Dl extends Ue{constructor(e){super(),Fe(this,e,yl,Il,ke,{artist:2,gravities:0})}}function rt(r,e,t){const l=r.slice();l[25]=e[t];const i=Math.round(Number(fe(l[11][l[3].choices.indexOf(l[25])]))/l[10]*100);return l[26]=i,l}function ot(r,e,t){const l=r.slice();return l[22]=e[t],l[24]=t,l}function nt(r,e,t){const l=r.slice();l[25]=e[t];const i=Math.round(l[13](l[24],l[25].id)/l[11].reduce((a,s)=>a+Number(fe(s)),0)*100);return l[26]=i,l}function ct(r){let e=r[2].route,t,l=ft(r);return{c(){l.c(),t=J()},l(i){l.l(i),t=J()},m(i,a){l.m(i,a),V(i,t,a)},p(i,a){a&4&&ke(e,e=i[2].route)?(l.d(1),l=ft(i),l.c(),l.m(t.parentNode,t)):l.p(i,a)},d(i){i&&c(t),l.d(i)}}}function ft(r){let e;return document.title=e="Nova | "+r[0].title.replaceAll(`
`," "),{c:P,l:P,m:P,p(t,l){l&1&&e!==(e="Nova | "+t[0].title.replaceAll(`
`," "))&&(document.title=e)},d:P}}function Bl(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),A(e).forEach(c),this.h()},h(){p(e,"class","placeholder svelte-13jvfbi"),L(e,"width","85px")},m(t,l){V(t,e,l)},p:P,i:P,o:P,d(t){t&&c(e)}}}function Cl(r){let e,t,l;function i(s){r[16](s)}let a={};return r[1]!==void 0&&(a.selected=r[1]),e=new Tt({props:a}),Et.push(()=>At(e,"selected",i)),{c(){Ie(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,o){De(e,s,o),l=!0},p(s,o){const n={};!t&&o&2&&(t=!0,n.selected=s[1],wt(()=>t=!1)),e.$set(n)},i(s){l||(se(e.$$.fragment,s),l=!0)},o(s){ie(e.$$.fragment,s),l=!1},d(s){Be(e,s)}}}function Sl(r){let e,t,l;return{c(){e=k("div"),t=D(),l=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0}),A(e).forEach(c),t=B(i),l=E(i,"DIV",{class:!0}),A(l).forEach(c),this.h()},h(){p(e,"class","placeholder svelte-13jvfbi"),L(e,"width","50px"),p(l,"class","placeholder svelte-13jvfbi"),L(l,"margin-left","auto"),L(l,"width","135px")},m(i,a){V(i,e,a),V(i,t,a),V(i,l,a)},p:P,d(i){i&&(c(e),c(t),c(l))}}}function Ul(r){let e,t,l,i,a,s,o,n,u;function f(h,m){if(h[0].type==="event-gravity")return Yl;if(h[0].type==="grand-gravity")return jl;if(h[0].type==="solo-gravity")return Fl}let v=f(r),_=v&&v(r);return{c(){e=k("div"),_&&_.c(),l=D(),i=k("a"),a=k("img"),o=Y(`
                        PolygonScan`),this.h()},l(h){e=E(h,"DIV",{class:!0});var m=A(e);_&&_.l(m),m.forEach(c),l=B(h),i=E(h,"A",{class:!0,href:!0,title:!0});var g=A(i);a=E(g,"IMG",{src:!0,alt:!0,class:!0}),o=M(g,`
                        PolygonScan`),g.forEach(c),this.h()},h(){p(e,"class",t="gravityType "+r[0].type+" svelte-13jvfbi"),K(a.src,s=Lt)||p(a,"src",s),p(a,"alt","PolygonScan"),p(a,"class","svelte-13jvfbi"),p(i,"class","polygonscan svelte-13jvfbi"),p(i,"href",n=r[0].contractOutlink),p(i,"title",u="Poll ID: "+r[6])},m(h,m){V(h,e,m),_&&_.m(e,null),V(h,l,m),V(h,i,m),d(i,a),d(i,o)},p(h,m){v!==(v=f(h))&&(_&&_.d(1),_=v&&v(h),_&&(_.c(),_.m(e,null))),m&1&&t!==(t="gravityType "+h[0].type+" svelte-13jvfbi")&&p(e,"class",t),m&1&&n!==(n=h[0].contractOutlink)&&p(i,"href",n),m&64&&u!==(u="Poll ID: "+h[6])&&p(i,"title",u)},d(h){h&&(c(e),c(l),c(i)),_&&_.d()}}}function Fl(r){let e;return{c(){e=Y("Solo")},l(t){e=M(t,"Solo")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function jl(r){let e;return{c(){e=Y("Grand")},l(t){e=M(t,"Grand")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Yl(r){let e;return{c(){e=Y("Event")},l(t){e=M(t,"Event")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Ml(r){let e,t='<div class="placeholder svelte-13jvfbi"></div> <div class="placeholder svelte-13jvfbi"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-186qs14"&&(e.innerHTML=t),this.h()},h(){p(e,"class","titlePlaceholder svelte-13jvfbi")},m(l,i){V(l,e,i)},p:P,d(l){l&&c(e)}}}function Wl(r){let e,t,l=r[0].title.replaceAll(`
`,r[0].title.split(`
`).length>2?" ":"<br>")+"";return{c(){e=k("h1"),t=new jt(!1),this.h()},l(i){e=E(i,"H1",{class:!0});var a=A(e);t=Yt(a,!1),a.forEach(c),this.h()},h(){t.a=null,p(e,"class","svelte-13jvfbi")},m(i,a){V(i,e,a),t.m(l,e)},p(i,a){a&1&&l!==(l=i[0].title.replaceAll(`
`,i[0].title.split(`
`).length>2?" ":"<br>")+"")&&t.p(l)},d(i){i&&c(e)}}}function Ql(r){let e,t,l,i,a;return{c(){e=k("div"),t=D(),l=k("div"),i=D(),a=k("div"),this.h()},l(s){e=E(s,"DIV",{class:!0}),A(e).forEach(c),t=B(s),l=E(s,"DIV",{class:!0}),A(l).forEach(c),i=B(s),a=E(s,"DIV",{class:!0}),A(a).forEach(c),this.h()},h(){p(e,"class","placeholder svelte-13jvfbi"),L(e,"width","50px"),p(l,"class","placeholder svelte-13jvfbi"),L(l,"width","150px"),p(a,"class","placeholder svelte-13jvfbi"),L(a,"margin-left","auto"),L(a,"width","65px")},m(s,o){V(s,e,o),V(s,t,o),V(s,l,o),V(s,i,o),V(s,a,o)},p:P,d(s){s&&(c(e),c(t),c(l),c(i),c(a))}}}function Pl(r){let e,t,l=new Date(r[3].startDate).toLocaleDateString()+"",i,a,s,o=r[0].polls.length>1&&ut(r),n=(r[7]>-1||r[8]<r[9])&&ht();return{c(){o&&o.c(),e=D(),t=k("p"),i=Y(l),a=D(),n&&n.c(),s=J(),this.h()},l(u){o&&o.l(u),e=B(u),t=E(u,"P",{class:!0});var f=A(t);i=M(f,l),f.forEach(c),a=B(u),n&&n.l(u),s=J(),this.h()},h(){p(t,"class","svelte-13jvfbi")},m(u,f){o&&o.m(u,f),V(u,e,f),V(u,t,f),d(t,i),V(u,a,f),n&&n.m(u,f),V(u,s,f)},p(u,f){u[0].polls.length>1?o?o.p(u,f):(o=ut(u),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f&8&&l!==(l=new Date(u[3].startDate).toLocaleDateString()+"")&&T(i,l),u[7]>-1||u[8]<u[9]?n||(n=ht(),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(u){u&&(c(e),c(t),c(a),c(s)),o&&o.d(u),n&&n.d(u)}}}function ut(r){let e,t=r[3].title+"",l;return{c(){e=k("p"),l=Y(t),this.h()},l(i){e=E(i,"P",{class:!0});var a=A(e);l=M(a,t),a.forEach(c),this.h()},h(){p(e,"class","svelte-13jvfbi")},m(i,a){V(i,e,a),d(e,l)},p(i,a){a&8&&t!==(t=i[3].title+"")&&T(l,t)},d(i){i&&c(e)}}}function ht(r){let e,t='<div class="dot"></div>',l,i,a="LIVE";return{c(){e=k("div"),e.innerHTML=t,l=D(),i=k("p"),i.textContent=a,this.h()},l(s){e=E(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-vskkj9"&&(e.innerHTML=t),l=B(s),i=E(s,"P",{class:!0,"data-svelte-h":!0}),Me(i)!=="svelte-1k24nxm"&&(i.textContent=a),this.h()},h(){p(e,"class","liveIndicator svelte-13jvfbi"),p(i,"class","svelte-13jvfbi")},m(s,o){V(s,e,o),V(s,l,o),V(s,i,o)},d(s){s&&(c(e),c(l),c(i))}}}function Gl(r){let e,t,l;return{c(){e=k("div"),t=D(),l=k("div"),this.h()},l(i){e=E(i,"DIV",{class:!0}),A(e).forEach(c),t=B(i),l=E(i,"DIV",{class:!0}),A(l).forEach(c),this.h()},h(){p(e,"class","itemPlaceholder svelte-13jvfbi"),L(e,"height","250px"),p(l,"class","itemPlaceholder svelte-13jvfbi"),L(l,"height","350px")},m(i,a){V(i,e,a),V(i,t,a),V(i,l,a)},p:P,i:P,o:P,d(i){i&&(c(e),c(t),c(l))}}}function Ol(r){let e,t,l,i;const a=[Rl,Nl],s=[];function o(n,u){return n[7]>-1?0:1}return e=o(r),t=s[e]=a[e](r),{c(){t.c(),l=J()},l(n){t.l(n),l=J()},m(n,u){s[e].m(n,u),V(n,l,u),i=!0},p(n,u){let f=e;e=o(n),e===f?s[e].p(n,u):(Ve(),ie(s[f],1,1,()=>{s[f]=null}),Ae(),t=s[e],t?t.p(n,u):(t=s[e]=a[e](n),t.c()),se(t,1),t.m(l.parentNode,l))},i(n){i||(se(t),i=!0)},o(n){ie(t),i=!1},d(n){n&&c(l),s[e].d(n)}}}function Nl(r){let e,t,l,i;e=new ml({props:{contract:r[5].target.toString().toLowerCase(),poll:r[6],revealedVotes:r[8],totalVotes:r[9]}});function a(n,u){return n[3].pollViewMetadata.slots&&n[3].pollViewMetadata.slotChoices?Ll:Tl}let s=a(r),o=s(r);return{c(){Ie(e.$$.fragment),t=D(),l=k("div"),o.c(),this.h()},l(n){ye(e.$$.fragment,n),t=B(n),l=E(n,"DIV",{class:!0});var u=A(l);o.l(u),u.forEach(c),this.h()},h(){p(l,"class","item polls svelte-13jvfbi")},m(n,u){De(e,n,u),V(n,t,u),V(n,l,u),o.m(l,null),i=!0},p(n,u){const f={};u&32&&(f.contract=n[5].target.toString().toLowerCase()),u&64&&(f.poll=n[6]),u&256&&(f.revealedVotes=n[8]),u&512&&(f.totalVotes=n[9]),e.$set(f),s===(s=a(n))&&o?o.p(n,u):(o.d(1),o=s(n),o&&(o.c(),o.m(l,null)))},i(n){i||(se(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){n&&(c(t),c(l)),Be(e,n),o.d()}}}function Rl(r){let e,t,l,i=r[12]("gravity.counting_countdown")+"",a,s,o,n=String(Math.floor(r[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(r[7]%(60*1e3)/1e3)).padStart(2,"0"),u,f=r[0]&&r[0].bannerImageUrl&&gt(r);return{c(){e=k("div"),f&&f.c(),t=D(),l=k("p"),a=Y(i),s=D(),o=k("h3"),u=Y(n),this.h()},l(v){e=E(v,"DIV",{class:!0});var _=A(e);f&&f.l(_),t=B(_),l=E(_,"P",{});var h=A(l);a=M(h,i),h.forEach(c),s=B(_),o=E(_,"H3",{class:!0});var m=A(o);u=M(m,n),m.forEach(c),_.forEach(c),this.h()},h(){p(o,"class","svelte-13jvfbi"),p(e,"class","item countdown svelte-13jvfbi")},m(v,_){V(v,e,_),f&&f.m(e,null),d(e,t),d(e,l),d(l,a),d(e,s),d(e,o),d(o,u)},p(v,_){v[0]&&v[0].bannerImageUrl?f?f.p(v,_):(f=gt(v),f.c(),f.m(e,t)):f&&(f.d(1),f=null),_&4096&&i!==(i=v[12]("gravity.counting_countdown")+"")&&T(a,i),_&128&&n!==(n=String(Math.floor(v[7]/(60*60*1e3))).padStart(2,"0")+":"+String(Math.floor(v[7]%(60*60*1e3)/(60*1e3))).padStart(2,"0")+":"+String(Math.floor(v[7]%(60*1e3)/1e3)).padStart(2,"0"))&&T(u,n)},i:P,o:P,d(v){v&&c(e),f&&f.d()}}}function Tl(r){let e,t=[],l=new Map,i=x([...r[3].choices].sort(r[18]));const a=s=>s[25];for(let s=0;s<i.length;s+=1){let o=rt(r,i,s),n=a(o);l.set(n,t[s]=_t(n,o))}return{c(){e=k("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=E(s,"DIV",{class:!0});var o=A(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(c),this.h()},h(){p(e,"class","slot svelte-13jvfbi")},m(s,o){V(s,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(s,o){if(o&3080){i=x([...s[3].choices].sort(s[18]));for(let n=0;n<t.length;n+=1)t[n].r();t=Pe(t,o,a,1,s,i,l,e,Ge,_t,null,rt);for(let n=0;n<t.length;n+=1)t[n].a()}},d(s){s&&c(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Ll(r){let e,t=x(r[3].pollViewMetadata.slots),l=[];for(let i=0;i<t.length;i+=1)l[i]=pt(ot(r,t,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=J()},m(i,a){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,a);V(i,e,a)},p(i,a){if(a&10248){t=x(i[3].pollViewMetadata.slots);let s;for(s=0;s<t.length;s+=1){const o=ot(i,t,s);l[s]?l[s].p(o,a):(l[s]=pt(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&c(e),be(l,i)}}}function _t(r,e){let t,l,i,a,s,o,n,u=e[25].title+"",f,v,_,h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"",m,g,y=e[26]+"",b,w,I,S,F,Z=`${e[26]}%`,j,q,U=P;return{key:r,first:null,c(){t=k("div"),l=k("div"),i=k("img"),o=D(),n=k("p"),f=Y(u),v=D(),_=k("p"),m=Y(h),g=Y(" COMO ("),b=Y(y),w=Y("%)"),I=D(),S=k("div"),F=k("div"),j=D(),this.h()},l(W){t=E(W,"DIV",{class:!0});var Q=A(t);l=E(Q,"DIV",{class:!0});var G=A(l);i=E(G,"IMG",{src:!0,alt:!0,class:!0}),o=B(G),n=E(G,"P",{class:!0});var z=A(n);f=M(z,u),z.forEach(c),v=B(G),_=E(G,"P",{});var O=A(_);m=M(O,h),g=M(O," COMO ("),b=M(O,y),w=M(O,"%)"),O.forEach(c),G.forEach(c),I=B(Q),S=E(Q,"DIV",{class:!0});var X=A(S);F=E(X,"DIV",{class:!0}),A(F).forEach(c),X.forEach(c),j=B(Q),Q.forEach(c),this.h()},h(){K(i.src,a=e[25].txImageUrl)||p(i,"src",a),p(i,"alt",s=e[25].title),p(i,"class","svelte-13jvfbi"),p(n,"class","name svelte-13jvfbi"),p(l,"class","choiceTitle svelte-13jvfbi"),p(F,"class","progress svelte-13jvfbi"),L(F,"width",Z),p(S,"class","choiceBar svelte-13jvfbi"),p(t,"class","choice svelte-13jvfbi"),this.first=t},m(W,Q){V(W,t,Q),d(t,l),d(l,i),d(l,o),d(l,n),d(n,f),d(l,v),d(l,_),d(_,m),d(_,g),d(_,b),d(_,w),d(t,I),d(t,S),d(S,F),d(t,j)},p(W,Q){e=W,Q&2056&&!K(i.src,a=e[25].txImageUrl)&&p(i,"src",a),Q&2056&&s!==(s=e[25].title)&&p(i,"alt",s),Q&2056&&u!==(u=e[25].title+"")&&T(f,u),Q&2056&&h!==(h=Number(fe(e[11][e[3].choices.indexOf(e[25])])).toLocaleString("en-US")+"")&&T(m,h),Q&3080&&y!==(y=e[26]+"")&&T(b,y),Q&3080&&Z!==(Z=`${e[26]}%`)&&L(F,"width",Z)},r(){q=t.getBoundingClientRect()},f(){Re(t),U()},a(){U(),U=Ne(t,q,Te,{})},d(W){W&&c(t)}}}function dt(r){let e,t,l;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=r[25].roundImageUrl)||p(e,"src",t),p(e,"alt",l=r[25].name),p(e,"class","svelte-13jvfbi")},m(i,a){V(i,e,a)},p(i,a){a&8&&!K(e.src,t=i[25].roundImageUrl)&&p(e,"src",t),a&8&&l!==(l=i[25].name)&&p(e,"alt",l)},d(i){i&&c(e)}}}function vt(r,e){let t,l,i,a,s=e[25].name+"",o,n,u,f=e[13](e[24],e[25].id).toLocaleString("en-US")+"",v,_,h=e[26]+"",m,g,y,b,w,I=`${e[26]}%`,S,F,Z=P,j=e[25].roundImageUrl&&dt(e);return{key:r,first:null,c(){t=k("div"),l=k("div"),j&&j.c(),i=D(),a=k("p"),o=Y(s),n=D(),u=k("p"),v=Y(f),_=Y(" COMO ("),m=Y(h),g=Y("%)"),y=D(),b=k("div"),w=k("div"),S=D(),this.h()},l(q){t=E(q,"DIV",{class:!0});var U=A(t);l=E(U,"DIV",{class:!0});var W=A(l);j&&j.l(W),i=B(W),a=E(W,"P",{class:!0});var Q=A(a);o=M(Q,s),Q.forEach(c),n=B(W),u=E(W,"P",{});var G=A(u);v=M(G,f),_=M(G," COMO ("),m=M(G,h),g=M(G,"%)"),G.forEach(c),W.forEach(c),y=B(U),b=E(U,"DIV",{class:!0});var z=A(b);w=E(z,"DIV",{class:!0}),A(w).forEach(c),z.forEach(c),S=B(U),U.forEach(c),this.h()},h(){p(a,"class","name svelte-13jvfbi"),p(l,"class","choiceTitle svelte-13jvfbi"),p(w,"class","progress svelte-13jvfbi"),L(w,"width",I),p(b,"class","choiceBar svelte-13jvfbi"),p(t,"class","choice svelte-13jvfbi"),this.first=t},m(q,U){V(q,t,U),d(t,l),j&&j.m(l,null),d(l,i),d(l,a),d(a,o),d(l,n),d(l,u),d(u,v),d(u,_),d(u,m),d(u,g),d(t,y),d(t,b),d(b,w),d(t,S)},p(q,U){e=q,e[25].roundImageUrl?j?j.p(e,U):(j=dt(e),j.c(),j.m(l,i)):j&&(j.d(1),j=null),U&8&&s!==(s=e[25].name+"")&&T(o,s),U&8&&f!==(f=e[13](e[24],e[25].id).toLocaleString("en-US")+"")&&T(v,f),U&2056&&h!==(h=e[26]+"")&&T(m,h),U&2056&&I!==(I=`${e[26]}%`)&&L(w,"width",I)},r(){F=t.getBoundingClientRect()},f(){Re(t),Z()},a(){Z(),Z=Ne(t,F,Te,{})},d(q){q&&c(t),j&&j.d()}}}function mt(r){let e;return{c(){e=k("hr")},l(t){e=E(t,"HR",{})},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function pt(r){let e,t,l,i,a,s,o=r[22].name+"",n,u,f=[],v=new Map,_,h;function m(...w){return r[17](r[24],...w)}let g=x(r[3].pollViewMetadata.slotChoices.sort(m));const y=w=>w[25];for(let w=0;w<g.length;w+=1){let I=nt(r,g,w),S=y(I);v.set(S,f[w]=vt(S,I))}let b=r[24]<r[3].pollViewMetadata.slots.length-1&&mt();return{c(){e=k("div"),t=k("p"),l=k("img"),s=D(),n=Y(o),u=D();for(let w=0;w<f.length;w+=1)f[w].c();_=D(),b&&b.c(),h=J(),this.h()},l(w){e=E(w,"DIV",{class:!0});var I=A(e);t=E(I,"P",{class:!0});var S=A(t);l=E(S,"IMG",{src:!0,alt:!0,class:!0}),s=B(S),n=M(S,o),S.forEach(c),u=B(I);for(let F=0;F<f.length;F+=1)f[F].l(I);I.forEach(c),_=B(w),b&&b.l(w),h=J(),this.h()},h(){K(l.src,i=r[22].backgroundImageUrl)||p(l,"src",i),p(l,"alt",a=r[22].name),p(l,"class","svelte-13jvfbi"),p(t,"class","slotTitle svelte-13jvfbi"),p(e,"class","slot svelte-13jvfbi")},m(w,I){V(w,e,I),d(e,t),d(t,l),d(t,s),d(t,n),d(e,u);for(let S=0;S<f.length;S+=1)f[S]&&f[S].m(e,null);V(w,_,I),b&&b.m(w,I),V(w,h,I)},p(w,I){if(r=w,I&8&&!K(l.src,i=r[22].backgroundImageUrl)&&p(l,"src",i),I&8&&a!==(a=r[22].name)&&p(l,"alt",a),I&8&&o!==(o=r[22].name+"")&&T(n,o),I&10248){g=x(r[3].pollViewMetadata.slotChoices.sort(m));for(let S=0;S<f.length;S+=1)f[S].r();f=Pe(f,I,y,1,r,g,v,e,Ge,vt,null,nt);for(let S=0;S<f.length;S+=1)f[S].a()}r[24]<r[3].pollViewMetadata.slots.length-1?b||(b=mt(),b.c(),b.m(h.parentNode,h)):b&&(b.d(1),b=null)},d(w){w&&(c(e),c(_),c(h));for(let I=0;I<f.length;I+=1)f[I].d();b&&b.d(w)}}}function gt(r){let e,t,l;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(e.src,t=r[0].bannerImageUrl)||p(e,"src",t),p(e,"alt",l=r[0].title),p(e,"class","svelte-13jvfbi")},m(i,a){V(i,e,a)},p(i,a){a&1&&!K(e.src,t=i[0].bannerImageUrl)&&p(e,"src",t),a&1&&l!==(l=i[0].title)&&p(e,"alt",l)},d(i){i&&c(e)}}}function Jl(r){let e,t,l,i,a;return{c(){e=k("div"),t=D(),l=k("div"),i=D(),a=k("div"),this.h()},l(s){e=E(s,"DIV",{class:!0}),A(e).forEach(c),t=B(s),l=E(s,"DIV",{class:!0}),A(l).forEach(c),i=B(s),a=E(s,"DIV",{class:!0}),A(a).forEach(c),this.h()},h(){p(e,"class","itemPlaceholder svelte-13jvfbi"),p(l,"class","itemPlaceholder svelte-13jvfbi"),L(l,"flex","2"),p(a,"class","itemPlaceholder svelte-13jvfbi"),L(a,"flex","1")},m(s,o){V(s,e,o),V(s,t,o),V(s,l,o),V(s,i,o),V(s,a,o)},p:P,i:P,o:P,d(s){s&&(c(e),c(t),c(l),c(i),c(a))}}}function Hl(r){let e,t,l=r[12]("gravity.totalcomo")+"",i,a,s,o,n,u,f,v,_=r[10]!==void 0&&bt(r);o=new _l({props:{voteStart:Date.parse(r[3].startDate),contract:r[5].target.toString(),poll:r[3],pollId:r[6],artist:r[1]}});function h(g){r[19](g)}let m={artist:r[1]};return r[4]!==void 0&&(m.gravities=r[4]),u=new Dl({props:m}),Et.push(()=>At(u,"gravities",h)),{c(){e=k("div"),t=k("b"),i=Y(l),a=D(),_&&_.c(),s=D(),Ie(o.$$.fragment),n=D(),Ie(u.$$.fragment),this.h()},l(g){e=E(g,"DIV",{class:!0});var y=A(e);t=E(y,"B",{class:!0});var b=A(t);i=M(b,l),b.forEach(c),a=B(y),_&&_.l(y),y.forEach(c),s=B(g),ye(o.$$.fragment,g),n=B(g),ye(u.$$.fragment,g),this.h()},h(){p(t,"class","svelte-13jvfbi"),p(e,"class","item total svelte-13jvfbi")},m(g,y){V(g,e,y),d(e,t),d(t,i),d(e,a),_&&_.m(e,null),V(g,s,y),De(o,g,y),V(g,n,y),De(u,g,y),v=!0},p(g,y){(!v||y&4096)&&l!==(l=g[12]("gravity.totalcomo")+"")&&T(i,l),g[10]!==void 0?_?_.p(g,y):(_=bt(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null);const b={};y&8&&(b.voteStart=Date.parse(g[3].startDate)),y&32&&(b.contract=g[5].target.toString()),y&8&&(b.poll=g[3]),y&64&&(b.pollId=g[6]),y&2&&(b.artist=g[1]),o.$set(b);const w={};y&2&&(w.artist=g[1]),!f&&y&16&&(f=!0,w.gravities=g[4],wt(()=>f=!1)),u.$set(w)},i(g){v||(se(o.$$.fragment,g),se(u.$$.fragment,g),v=!0)},o(g){ie(o.$$.fragment,g),ie(u.$$.fragment,g),v=!1},d(g){g&&(c(e),c(s),c(n)),_&&_.d(),Be(o,g),Be(u,g)}}}function bt(r){let e,t=r[10].toLocaleString("en-US")+"",l,i,a,s;return{c(){e=k("p"),l=Y(t),i=D(),a=k("img"),this.h()},l(o){e=E(o,"P",{});var n=A(e);l=M(n,t),n.forEach(c),i=B(o),a=E(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){K(a.src,s=Qe(r[1]).como)||p(a,"src",s),p(a,"alt","COMO"),p(a,"class","svelte-13jvfbi")},m(o,n){V(o,e,n),d(e,l),V(o,i,n),V(o,a,n)},p(o,n){n&1024&&t!==(t=o[10].toLocaleString("en-US")+"")&&T(l,t),n&2&&!K(a.src,s=Qe(o[1]).como)&&p(a,"src",s)},d(o){o&&(c(e),c(i),c(a))}}}function Zl(r){let e,t,l,i,a,s,o,n,u,f,v,_,h,m,g,y,b,w,I,S,F=r[0]&&ct(r);const Z=[Cl,Bl],j=[];function q(C,H){return C[1]?0:1}o=q(r),n=j[o]=Z[o](r);function U(C,H){return C[0]?Ul:Sl}let W=U(r),Q=W(r);function G(C,H){return C[0]?Wl:Ml}let z=G(r),O=z(r);function X(C,H){return C[0]&&C[3]?Pl:Ql}let ue=X(r),$=ue(r);const he=[Ol,Gl],N=[];function R(C,H){return C[3]?0:1}m=R(r),g=N[m]=he[m](r);const ae=[Hl,Jl],ee=[];function re(C,H){return C[3]&&C[1]?0:1}return w=re(r),I=ee[w]=ae[w](r),{c(){F&&F.c(),e=J(),t=D(),l=k("div"),i=k("div"),a=k("div"),s=k("div"),n.c(),u=D(),Q.c(),f=D(),O.c(),v=D(),_=k("div"),$.c(),h=D(),g.c(),y=D(),b=k("div"),I.c(),this.h()},l(C){const H=Ft("svelte-1pdh1or",document.head);F&&F.l(H),e=J(),H.forEach(c),t=B(C),l=E(C,"DIV",{class:!0});var _e=A(l);i=E(_e,"DIV",{class:!0});var de=A(i);a=E(de,"DIV",{class:!0});var oe=A(a);s=E(oe,"DIV",{class:!0});var Ee=A(s);n.l(Ee),u=B(Ee),Q.l(Ee),Ee.forEach(c),f=B(oe),O.l(oe),v=B(oe),_=E(oe,"DIV",{class:!0});var Le=A(_);$.l(Le),Le.forEach(c),oe.forEach(c),h=B(de),g.l(de),de.forEach(c),y=B(_e),b=E(_e,"DIV",{class:!0});var Je=A(b);I.l(Je),Je.forEach(c),_e.forEach(c),this.h()},h(){p(s,"class","headerSection svelte-13jvfbi"),p(_,"class","headerSection svelte-13jvfbi"),p(a,"class","header svelte-13jvfbi"),p(i,"class","main svelte-13jvfbi"),p(b,"class","sidebar svelte-13jvfbi"),p(l,"class","layout svelte-13jvfbi")},m(C,H){F&&F.m(document.head,null),d(document.head,e),V(C,t,H),V(C,l,H),d(l,i),d(i,a),d(a,s),j[o].m(s,null),d(s,u),Q.m(s,null),d(a,f),O.m(a,null),d(a,v),d(a,_),$.m(_,null),d(i,h),N[m].m(i,null),d(l,y),d(l,b),ee[w].m(b,null),S=!0},p(C,[H]){C[0]?F?F.p(C,H):(F=ct(C),F.c(),F.m(e.parentNode,e)):F&&(F.d(1),F=null);let _e=o;o=q(C),o===_e?j[o].p(C,H):(Ve(),ie(j[_e],1,1,()=>{j[_e]=null}),Ae(),n=j[o],n?n.p(C,H):(n=j[o]=Z[o](C),n.c()),se(n,1),n.m(s,u)),W===(W=U(C))&&Q?Q.p(C,H):(Q.d(1),Q=W(C),Q&&(Q.c(),Q.m(s,null))),z===(z=G(C))&&O?O.p(C,H):(O.d(1),O=z(C),O&&(O.c(),O.m(a,v))),ue===(ue=X(C))&&$?$.p(C,H):($.d(1),$=ue(C),$&&($.c(),$.m(_,null)));let de=m;m=R(C),m===de?N[m].p(C,H):(Ve(),ie(N[de],1,1,()=>{N[de]=null}),Ae(),g=N[m],g?g.p(C,H):(g=N[m]=he[m](C),g.c()),se(g,1),g.m(i,null));let oe=w;w=re(C),w===oe?ee[w].p(C,H):(Ve(),ie(ee[oe],1,1,()=>{ee[oe]=null}),Ae(),I=ee[w],I?I.p(C,H):(I=ee[w]=ae[w](C),I.c()),se(I,1),I.m(b,null))},i(C){S||(se(n),se(g),se(I),S=!0)},o(C){ie(n),ie(g),ie(I),S=!1},d(C){C&&(c(t),c(l)),F&&F.d(C),c(e),j[o].d(),Q.d(),O.d(),$.d(),N[m].d(),ee[w].d()}}}function Xl(r,e,t){let l,i;ge(r,Rt,U=>t(2,l=U)),ge(r,je,U=>t(12,i=U));let a,s,o,n,u,f,v,_=-1,h,m,g,y,b;async function w(){if(l.params.id)if(n&&n.find(U=>U.id===Number(l.params.id)))t(0,a=n.find(U=>U.id===Number(l.params.id)));else{const U=await fetch(`${me.URL}/gravity/v3/${l.params.artist}/gravity/${l.params.id}`);t(0,a=(await U.json()).gravity)}else{const W=await(await fetch(`${me.URL}/gravity/v3/${l.params.artist||""}`)).json();W.ongoing.length?t(0,a=W.ongoing[0]):W.upcoming.length?t(0,a=W.upcoming.at(-1)):t(0,a=W.past[0]),t(4,n=[...W.upcoming,...W.ongoing,...W.past].filter(Q=>Q.artist===(a==null?void 0:a.artist)))}t(1,o=(await me.artists()).find(U=>U.name===(a==null?void 0:a.artist))),I()}async function I(){var he;t(7,_=-1);const U=a==null?void 0:a.polls.sort((N,R)=>Date.parse(N.startDate)-Date.parse(R.startDate)),W=l.params.pollId||((he=(a==null?void 0:a.polls.find(N=>!N.finalized))||(U==null?void 0:U.at(-1)))==null?void 0:he.id),G=(await(await fetch(`${me.URL}/gravity/v3/${a==null?void 0:a.artist}/gravity/${a==null?void 0:a.id}/polls/${W}`)).json()).pollDetail;t(5,u=new Ze(o.contracts.Governor,we.ABI.Governor,we.RPC)),t(6,f=G.pollIdOnChain||G.id),(await u.candidates(f)).toString().replaceAll("\b","")!==G.choices.map(N=>N.id).toString().replaceAll("\b","")&&t(6,f-=1);const O=new Ze(o.contracts.Governor,we.ABI.Governor,new tl(we.RPC)),[X,ue,$]=await Promise.all([O.polls(f),O.totalVotes(f),O.votesPerCandidates(f)]);t(8,h=Number(X.revealedVotes)),t(9,m=Number(ue)),t(10,g=Number(fe(X.totalVotedCOMO))),t(11,y=$),(Date.parse(G.endDate)>Date.now()||h<m)&&(window.clearInterval(v),t(7,_=Date.parse(G.endDate)-Date.now()),t(14,v=window.setInterval(async()=>{if(Date.parse(G.endDate)>Date.now()){t(7,_=Date.parse(G.endDate)-Date.now());const[N,R]=await Promise.all([O.polls(f),O.totalVotes(f)]);t(10,g=Number(fe(N.totalVotedCOMO))),t(9,m=Number(R))}else if(m===h)window.clearInterval(v);else{t(7,_=-1);const[N,R]=await Promise.all([O.polls(f),O.votesPerCandidates(f)]);Number(N.revealedVotes)>h&&(t(8,h=Number(N.revealedVotes)),t(11,y=R))}},1e3))),t(3,s=G)}function S(U,W){var Q;return(Q=s==null?void 0:s.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:Q.filter(G=>G.slotChoiceIds[U]===W).reduce((G,z)=>{var X;const O=(X=s==null?void 0:s.pollViewMetadata.choiceIdToSlotChoicesMapTable)==null?void 0:X.indexOf(z);return G+Number(fe(y[O]))},0)}kt(()=>window.clearInterval(v));function F(U){o=U,t(1,o),t(2,l),t(15,b),t(14,v)}const Z=(U,W,Q)=>S(U,Q.id)-S(U,W.id),j=(U,W)=>Number(y[(s==null?void 0:s.choices.indexOf(W))||0])-Number(y[(s==null?void 0:s.choices.indexOf(U))||0]);function q(U){n=U,t(4,n),t(2,l),t(15,b),t(1,o),t(14,v)}return r.$$.update=()=>{r.$$.dirty&49158&&(l.params!==b&&(!b||l.params.id!==b.id||l.params.artist!==b.artist?(o&&o.name!==l.params.artist&&t(1,o=t(4,n=void 0)),t(0,a=void 0),t(3,s=void 0),window.clearInterval(v),w()):l.params.pollId!==b.pollId&&(t(3,s=void 0),window.clearInterval(v),I())),t(15,b=l.params)),r.$$.dirty&3&&o&&a&&a.artist!==o.name&&Nt(`/gravity/${o.name}`)},[a,o,l,s,n,u,f,_,h,m,g,y,i,S,v,b,F,Z,j,q]}class ai extends Ue{constructor(e){super(),Fe(this,e,Xl,Zl,ke,{})}}export{ai as component,si as universal};
